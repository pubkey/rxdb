{"version":3,"file":"binary-search-bounds.js","names":["ge","a","y","c","l","h","i","m","x","p","undefined","gt","lt","le","eq","norm","f","length","boundGE","boundGT","boundLT","boundLE","boundEQ"],"sources":["../../../../src/plugins/storage-memory/binary-search-bounds.ts"],"sourcesContent":["/**\n * Everything in this file was copied and adapted from\n * @link https://github.com/mikolalysenko/binary-search-bounds\n *\n * TODO We should use the original npm module instead when this bug is fixed:\n * @link https://github.com/mikolalysenko/binary-search-bounds/pull/14\n */\n\n\n\ntype Compare<T> = ((a: T, b: T) => number | null | undefined);\n\nfunction ge<T>(a: T[], y: T, c: Compare<T>, l?: any, h?: any): number {\n    let i: number = h + 1;\n    while (l <= h) {\n        const m = (l + h) >>> 1;\n        const x: any = a[m];\n        const p: any = (c !== undefined) ? c(x, y) : (x - (y as any));\n        if (p >= 0) {\n            i = m; h = m - 1;\n        } else {\n            l = m + 1;\n        }\n    }\n    return i;\n}\n\nfunction gt<T>(a: T[], y: T, c: Compare<T>, l?: any, h?: any): number {\n    let i = h + 1;\n    while (l <= h) {\n        const m = (l + h) >>> 1;\n        const x = a[m];\n        const p: any = (c !== undefined) ? c(x, y) : ((x as any) - (y as any));\n        if (p > 0) {\n            i = m; h = m - 1;\n        } else {\n            l = m + 1;\n        }\n    }\n    return i;\n}\n\nfunction lt<T>(a: T[], y: T, c: Compare<T>, l?: any, h?: any): number {\n    let i = l - 1;\n    while (l <= h) {\n        const m = (l + h) >>> 1, x = a[m];\n        const p: any = (c !== undefined) ? c(x, y) : ((x as any) - (y as any));\n        if (p < 0) {\n            i = m; l = m + 1;\n        } else {\n            h = m - 1;\n        }\n    }\n    return i;\n}\n\nfunction le<T>(a: T[], y: T, c: Compare<T>, l?: any, h?: any): number {\n    let i = l - 1;\n    while (l <= h) {\n        const m = (l + h) >>> 1, x = a[m];\n        const p: any = (c !== undefined) ? c(x, y) : ((x as any) - (y as any));\n        if (p <= 0) {\n            i = m; l = m + 1;\n        } else {\n            h = m - 1;\n        }\n    }\n    return i;\n}\n\nfunction eq<T>(a: T[], y: T, c: Compare<T>, l?: any, h?: any): number {\n    while (l <= h) {\n        const m = (l + h) >>> 1, x = a[m];\n        const p: any = (c !== undefined) ? c(x, y) : ((x as any) - (y as any));\n        if (p === 0) {\n            return m;\n        }\n        if (p <= 0) {\n            l = m + 1;\n        } else {\n            h = m - 1;\n        }\n    }\n    return -1;\n}\n\nfunction norm<T>(a: T[], y: T, c: Compare<T>, l: any, h: any, f: any) {\n    if (typeof c === 'function') {\n        return f(a, y, c, (l === undefined) ? 0 : l | 0, (h === undefined) ? a.length - 1 : h | 0);\n    }\n    return f(a, y, undefined, (c === undefined) ? 0 : c | 0, (l === undefined) ? a.length - 1 : l | 0);\n}\n\n\nexport function boundGE<T>(a: T[], y: T, c: Compare<T>, l?: any, h?: any) {\n    return norm(a, y, c, l, h, ge);\n}\nexport function boundGT<T>(a: T[], y: T, c: Compare<T>, l?: any, h?: any) {\n    return norm(a, y, c, l, h, gt);\n}\nexport function boundLT<T>(a: T[], y: T, c: Compare<T>, l?: any, h?: any) {\n    return norm(a, y, c, l, h, lt);\n}\nexport function boundLE<T>(a: T[], y: T, c: Compare<T>, l?: any, h?: any) {\n    return norm(a, y, c, l, h, le);\n}\nexport function boundEQ<T>(a: T[], y: T, c: Compare<T>, l?: any, h?: any) {\n    return norm(a, y, c, l, h, eq);\n}\n"],"mappings":"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"}