{"version":3,"file":"replication-helper.js","names":["flatClone","DEFAULT_MODIFIER","d","Promise","resolve","swapDefaultDeletedTodeletedField","deletedField","doc","isDeleted","_deleted","swapdeletedFieldToDefaultDeleted"],"sources":["../../../../src/plugins/replication/replication-helper.ts"],"sourcesContent":["import type {\n    WithDeleted\n} from '../../types';\nimport { flatClone } from '../../util';\n\n// does nothing\nexport const DEFAULT_MODIFIER = (d: any) => Promise.resolve(d);\n\n\nexport function swapDefaultDeletedTodeletedField<RxDocType>(\n    deletedField: string,\n    doc: WithDeleted<RxDocType>\n): RxDocType {\n    if (deletedField === '_deleted') {\n        return doc;\n    } else {\n        doc = flatClone(doc);\n        const isDeleted = !!doc._deleted;\n        (doc as any)[deletedField] = isDeleted;\n        delete (doc as any)._deleted;\n        return doc;\n    }\n}\n\n\nexport function swapdeletedFieldToDefaultDeleted<RxDocType>(\n    deletedField: string,\n    doc: RxDocType\n): WithDeleted<RxDocType> {\n    if (deletedField === '_deleted') {\n        return doc as any;\n    } else {\n        doc = flatClone(doc);\n        const isDeleted = !!(doc as any)[deletedField];\n        (doc as any)._deleted = isDeleted;\n        delete (doc as any)[deletedField];\n        return doc as any;\n    }\n}\n"],"mappings":"AAGA,SAASA,SAAT,QAA0B,YAA1B,C,CAEA;;AACA,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,CAAD;EAAA,OAAYC,OAAO,CAACC,OAAR,CAAgBF,CAAhB,CAAZ;AAAA,CAAzB;AAGP,OAAO,SAASG,gCAAT,CACHC,YADG,EAEHC,GAFG,EAGM;EACT,IAAID,YAAY,KAAK,UAArB,EAAiC;IAC7B,OAAOC,GAAP;EACH,CAFD,MAEO;IACHA,GAAG,GAAGP,SAAS,CAACO,GAAD,CAAf;IACA,IAAMC,SAAS,GAAG,CAAC,CAACD,GAAG,CAACE,QAAxB;IACCF,GAAD,CAAaD,YAAb,IAA6BE,SAA7B;IACA,OAAQD,GAAD,CAAaE,QAApB;IACA,OAAOF,GAAP;EACH;AACJ;AAGD,OAAO,SAASG,gCAAT,CACHJ,YADG,EAEHC,GAFG,EAGmB;EACtB,IAAID,YAAY,KAAK,UAArB,EAAiC;IAC7B,OAAOC,GAAP;EACH,CAFD,MAEO;IACHA,GAAG,GAAGP,SAAS,CAACO,GAAD,CAAf;IACA,IAAMC,SAAS,GAAG,CAAC,CAAED,GAAD,CAAaD,YAAb,CAApB;IACCC,GAAD,CAAaE,QAAb,GAAwBD,SAAxB;IACA,OAAQD,GAAD,CAAaD,YAAb,CAAP;IACA,OAAOC,GAAP;EACH;AACJ"}