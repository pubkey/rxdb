{"version":3,"file":"index.js","names":["getRxStorageMemory","settings","storage","name","statics","RxStorageDexieStatics","collectionStates","Map","createStorageInstance","params","ensureRxStorageInstanceParamsAreCorrect","flatClone","collectionName","schema","version","useSettings","Object","assign","options","createMemoryStorageInstance"],"sources":["../../../../src/plugins/memory/index.ts"],"sourcesContent":["import { ensureRxStorageInstanceParamsAreCorrect } from '../../rx-storage-helper';\nimport type { RxStorageInstanceCreationParams } from '../../types';\nimport { flatClone } from '../../util';\nimport { RxStorageDexieStatics } from '../dexie/rx-storage-dexie';\nimport type {\n    RxStorageMemory,\n    RxStorageMemoryInstanceCreationOptions,\n    RxStorageMemorySettings\n} from './memory-types';\nimport {\n    createMemoryStorageInstance,\n    RxStorageInstanceMemory\n} from './rx-storage-instance-memory';\n\nexport function getRxStorageMemory(\n    settings: RxStorageMemorySettings = {}\n): RxStorageMemory {\n\n    const storage: RxStorageMemory = {\n        name: 'memory',\n        statics: RxStorageDexieStatics,\n        collectionStates: new Map(),\n        createStorageInstance<RxDocType>(\n            params: RxStorageInstanceCreationParams<RxDocType, RxStorageMemoryInstanceCreationOptions>\n        ): Promise<RxStorageInstanceMemory<RxDocType>> {\n            ensureRxStorageInstanceParamsAreCorrect(params);\n\n            // TODO we should not need to append the schema version here.\n            params = flatClone(params);\n            params.collectionName = params.collectionName + '-' + params.schema.version;\n\n            const useSettings = Object.assign(\n                {},\n                settings,\n                params.options\n            );\n\n\n            return createMemoryStorageInstance(this, params, useSettings);\n        }\n    };\n\n    return storage;\n}\n\n\nexport * from './memory-helper';\nexport * from './memory-types';\nexport * from './memory-indexes';\nexport * from './rx-storage-instance-memory';\n"],"mappings":";;;;;;;;;;AAAA;;AAEA;;AACA;;AAMA;;AAwCA;EAAA;EAAA;EAAA;EAAA;IAAA;IAAA;MAAA;IAAA;EAAA;AAAA;;AAHA;;AAAA;EAAA;EAAA;EAAA;EAAA;IAAA;IAAA;MAAA;IAAA;EAAA;AAAA;;AACA;;AAAA;EAAA;EAAA;EAAA;EAAA;IAAA;IAAA;MAAA;IAAA;EAAA;AAAA;;AACA;;AAAA;EAAA;EAAA;EAAA;EAAA;IAAA;IAAA;MAAA;IAAA;EAAA;AAAA;;AAlCO,SAASA,kBAAT,GAEY;EAAA,IADfC,QACe,uEADqB,EACrB;EAEf,IAAMC,OAAwB,GAAG;IAC7BC,IAAI,EAAE,QADuB;IAE7BC,OAAO,EAAEC,qCAFoB;IAG7BC,gBAAgB,EAAE,IAAIC,GAAJ,EAHW;IAI7BC,qBAJ6B,iCAKzBC,MALyB,EAMkB;MAC3C,IAAAC,wDAAA,EAAwCD,MAAxC,EAD2C,CAG3C;;MACAA,MAAM,GAAG,IAAAE,eAAA,EAAUF,MAAV,CAAT;MACAA,MAAM,CAACG,cAAP,GAAwBH,MAAM,CAACG,cAAP,GAAwB,GAAxB,GAA8BH,MAAM,CAACI,MAAP,CAAcC,OAApE;MAEA,IAAMC,WAAW,GAAGC,MAAM,CAACC,MAAP,CAChB,EADgB,EAEhBhB,QAFgB,EAGhBQ,MAAM,CAACS,OAHS,CAApB;MAOA,OAAO,IAAAC,oDAAA,EAA4B,IAA5B,EAAkCV,MAAlC,EAA0CM,WAA1C,CAAP;IACH;EArB4B,CAAjC;EAwBA,OAAOb,OAAP;AACH"}