{"version":3,"file":"index.js","names":["_isMyJsonValid","_interopRequireDefault","require","_pluginHelpers","getValidator","schema","validator","isMyJsonValid","docData","isValid","errors","wrappedValidateIsMyJsonValidStorage","exports","wrappedValidateStorageFactory"],"sources":["../../../../src/plugins/validate-is-my-json-valid/index.ts"],"sourcesContent":["/**\n * this plugin validates documents before they can be inserted into the RxCollection.\n * It's using is-my-json-valid as jsonschema-validator\n * @link https://github.com/mafintosh/is-my-json-valid\n */\nimport isMyJsonValid from 'is-my-json-valid';\nimport type {\n    RxJsonSchema\n} from '../../types';\nimport { wrappedValidateStorageFactory } from '../../plugin-helpers';\n\n\nexport function getValidator(\n    schema: RxJsonSchema<any>\n) {\n    const validator = isMyJsonValid(schema as any);\n    return (docData: any) => {\n        const isValid = validator(docData);\n        if (isValid) {\n            return [];\n        } else {\n            return validator.errors as any;\n        }\n    };\n}\n\nexport const wrappedValidateIsMyJsonValidStorage = wrappedValidateStorageFactory(\n    getValidator,\n    'is-my-json-valid'\n);\n"],"mappings":";;;;;;;;AAKA,IAAAA,cAAA,GAAAC,sBAAA,CAAAC,OAAA;AAIA,IAAAC,cAAA,GAAAD,OAAA;AATA;AACA;AACA;AACA;AACA;;AAQO,SAASE,YAAYA,CACxBC,MAAyB,EAC3B;EACE,IAAMC,SAAS,GAAG,IAAAC,sBAAa,EAACF,MAAa,CAAC;EAC9C,OAAQG,OAAY,IAAK;IACrB,IAAMC,OAAO,GAAGH,SAAS,CAACE,OAAO,CAAC;IAClC,IAAIC,OAAO,EAAE;MACT,OAAO,EAAE;IACb,CAAC,MAAM;MACH,OAAOH,SAAS,CAACI,MAAM;IAC3B;EACJ,CAAC;AACL;AAEO,IAAMC,mCAAmC,GAAAC,OAAA,CAAAD,mCAAA,GAAG,IAAAE,4CAA6B,EAC5ET,YAAY,EACZ,kBACJ,CAAC"}