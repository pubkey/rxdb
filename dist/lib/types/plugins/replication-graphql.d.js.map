{"version":3,"file":"replication-graphql.d.js","names":[],"sources":["../../../../src/types/plugins/replication-graphql.d.ts"],"sourcesContent":["import { RxReplicationWriteToMasterRow } from '../replication-protocol';\nimport { ById, MaybePromise } from '../util';\nimport { ReplicationOptions, ReplicationPullHandlerResult, ReplicationPullOptions, ReplicationPushOptions } from './replication';\n\nexport interface RxGraphQLReplicationQueryBuilderResponseObject {\n    query: string;\n    variables: any;\n}\n\nexport type RxGraphQLReplicationClientState = {\n    headers: ById<string>;\n    credentials: RequestCredentials | undefined;\n};\n\nexport type RxGraphQLReplicationQueryBuilderResponse =\n    RxGraphQLReplicationQueryBuilderResponseObject |\n    Promise<RxGraphQLReplicationQueryBuilderResponseObject>;\nexport type RxGraphQLReplicationPushQueryBuilder = (\n    // typed 'any' because the data might be modified by the push.modifier.\n    rows: RxReplicationWriteToMasterRow<any>[]\n) => RxGraphQLReplicationQueryBuilderResponse;\n\n\nexport type RxGraphQLReplicationPullQueryBuilder<CheckpointType> = (\n    latestPulledCheckpoint: CheckpointType | null,\n    limit: number\n) => RxGraphQLReplicationQueryBuilderResponse;\nexport type GraphQLSyncPullOptions<RxDocType, CheckpointType> = Omit<\nReplicationPullOptions<RxDocType, CheckpointType>,\n'handler' | 'stream$'\n> & {\n    queryBuilder: RxGraphQLReplicationPullQueryBuilder<CheckpointType>;\n    streamQueryBuilder?: RxGraphQLReplicationPullStreamQueryBuilder;\n    dataPath?: string;\n    responseModifier?: RxGraphQLPullResponseModifier<RxDocType, CheckpointType>;\n};\n\nexport type RxGraphQLPullResponseModifier<RxDocType, CheckpointType> = (\n    // the exact response that was returned from the server\n    plainResponse: ReplicationPullHandlerResult<RxDocType, CheckpointType> | any,\n    // either 'handler' if it came from the pull.handler, or 'stream' if it came from the pull.stream\n    origin: 'handler' | 'stream',\n    requestCheckpoint?: CheckpointType\n) => MaybePromise<ReplicationPullHandlerResult<RxDocType, CheckpointType>>;\n\nexport type RxGraphQLReplicationPullStreamQueryBuilder = (headers: { [k: string]: string; }) => RxGraphQLReplicationQueryBuilderResponse;\n\nexport type GraphQLSyncPushOptions<RxDocType> = Omit<\nReplicationPushOptions<RxDocType>,\n'handler'\n> & {\n    queryBuilder: RxGraphQLReplicationPushQueryBuilder;\n};\n\nexport type GraphQLServerUrl = {\n    http?: string;\n    ws?: string;\n};\n\nexport type SyncOptionsGraphQL<RxDocType, CheckpointType> = Omit<\nReplicationOptions<RxDocType, CheckpointType>,\n'pull' | 'push' | 'replicationIdentifier'\n> & {\n    url: GraphQLServerUrl;\n    headers?: { [k: string]: string; }; // send with all requests to the endpoint\n    credentials?: RequestCredentials;\n    pull?: GraphQLSyncPullOptions<RxDocType, CheckpointType>;\n    push?: GraphQLSyncPushOptions<RxDocType>;\n};\n"],"mappings":""}