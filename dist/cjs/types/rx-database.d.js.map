{"version":3,"file":"rx-database.d.js","names":[],"sources":["../../../src/types/rx-database.d.ts"],"sourcesContent":["import type {\n    RxCollection,\n    RxDumpCollection,\n    RxDumpCollectionAsAny\n} from './rx-collection.d.ts';\nimport type {\n    RxDatabaseBase\n} from '../rx-database.d.ts';\nimport { Observable } from 'rxjs';\nimport type { RxStorage } from './rx-storage.interface.d.ts';\nimport type { RxLocalDocument } from './plugins/local-documents.d.ts';\nimport type { RxCleanupPolicy } from './plugins/cleanup.d.ts';\nimport type { ById, HashFunction } from './util.d.ts';\nimport type { RxReactivityFactory } from './plugins/reactivity.d.ts';\n\nexport interface RxDatabaseCreator<Internals = any, InstanceCreationOptions = any, Reactivity = unknown> {\n    storage: RxStorage<Internals, InstanceCreationOptions>;\n    instanceCreationOptions?: InstanceCreationOptions;\n    name: string;\n    password?: string | any;\n    multiInstance?: boolean;\n    eventReduce?: boolean;\n    ignoreDuplicate?: boolean;\n    options?: any;\n    cleanupPolicy?: Partial<RxCleanupPolicy>;\n    closeDuplicates?: boolean;\n    /**\n     * Set this to true if you want to store local documents\n     * in the RxDatabase instance.\n     */\n    localDocuments?: boolean;\n\n    /**\n     * Hash method used to hash strings and json-stringified objects.\n     * This hash does not have to be cryptographically secure,\n     * but it is very important that is does have not create\n     * collisions.\n     * Default is the sha256 from crypto.subtle.digest('SHA-256', data)\n     */\n    hashFunction?: HashFunction;\n\n    /**\n     * By default, count() queries in 'slow' mode are not allowed.\n     */\n    allowSlowCount?: boolean;\n\n    /**\n     * Can be used to add a custom reactivity Factory\n     * that is used on all getters and values that end with the double $$.\n     * For example you can use the signals api of your framework and vuejs ref()\n     */\n    reactivity?: RxReactivityFactory<Reactivity>;\n}\n\nexport type CollectionsOfDatabase = ById<RxCollection>;\nexport type RxDatabase<\n    Collections = CollectionsOfDatabase,\n    Internals = any,\n    InstanceCreationOptions = any,\n    Reactivity = any\n> = RxDatabaseBase<\n    Internals,\n    InstanceCreationOptions,\n    Collections,\n    Reactivity\n> & Collections & RxDatabaseGenerated<Collections, Reactivity>;\n\n\nexport interface RxLocalDocumentMutation<StorageType, Reactivity = unknown> {\n    insertLocal<LocalDocType = any>(id: string, data: LocalDocType): Promise<\n        RxLocalDocument<StorageType, LocalDocType, Reactivity>\n    >;\n    upsertLocal<LocalDocType = any>(id: string, data: LocalDocType): Promise<\n        RxLocalDocument<StorageType, LocalDocType, Reactivity>\n    >;\n    getLocal<LocalDocType = any>(id: string): Promise<\n        RxLocalDocument<StorageType, LocalDocType, Reactivity> | null\n    >;\n    getLocal$<LocalDocType = any>(id: string): Observable<\n        RxLocalDocument<StorageType, LocalDocType, Reactivity> | null\n    >;\n}\n\nexport interface RxDatabaseGenerated<Collections, Reactivity> extends RxLocalDocumentMutation<RxDatabase<Collections, any, any, Reactivity>> { }\n\n/**\n * Extract the **DocumentType** of a collection.\n */\ntype ExtractDTcol<P> = P extends RxCollection<infer T> ? T : { [prop: string]: any; };\n\ninterface RxDumpDatabaseBase {\n    instanceToken: string;\n    name: string;\n    passwordHash: string | null;\n}\nexport interface RxDumpDatabase<Col> extends RxDumpDatabaseBase {\n    collections: RxDumpCollection<ExtractDTcol<Col[keyof Col]>>[];\n}\n/**\n * All base properties are typed as any because they can be encrypted.\n */\nexport interface RxDumpDatabaseAny<Col> extends RxDumpDatabaseBase {\n    collections: RxDumpCollection<RxDumpCollectionAsAny<ExtractDTcol<Col[keyof Col]>>>[];\n}\n"],"mappings":"","ignoreList":[]}