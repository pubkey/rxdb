{"version":3,"file":"vector-distance.js","names":["euclideanDistance","A","B","Math","sqrt","reduce","sum","a","i","pow","manhattanDistance","abs","cosineSimilarity","dotProduct","magnitudeA","magnitudeB","b","jaccardSimilarity","setA","Set","setB","intersection","filter","x","has","size","union"],"sources":["../../../../src/plugins/vector/vector-distance.ts"],"sourcesContent":["import type { Vector } from './types';\n\n/**\n * Vector comparison methods\n * @link https://www.restack.io/p/vector-database-knowledge-answer-javascript-cat-ai\n * @returns \n */\nexport function euclideanDistance(A: Vector, B: Vector): number {\n    return Math.sqrt(A.reduce((sum, a, i) => sum + Math.pow(a - B[i], 2), 0));\n}\nexport function manhattanDistance(A: Vector, B: Vector) {\n    return A.reduce((sum, a, i) => sum + Math.abs(a - B[i]), 0);\n}\n\n\nexport function cosineSimilarity(A: Vector, B: Vector): number {\n    const dotProduct = A.reduce((sum, a, i) => sum + a * B[i], 0);\n    const magnitudeA = Math.sqrt(A.reduce((sum, a) => sum + a * a, 0));\n    const magnitudeB = Math.sqrt(B.reduce((sum, b) => sum + b * b, 0));\n    return dotProduct / (magnitudeA * magnitudeB);\n}\n\n\n/**\n * @link https://github.com/vector5ai/vector5db/blob/main/src/metrics/JaccardSimilarity.ts\n */\nexport function jaccardSimilarity(a: number[], b: number[]): number {\n    const setA = new Set(a);\n    const setB = new Set(b);\n    const intersection = new Set([...setA].filter((x) => setB.has(x))).size;\n    const union = new Set([...setA, ...setB]).size;\n\n    return 1 - (intersection / union);\n}\n"],"mappings":";;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASA,iBAAiBA,CAACC,CAAS,EAAEC,CAAS,EAAU;EAC5D,OAAOC,IAAI,CAACC,IAAI,CAACH,CAAC,CAACI,MAAM,CAAC,CAACC,GAAG,EAAEC,CAAC,EAAEC,CAAC,KAAKF,GAAG,GAAGH,IAAI,CAACM,GAAG,CAACF,CAAC,GAAGL,CAAC,CAACM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC7E;AACO,SAASE,iBAAiBA,CAACT,CAAS,EAAEC,CAAS,EAAE;EACpD,OAAOD,CAAC,CAACI,MAAM,CAAC,CAACC,GAAG,EAAEC,CAAC,EAAEC,CAAC,KAAKF,GAAG,GAAGH,IAAI,CAACQ,GAAG,CAACJ,CAAC,GAAGL,CAAC,CAACM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AAC/D;AAGO,SAASI,gBAAgBA,CAACX,CAAS,EAAEC,CAAS,EAAU;EAC3D,IAAMW,UAAU,GAAGZ,CAAC,CAACI,MAAM,CAAC,CAACC,GAAG,EAAEC,CAAC,EAAEC,CAAC,KAAKF,GAAG,GAAGC,CAAC,GAAGL,CAAC,CAACM,CAAC,CAAC,EAAE,CAAC,CAAC;EAC7D,IAAMM,UAAU,GAAGX,IAAI,CAACC,IAAI,CAACH,CAAC,CAACI,MAAM,CAAC,CAACC,GAAG,EAAEC,CAAC,KAAKD,GAAG,GAAGC,CAAC,GAAGA,CAAC,EAAE,CAAC,CAAC,CAAC;EAClE,IAAMQ,UAAU,GAAGZ,IAAI,CAACC,IAAI,CAACF,CAAC,CAACG,MAAM,CAAC,CAACC,GAAG,EAAEU,CAAC,KAAKV,GAAG,GAAGU,CAAC,GAAGA,CAAC,EAAE,CAAC,CAAC,CAAC;EAClE,OAAOH,UAAU,IAAIC,UAAU,GAAGC,UAAU,CAAC;AACjD;;AAGA;AACA;AACA;AACO,SAASE,iBAAiBA,CAACV,CAAW,EAAES,CAAW,EAAU;EAChE,IAAME,IAAI,GAAG,IAAIC,GAAG,CAACZ,CAAC,CAAC;EACvB,IAAMa,IAAI,GAAG,IAAID,GAAG,CAACH,CAAC,CAAC;EACvB,IAAMK,YAAY,GAAG,IAAIF,GAAG,CAAC,CAAC,GAAGD,IAAI,CAAC,CAACI,MAAM,CAAEC,CAAC,IAAKH,IAAI,CAACI,GAAG,CAACD,CAAC,CAAC,CAAC,CAAC,CAACE,IAAI;EACvE,IAAMC,KAAK,GAAG,IAAIP,GAAG,CAAC,CAAC,GAAGD,IAAI,EAAE,GAAGE,IAAI,CAAC,CAAC,CAACK,IAAI;EAE9C,OAAO,CAAC,GAAIJ,YAAY,GAAGK,KAAM;AACrC","ignoreList":[]}