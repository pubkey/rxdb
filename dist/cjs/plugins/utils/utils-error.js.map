{"version":3,"file":"utils-error.js","names":["_utilsString","require","pluginMissing","pluginKey","keyParts","split","pluginName","forEach","part","ucfirst","Error","errorToPlainJson","err","ret","name","message","rxdb","parameters","extensions","code","url","stack","undefined","replace"],"sources":["../../../../src/plugins/utils/utils-error.ts"],"sourcesContent":["import type {\n    PlainJsonError,\n    RxError,\n    RxTypeError\n} from '../../types/index.d.ts';\nimport { ucfirst } from './utils-string.ts';\n\n\n\n/**\n * Returns an error that indicates that a plugin is missing\n * We do not throw a RxError because this should not be handled\n * programmatically but by using the correct import\n */\nexport function pluginMissing(\n    pluginKey: string\n): Error {\n    const keyParts = pluginKey.split('-');\n    let pluginName = 'RxDB';\n    keyParts.forEach(part => {\n        pluginName += ucfirst(part);\n    });\n    pluginName += 'Plugin';\n    return new Error(\n        `You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { ${pluginName} } from 'rxdb/plugins/${pluginKey}';\n            addRxPlugin(${pluginName});\n        `\n    );\n}\n\n\n\nexport function errorToPlainJson(err: Error | TypeError | RxError | RxTypeError): PlainJsonError {\n    const ret: PlainJsonError = {\n        name: err.name,\n        message: err.message,\n        rxdb: (err as any).rxdb,\n        parameters: (err as RxError).parameters,\n        extensions: (err as any).extensions,\n        code: (err as RxError).code,\n        url: (err as RxError).url,\n        /**\n         * stack must be last to make it easier to read the json in a console.\n         * Also we ensure that each linebreak is spaced so that the chrome devtools\n         * shows urls to the source code that can be clicked to inspect\n         * the correct place in the code.\n         */\n        stack: !err.stack ? undefined : err.stack.replace(/\\n/g, ' \\n ')\n    };\n    return ret;\n}\n"],"mappings":";;;;;;;AAKA,IAAAA,YAAA,GAAAC,OAAA;AAIA;AACA;AACA;AACA;AACA;AACO,SAASC,aAAaA,CACzBC,SAAiB,EACZ;EACL,IAAMC,QAAQ,GAAGD,SAAS,CAACE,KAAK,CAAC,GAAG,CAAC;EACrC,IAAIC,UAAU,GAAG,MAAM;EACvBF,QAAQ,CAACG,OAAO,CAACC,IAAI,IAAI;IACrBF,UAAU,IAAI,IAAAG,oBAAO,EAACD,IAAI,CAAC;EAC/B,CAAC,CAAC;EACFF,UAAU,IAAI,QAAQ;EACtB,OAAO,IAAII,KAAK,iLAGGJ,UAAU,8BAAyBH,SAAS,oCACzCG,UAAU,iBAEhC,CAAC;AACL;AAIO,SAASK,gBAAgBA,CAACC,GAA8C,EAAkB;EAC7F,IAAMC,GAAmB,GAAG;IACxBC,IAAI,EAAEF,GAAG,CAACE,IAAI;IACdC,OAAO,EAAEH,GAAG,CAACG,OAAO;IACpBC,IAAI,EAAGJ,GAAG,CAASI,IAAI;IACvBC,UAAU,EAAGL,GAAG,CAAaK,UAAU;IACvCC,UAAU,EAAGN,GAAG,CAASM,UAAU;IACnCC,IAAI,EAAGP,GAAG,CAAaO,IAAI;IAC3BC,GAAG,EAAGR,GAAG,CAAaQ,GAAG;IACzB;AACR;AACA;AACA;AACA;AACA;IACQC,KAAK,EAAE,CAACT,GAAG,CAACS,KAAK,GAAGC,SAAS,GAAGV,GAAG,CAACS,KAAK,CAACE,OAAO,CAAC,KAAK,EAAE,MAAM;EACnE,CAAC;EACD,OAAOV,GAAG;AACd","ignoreList":[]}