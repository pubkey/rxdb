"use strict";(globalThis.webpackChunkrxdb=globalThis.webpackChunkrxdb||[]).push([[7853],{383(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"releases/17.0.0","title":"RxDB 17.0.0","description":"RxDB 17 introduces improved reactivity APIs, better debugging, breaking storage fixes, and multiple plugins graduating from beta.","source":"@site/docs/releases/17.0.0.md","sourceDirName":"releases","slug":"/releases/17.0.0.html","permalink":"/releases/17.0.0.html","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"RxDB 17.0.0","slug":"17.0.0.html","description":"RxDB 17 introduces improved reactivity APIs, better debugging, breaking storage fixes, and multiple plugins graduating from beta."},"sidebar":"tutorialSidebar","previous":{"title":"LocalStorage vs. IndexedDB vs. Cookies vs. OPFS vs. WASM-SQLite","permalink":"/articles/localstorage-indexeddb-cookies-opfs-sqlite-wasm.html"},"next":{"title":"16.0.0","permalink":"/releases/16.0.0.html"}}');var s=i(4848),t=i(8453);const l={title:"RxDB 17.0.0",slug:"17.0.0.html",description:"RxDB 17 introduces improved reactivity APIs, better debugging, breaking storage fixes, and multiple plugins graduating from beta."},o="RxDB 17.0.0 (beta)",d={},a=[{value:"Migration",id:"migration",level:2},{value:"Storage migration required",id:"storage-migration-required",level:3},{value:"Other migration notes",id:"other-migration-notes",level:3},{value:"CHANGES",id:"changes",level:2},{value:"\ud83d\udd01 Reactivity &amp; APIs",id:"-reactivity--apis",level:3},{value:"\ud83e\udde0 Debugging &amp; Developer Experience",id:"-debugging--developer-experience",level:3},{value:"\ud83d\uddc4\ufe0f Storage &amp; Replication Fixes",id:"\ufe0f-storage--replication-fixes",level:3},{value:"\ud83d\udcd0 Schema &amp; Index Validation",id:"-schema--index-validation",level:3},{value:"\u2699\ufe0f Performance &amp; Internal Changes",id:"\ufe0f-performance--internal-changes",level:3},{value:"\ud83d\udd0c Plugins Graduating from Beta",id:"-plugins-graduating-from-beta",level:3},{value:"You can help!",id:"you-can-help",level:2},{value:"LinkedIn",id:"linkedin",level:2}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"rxdb-1700-beta",children:"RxDB 17.0.0 (beta)"})}),"\n",(0,s.jsxs)(n.p,{children:["RxDB 17 focuses on ",(0,s.jsx)(n.strong,{children:"better reactivity"}),", ",(0,s.jsx)(n.strong,{children:"improved debugging"}),", and ",(0,s.jsx)(n.strong,{children:"important storage fixes"}),", while also graduating several long-standing plugins out of beta."]}),"\n",(0,s.jsxs)(n.p,{children:["Most applications can upgrade easily, but ",(0,s.jsx)(n.strong,{children:"users of OPFS and filesystem-based storages must review the migration notes carefully"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["RxDB version 17 is currently in ",(0,s.jsx)(n.strong,{children:"beta"}),". For testing, please install the latest beta version ",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/rxdb?activeTab=versions",children:"from npm"})," and provide feedback or report issues ",(0,s.jsx)(n.a,{href:"https://github.com/pubkey/rxdb/issues/7574",children:"on GitHub"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"migration",children:"Migration"}),"\n",(0,s.jsx)(n.p,{children:"RxDB 17 is mostly backward-compatible, but please review the following points before upgrading:"}),"\n",(0,s.jsx)(n.h3,{id:"storage-migration-required",children:"Storage migration required"}),"\n",(0,s.jsxs)(n.p,{children:["If you use any of the following storages, ",(0,s.jsx)(n.strong,{children:"you must migrate your data"})," using the ",(0,s.jsx)(n.a,{href:"/migration-storage.html",children:"storage migrator"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"OPFS RxStorage"}),"\n",(0,s.jsx)(n.li,{children:"Filesystem RxStorage (Node)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"For all other RxStorages, data created with RxDB v16 can be reused directly in RxDB v17."}),"\n",(0,s.jsx)(n.h3,{id:"other-migration-notes",children:"Other migration notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The GitHub repository ",(0,s.jsxs)(n.strong,{children:["no longer contains prebuilt ",(0,s.jsx)(n.code,{children:"dist"})," files"]}),".",(0,s.jsx)(n.br,{}),"\n","Install RxDB from npm or run the build scripts locally."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"toggleOnDocumentVisible"})," now defaults to ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"true"})}),". ",(0,s.jsx)(n.a,{href:"https://github.com/pubkey/rxdb/issues/6810",children:"#6810"})]}),"\n",(0,s.jsxs)(n.li,{children:["Schema fields marked as ",(0,s.jsx)(n.code,{children:"final"})," ",(0,s.jsxs)(n.strong,{children:["no longer need to be explicitly listed as ",(0,s.jsx)(n.code,{children:"required"})]}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Some integrations now use ",(0,s.jsx)(n.strong,{children:"optional peer dependencies"}),". You may need to install them manually:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"firebase"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"mongodb"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"nats"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"changes",children:"CHANGES"}),"\n",(0,s.jsx)(n.h3,{id:"-reactivity--apis",children:"\ud83d\udd01 Reactivity & APIs"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ADD"})," ",(0,s.jsx)(n.code,{children:"RxDatabase.collections$"})," observable for reactive access to collections"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ADD"})," support for the JavaScript ",(0,s.jsx)(n.code,{children:"using"})," keyword to automatically remove databases in tests"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ADD"})," new ",(0,s.jsx)(n.code,{children:"reactivity-angular"})," package"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"CHANGE"})," moved ",(0,s.jsx)(n.code,{children:"reactivity-vue"})," and ",(0,s.jsx)(n.code,{children:"reactivity-preact-signals"})," from premium to core"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FIX"})," query results becoming incorrect when changes occur faster than query update ",(0,s.jsx)(n.a,{href:"https://github.com/pubkey/rxdb/issues/7067",children:"#7067"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-debugging--developer-experience",children:"\ud83e\udde0 Debugging & Developer Experience"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ADD"})," ",(0,s.jsx)(n.code,{children:"context"})," field to all RxDB write errors for easier debugging"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ADD"})," improved OPFS RxStorage error logging in ",(0,s.jsx)(n.code,{children:"devMode"}),", including:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["strict ",(0,s.jsx)(n.code,{children:"TextDecoder"})," mode"]}),"\n",(0,s.jsx)(n.li,{children:"detailed decoding error output"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ADD"})," internal ",(0,s.jsx)(n.code,{children:"WeakRef"})," TypeScript types so users no longer need to enable ",(0,s.jsx)(n.code,{children:"ES2021.WeakRef"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ADD"})," ",(0,s.jsx)(n.a,{href:"https://rxdb.info/llms.txt",children:"llms.txt"})," for LLM-friendly documentation access"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"CHANGE"})," ",(0,s.jsx)(n.code,{children:"toggleOnDocumentVisible"})," now defaults to ",(0,s.jsx)(n.code,{children:"true"})," ",(0,s.jsx)(n.a,{href:"https://github.com/pubkey/rxdb/issues/6810",children:"#6810"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\ufe0f-storage--replication-fixes",children:"\ud83d\uddc4\ufe0f Storage & Replication Fixes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FIX"})," OPFS RxStorage memory and cleanup leaks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FIX"})," memory-mapped storage not purging deleted documents"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FIX"})," ",(0,s.jsx)(n.code,{children:"RxCollection.cleanup()"})," ignoring ",(0,s.jsx)(n.code,{children:"minimumDeletedTime"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FIX"})," short primary key lengths not matching replication schema ",(0,s.jsx)(n.a,{href:"https://github.com/pubkey/rxdb/issues/7587",children:"#7587"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FIX"})," retry DenoKV commits when encountering ",(0,s.jsx)(n.code,{children:'"database is locked"'})," errors"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FIX"})," close broadcast channels and leader election ",(0,s.jsx)(n.strong,{children:"after"})," database shutdown, not during"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-schema--index-validation",children:"\ud83d\udcd0 Schema & Index Validation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ADD"})," enforce maximum length for indexes and primary keys (",(0,s.jsx)(n.code,{children:"maxLength: 2048"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"CHANGE"})," ",(0,s.jsx)(n.code,{children:"final"})," schema fields no longer need to be marked as ",(0,s.jsx)(n.code,{children:"required"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\ufe0f-performance--internal-changes",children:"\u2699\ufe0f Performance & Internal Changes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"CHANGE"})," replace ",(0,s.jsx)(n.code,{children:"appendToArray()"})," with ",(0,s.jsx)(n.code,{children:"Array.concat()"})," for better browser-level optimizations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ADD"})," ensure indexes and primary keys are validated consistently across replication schemas"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-plugins-graduating-from-beta",children:"\ud83d\udd0c Plugins Graduating from Beta"}),"\n",(0,s.jsxs)(n.p,{children:["The following plugins are ",(0,s.jsx)(n.strong,{children:"no longer in beta"})," and are now considered production-ready:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Replication Appwrite"}),"\n",(0,s.jsx)(n.li,{children:"Replication Supabase"}),"\n",(0,s.jsx)(n.li,{children:"Replication MongoDB"}),"\n",(0,s.jsx)(n.li,{children:"RxStorage MongoDB"}),"\n",(0,s.jsx)(n.li,{children:"RxStorage Filesystem (Node)"}),"\n",(0,s.jsx)(n.li,{children:"RxStorage DenoKV"}),"\n",(0,s.jsx)(n.li,{children:"Attachment replication"}),"\n",(0,s.jsx)(n.li,{children:"CRDT Plugin"}),"\n",(0,s.jsx)(n.li,{children:"RxPipeline"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"you-can-help",children:"You can help!"}),"\n",(0,s.jsxs)(n.p,{children:["There are many things that can be done by ",(0,s.jsx)(n.strong,{children:"you"})," to improve RxDB:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Check the ",(0,s.jsx)(n.a,{href:"https://github.com/pubkey/rxdb/blob/master/orga/BACKLOG.md",children:"BACKLOG"})," for features that would be great to have."]}),"\n",(0,s.jsxs)(n.li,{children:["Check the ",(0,s.jsx)(n.a,{href:"https://github.com/pubkey/rxdb/blob/master/orga/before-next-major.md",children:"breaking backlog"})," for breaking changes that must be implemented in the future but where I did not have the time yet."]}),"\n",(0,s.jsxs)(n.li,{children:["Check the ",(0,s.jsx)(n.a,{href:"https://github.com/pubkey/rxdb/search?q=todo",children:"todos"})," in the code. There are many small improvements that can be done for performance and build size."]}),"\n",(0,s.jsx)(n.li,{children:"Review the code and add tests. I am only a single human with a laptop. My code is not perfect and much small improvements can be done when people review the code and help me to clarify undefined behaviors."}),"\n",(0,s.jsxs)(n.li,{children:["Update the ",(0,s.jsx)(n.a,{href:"https://github.com/pubkey/rxdb/tree/master/examples",children:"example projects"})," some of them are outdated and need updates."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"linkedin",children:"LinkedIn"}),"\n",(0,s.jsxs)(n.p,{children:["Stay connected with the latest updates and network with professionals in the RxDB community by following RxDB's ",(0,s.jsx)(n.a,{href:"https://www.linkedin.com/company/rxdb",children:"official LinkedIn page"}),"!"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>o});var r=i(6540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);