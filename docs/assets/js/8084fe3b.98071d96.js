"use strict";(globalThis.webpackChunkrxdb=globalThis.webpackChunkrxdb||[]).push([[9515],{731:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"articles/vue-indexeddb","title":"IndexedDB Database in Vue Apps - The Power of RxDB","description":"Learn how RxDB simplifies IndexedDB in Vue, offering reactive queries, offline-first capabilities, encryption, compression, and effortless integration.","source":"@site/docs/articles/vue-indexeddb.md","sourceDirName":"articles","slug":"/articles/vue-indexeddb.html","permalink":"/articles/vue-indexeddb.html","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"IndexedDB Database in Vue Apps - The Power of RxDB","slug":"vue-indexeddb.html","description":"Learn how RxDB simplifies IndexedDB in Vue, offering reactive queries, offline-first capabilities, encryption, compression, and effortless integration."},"sidebar":"tutorialSidebar","previous":{"title":"RxDB as a Database in a Vue.js Application","permalink":"/articles/vue-database.html"},"next":{"title":"RxDB as a Database in a jQuery Application","permalink":"/articles/jquery-database.html"}}');var r=i(4848),a=i(8453);const t={title:"IndexedDB Database in Vue Apps - The Power of RxDB",slug:"vue-indexeddb.html",description:"Learn how RxDB simplifies IndexedDB in Vue, offering reactive queries, offline-first capabilities, encryption, compression, and effortless integration."},o="IndexedDB Database in Vue Apps - The Power of RxDB",l={},d=[{value:"What is IndexedDB?",id:"what-is-indexeddb",level:2},{value:"Why Use IndexedDB in Vue",id:"why-use-indexeddb-in-vue",level:2},{value:"Why To Not Use Plain IndexedDB",id:"why-to-not-use-plain-indexeddb",level:2},{value:"Set up RxDB in Vue",id:"set-up-rxdb-in-vue",level:2},{value:"Installing RxDB",id:"installing-rxdb",level:3},{value:"Create a Database and Collections",id:"create-a-database-and-collections",level:3},{value:"CRUD Operations",id:"crud-operations",level:3},{value:"Reactive Queries and Live Updates",id:"reactive-queries-and-live-updates",level:2},{value:"Using RxJS Observables with Vue 3 Composition API",id:"using-rxjs-observables-with-vue-3-composition-api",level:3},{value:"Using Vue Signals",id:"using-vue-signals",level:3},{value:"Vue IndexedDB Example with RxDB",id:"vue-indexeddb-example-with-rxdb",level:2},{value:"Advanced RxDB Features",id:"advanced-rxdb-features",level:2},{value:"Limitations of IndexedDB",id:"limitations-of-indexeddb",level:2},{value:"Alternatives to IndexedDB",id:"alternatives-to-indexeddb",level:2},{value:"Performance Comparison with Other Browser Storages",id:"performance-comparison-with-other-browser-storages",level:2},{value:"Follow Up",id:"follow-up",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"indexeddb-database-in-vue-apps---the-power-of-rxdb",children:"IndexedDB Database in Vue Apps - The Power of RxDB"})}),"\n",(0,r.jsxs)(n.p,{children:["Building robust, ",(0,r.jsx)(n.a,{href:"/offline-first.html",children:"offline-capable"})," Vue applications often involves leveraging browser storage solutions to manage data. IndexedDB is one such powerful tool, but its raw API can be challenging to work with directly. RxDB abstracts away much of IndexedDB's complexity, providing a more developer-friendly experience. In this article, we'll explore what IndexedDB is, why it's beneficial in Vue applications, the challenges of using plain IndexedDB, and how ",(0,r.jsx)(n.a,{href:"https://rxdb.info/",children:"RxDB"})," can simplify your development process while adding advanced features."]}),"\n",(0,r.jsx)(n.h2,{id:"what-is-indexeddb",children:"What is IndexedDB?"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API",children:"IndexedDB"})," is a low-level API for storing significant amounts of structured data in the browser. It provides a transactional database system that can store key-value pairs, complex objects, and more. This storage engine is asynchronous and supports advanced data types, making it suitable for offline storage and complex web applications."]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)("img",{src:"/files/icons/vuejs.svg",alt:"Vue IndexedDB",width:"120"})}),"\n",(0,r.jsx)(n.h2,{id:"why-use-indexeddb-in-vue",children:"Why Use IndexedDB in Vue"}),"\n",(0,r.jsx)(n.p,{children:"When building Vue applications, IndexedDB can play a crucial role in enhancing both performance and user experience. Here are some reasons to consider using IndexedDB:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Offline-First / Local-First"}),": By storing data locally, your application remains functional even without an internet connection."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),": Using local data means ",(0,r.jsx)(n.a,{href:"/articles/zero-latency-local-first.html",children:"zero latency"})," and no loading spinners, as data doesn't need to be fetched over a network."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Easier Implementation"}),": Replicating all data to the client once is often simpler than implementing multiple endpoints for each user interaction."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scalability"}),": Local data reduces server load because queries run on the client side, decreasing server bandwidth and processing requirements."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"why-to-not-use-plain-indexeddb",children:"Why To Not Use Plain IndexedDB"}),"\n",(0,r.jsx)(n.p,{children:"While IndexedDB itself is powerful, its native API comes with several drawbacks for everyday application developers:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Callback-Based API"}),": IndexedDB was originally designed around callbacks rather than modern Promises, making asynchronous code more cumbersome."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Complexity"}),": IndexedDB is low-level, intended for library developers rather than for app developers who just want to store and query data easily."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Basic Query API"}),": Its rudimentary query capabilities limit how you can efficiently perform complex queries. Libraries like RxDB offer more advanced querying and indexing."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"TypeScript Support"}),": Ensuring good ",(0,r.jsx)(n.a,{href:"/tutorials/typescript.html",children:"TypeScript support"})," with IndexedDB is challenging, especially when trying to maintain schema consistency."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lack of Observable API"}),": IndexedDB doesn't provide an observable API out of the box, making it hard to automatically update your Vue app in real time. RxDB solves this by enabling you to ",(0,r.jsx)(n.a,{href:"/rx-query.html#observe",children:"observe queries"})," or specific documents."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-Tab Communication"}),": Managing cross-tab updates in plain IndexedDB is difficult. RxDB handles this seamlessly - changes in one tab automatically affect observed data in others."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Missing Advanced Features"}),": Features like ",(0,r.jsx)(n.a,{href:"/encryption.html",children:"encryption"})," or ",(0,r.jsx)(n.a,{href:"/key-compression.html",children:"compression"})," aren't built into IndexedDB, but they are available via RxDB."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Limited Platform Support"}),": IndexedDB is browser-only. RxDB offers ",(0,r.jsx)(n.a,{href:"/rx-storage.html",children:"swappable storages"})," so you can reuse the same data layer code in mobile or desktop environments."]}),"\n"]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)("a",{href:"https://rxdb.info/",children:(0,r.jsx)("img",{src:"../files/logo/rxdb_javascript_database.svg",alt:"JavaScript Database",width:"220"})})}),"\n",(0,r.jsx)(n.h2,{id:"set-up-rxdb-in-vue",children:"Set up RxDB in Vue"}),"\n",(0,r.jsx)(n.p,{children:"Setting up RxDB with Vue is straightforward. It abstracts IndexedDB complexities and adds a layer of powerful features over it."}),"\n",(0,r.jsx)(n.h3,{id:"installing-rxdb",children:"Installing RxDB"}),"\n",(0,r.jsx)(n.p,{children:"First, install RxDB (and RxJS) from npm:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install rxdb rxjs --save\n"})}),"\n",(0,r.jsx)(n.h3,{id:"create-a-database-and-collections",children:"Create a Database and Collections"}),"\n",(0,r.jsx)(n.p,{children:"RxDB provides two main storage options:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The free ",(0,r.jsx)(n.a,{href:"/rx-storage-localstorage.html",children:"LocalStorage-based storage"})]}),"\n",(0,r.jsxs)(n.li,{children:["The premium plain ",(0,r.jsx)(n.a,{href:"/rx-storage-indexeddb.html",children:"IndexedDB-based storage"}),", offering faster ",(0,r.jsx)(n.a,{href:"/rx-storage-performance.html",children:"performance"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Below is an example of setting up a simple RxDB database using the localstorage-based storage in a Vue app:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// db.ts\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nexport async function initDB() {\n  const db = await createRxDatabase({\n    name: 'heroesdb',         // the name of the database\n    storage: getRxStorageLocalstorage()\n  });\n\n  // Define your schema\n  const heroSchema = {\n    title: 'hero schema',\n    version: 0,\n    description: 'Describes a hero in your app',\n    primaryKey: 'id',\n    type: 'object',\n    properties: {\n      id: {\n        type: 'string',\n        maxLength: 100\n      },\n      name: {\n        type: 'string'\n      },\n      power: {\n        type: 'string'\n      }\n    },\n    required: ['id', 'name']\n  };\n\n  // add collections\n  await db.addCollections({\n    heroes: {\n      schema: heroSchema\n    }\n  });\n\n  return db;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"crud-operations",children:"CRUD Operations"}),"\n",(0,r.jsx)(n.p,{children:"Once your database is initialized, you can perform all CRUD operations:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// insert\nawait db.heroes.insert({ id: '1', name: 'Iron Man', power: 'Genius-level intellect' });\n\n// bulk insert\nawait db.heroes.bulkInsert([\n  { id: '2', name: 'Thor', power: 'God of Thunder' },\n  { id: '3', name: 'Hulk', power: 'Superhuman Strength' }\n]);\n\n// find and findOne\nconst heroes = await db.heroes.find().exec();\nconst ironMan = await db.heroes.findOne({ selector: { name: 'Iron Man' } }).exec();\n\n// update\nconst doc = await db.heroes.findOne({ selector: { name: 'Hulk' } }).exec();\nawait doc.update({ $set: { power: 'Unlimited Strength' } });\n\n// delete\nconst thorDoc = await db.heroes.findOne({ selector: { name: 'Thor' } }).exec();\nawait thorDoc.remove();\n"})}),"\n",(0,r.jsx)(n.h2,{id:"reactive-queries-and-live-updates",children:"Reactive Queries and Live Updates"}),"\n",(0,r.jsxs)(n.p,{children:["RxDB excels in providing reactive data capabilities, ideal for ",(0,r.jsx)(n.a,{href:"/articles/realtime-database.html",children:"real-time applications"}),". Subscribing to queries automatically updates your Vue components when underlying data changes - even across ",(0,r.jsx)(n.a,{href:"/articles/browser-database.html",children:"browser"})," tabs."]}),"\n",(0,r.jsx)("p",{align:"center",children:(0,r.jsx)("img",{src:"../files/animations/realtime.gif",alt:"realtime ui updates",width:"700"})}),"\n",(0,r.jsx)(n.h3,{id:"using-rxjs-observables-with-vue-3-composition-api",children:"Using RxJS Observables with Vue 3 Composition API"}),"\n",(0,r.jsx)(n.p,{children:"Here's an example of a Vue component that subscribes to live data updates:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<template>\n  <div>\n    <h2>Hero List</h2>\n    <ul>\n      <li v-for="hero in heroes" :key="hero.id">\n        <strong>{{ hero.name }}</strong> - {{ hero.power }}\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { ref, onMounted } from \'vue\';\nimport { initDB } from \'@/db\';\n\nconst heroes = ref<any[]>([]);\n\nonMounted(async () => {\n  const db = await initDB();\n  // create an observable query\n  const query = db.heroes.find();\n\n  // subscribe to the query\n  query.$.subscribe((newHeroes: any[]) => {\n    heroes.value = newHeroes;\n  });\n});\n<\/script>\n'})}),"\n",(0,r.jsxs)(n.p,{children:["This component subscribes to the collection's changes, ",(0,r.jsx)(n.a,{href:"/articles/optimistic-ui.html",children:"updating the UI"})," automatically whenever the underlying data changes in any browser tab."]}),"\n",(0,r.jsx)(n.h3,{id:"using-vue-signals",children:"Using Vue Signals"}),"\n",(0,r.jsxs)(n.p,{children:["If you're exploring Vue's reactivity transforms or signals, RxDB also offers ",(0,r.jsx)(n.a,{href:"/reactivity.html",children:"custom reactivity factories"})," (",(0,r.jsx)(n.a,{href:"/premium/",children:"premium plugins"})," are required). This allows queries to emit data as signals instead of traditional Observables."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const heroesSignal = db.heroes.find().$$; // $$ indicates a reactive result\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"With this, in your Vue template or script, you can directly read from heroesSignal()"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<template>\n  <div>\n    <h2>Hero List</h2>\n    <ul>\n      \x3c!-- we read heroesSignal.value which is always up to date --\x3e\n      <li v-for="hero in heroesSignal.value" :key="hero.id">\n        <strong>{{ hero.name }}</strong> - {{ hero.power }}\n      </li>\n    </ul>\n  </div>\n</template>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"vue-indexeddb-example-with-rxdb",children:"Vue IndexedDB Example with RxDB"}),"\n",(0,r.jsxs)(n.p,{children:["A comprehensive example of using RxDB within a Vue application can be found in the ",(0,r.jsx)(n.a,{href:"https://github.com/pubkey/rxdb/tree/master/examples/vue",children:"RxDB GitHub repository"}),". This repository contains sample applications, showcasing best practices and demonstrating how to integrate RxDB for various use cases."]}),"\n",(0,r.jsx)(n.h2,{id:"advanced-rxdb-features",children:"Advanced RxDB Features"}),"\n",(0,r.jsx)(n.p,{children:"RxDB offers many advanced features that extend beyond basic data storage:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/replication.html",children:"RxDB Replication"}),": Synchronize local data with remote databases seamlessly."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/migration-schema.html",children:"Data Migration"}),": Handle schema changes gracefully with automatic data migrations."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/encryption.html",children:"Encryption"}),": Secure your data with built-in encryption capabilities."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/key-compression.html",children:"Compression"}),": Optimize storage using key compression."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"limitations-of-indexeddb",children:"Limitations of IndexedDB"}),"\n",(0,r.jsx)(n.p,{children:"While IndexedDB is powerful, it has some inherent limitations:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Performance: IndexedDB can be slow under certain conditions. Read more: ",(0,r.jsx)(n.a,{href:"/slow-indexeddb.html",children:"Slow IndexedDB"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/articles/indexeddb-max-storage-limit.html",children:"Storage Limits"}),": Browsers impose limits on how much data can be stored. See: ",(0,r.jsx)(n.a,{href:"/articles/localstorage-indexeddb-cookies-opfs-sqlite-wasm.html#storage-size-limits",children:"Browser storage limits"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"alternatives-to-indexeddb",children:"Alternatives to IndexedDB"}),"\n",(0,r.jsxs)(n.p,{children:["Depending on your application's requirements, there are ",(0,r.jsx)(n.a,{href:"/rx-storage.html",children:"alternative storage solutions"})," to consider:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Origin Private File System (OPFS)"}),": A newer API that can offer better performance. RxDB supports OPFS as well. More info: ",(0,r.jsx)(n.a,{href:"/rx-storage-opfs.html",children:"RxDB OPFS Storage"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SQLite"}),": Ideal for hybrid frameworks or Capacitor, offering native performance. Explore: ",(0,r.jsx)(n.a,{href:"/rx-storage-sqlite.html",children:"RxDB SQLite Storage"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"performance-comparison-with-other-browser-storages",children:"Performance Comparison with Other Browser Storages"}),"\n",(0,r.jsx)(n.p,{children:"Here is a performance overview of the various browser-based storage implementations of RxDB:"}),"\n",(0,r.jsx)("p",{align:"center",children:(0,r.jsx)("img",{src:"../files/rx-storage-performance-browser.png",alt:"RxStorage performance - browser",width:"700"})}),"\n",(0,r.jsx)(n.h2,{id:"follow-up",children:"Follow Up"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Learn how to use RxDB with the ",(0,r.jsx)(n.a,{href:"/quickstart.html",children:"RxDB Quickstart"})," for a guided introduction."]}),"\n",(0,r.jsxs)(n.li,{children:["Check out the ",(0,r.jsx)(n.a,{href:"/code/",children:"RxDB GitHub repository"})," and leave a star \u2b50 if you find it useful."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["By leveraging RxDB on top of IndexedDB, you can create highly responsive, offline-capable Vue applications without dealing with the low-level complexities of IndexedDB directly. With ",(0,r.jsx)(n.a,{href:"/rx-query.html",children:"reactive queries"}),", seamless cross-tab communication, and powerful advanced features, RxDB becomes an invaluable tool in modern web development."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var s=i(6540);const r={},a=s.createContext(r);function t(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);