"use strict";(globalThis.webpackChunkrxdb=globalThis.webpackChunkrxdb||[]).push([[8897],{8053:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"articles/react-native-encryption","title":"React Native Encryption and Encrypted Database/Storage","description":"Secure your React Native app with RxDB encryption. Learn why it matters, how to implement encrypted databases, and best practices to protect user data.","source":"@site/docs/articles/react-native-encryption.md","sourceDirName":"articles","slug":"/articles/react-native-encryption.html","permalink":"/articles/react-native-encryption.html","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"React Native Encryption and Encrypted Database/Storage","slug":"react-native-encryption.html","description":"Secure your React Native app with RxDB encryption. Learn why it matters, how to implement encrypted databases, and best practices to protect user data."},"sidebar":"tutorialSidebar","previous":{"title":"What is a Local Database and Why RxDB is the Best Local Database for JavaScript Applications","permalink":"/articles/local-database.html"},"next":{"title":"RxDB as a Database in a Vue.js Application","permalink":"/articles/vue-database.html"}}');var a=n(4848),i=n(8453);const s={title:"React Native Encryption and Encrypted Database/Storage",slug:"react-native-encryption.html",description:"Secure your React Native app with RxDB encryption. Learn why it matters, how to implement encrypted databases, and best practices to protect user data."},c="React Native Encryption and Encrypted Database/Storage",o={},d=[{value:"\ud83d\udd12 Why Encryption Matters",id:"-why-encryption-matters",level:2},{value:"React Native Encryption Overview",id:"react-native-encryption-overview",level:2},{value:"Setting Up Encryption in RxDB for React Native",id:"setting-up-encryption-in-rxdb-for-react-native",level:2},{value:"1. Install RxDB and Required Plugins",id:"1-install-rxdb-and-required-plugins",level:3},{value:"2. Set Up Your RxDB Database with Encryption",id:"2-set-up-your-rxdb-database-with-encryption",level:3},{value:"3. Inserting and Querying Encrypted Data",id:"3-inserting-and-querying-encrypted-data",level:3},{value:"Best Practices for React Native Encryption",id:"best-practices-for-react-native-encryption",level:2},{value:"Follow Up",id:"follow-up",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"react-native-encryption-and-encrypted-databasestorage",children:"React Native Encryption and Encrypted Database/Storage"})}),"\n",(0,a.jsx)(t.p,{children:"Data security is a critical concern in modern mobile applications. As React Native continues to grow in popularity for building cross-platform apps, ensuring that your data is protected is paramount. RxDB, a real-time database for JavaScript applications, offers powerful encryption features that can help you secure your React Native app's data."}),"\n",(0,a.jsxs)(t.p,{children:["This article explains why encryption is important, how to set it up with RxDB in ",(0,a.jsx)(t.a,{href:"/react-native-database.html",children:"React Native"}),", and best practices to keep your app secure."]}),"\n",(0,a.jsx)(t.h2,{id:"-why-encryption-matters",children:"\ud83d\udd12 Why Encryption Matters"}),"\n",(0,a.jsxs)(t.p,{children:["Encryption ensures that, even if an unauthorized party obtains physical access to your device or intercepts data, they cannot read the information without the encryption key. Sensitive user data such as credentials, personal information, or financial details should always be encrypted. Proper encryption practices reduce the risk of data breaches and help your application remain compliant with regulations like ",(0,a.jsx)(t.a,{href:"https://gdpr.eu/",children:"GDPR"})," or ",(0,a.jsx)(t.a,{href:"https://www.hhs.gov/hipaa/index.html",children:"HIPAA"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"react-native-encryption-overview",children:"React Native Encryption Overview"}),"\n",(0,a.jsx)(t.p,{children:"React Native supports multiple ways to secure local data:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Encrypted Databases"}),"\nUse databases with built-in encryption capabilities, such as SQLite with encryption layers or RxDB with its ",(0,a.jsx)(t.a,{href:"/encryption.html",children:"encryption plugin"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Secure Storage Libraries"}),"\nFor key-value data (like tokens or secrets), you can use libraries like ",(0,a.jsx)(t.a,{href:"https://github.com/oblador/react-native-keychain",children:"react-native-keychain"})," or ",(0,a.jsx)(t.a,{href:"https://github.com/emeraldsanto/react-native-encrypted-storage",children:"react-native-encrypted-storage"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Custom Encryption"}),"\nIf you need more fine-grained control, you can integrate libraries like ",(0,a.jsx)(t.a,{href:"https://github.com/brix/crypto-js",children:(0,a.jsx)(t.code,{children:"crypto-js"})})," or the ",(0,a.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API",children:"Web Crypto API"})," to encrypt data before storing it in a database or file."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)("center",{children:(0,a.jsx)("a",{href:"https://rxdb.info/",children:(0,a.jsx)("img",{src:"/files/logo/rxdb_javascript_database.svg",alt:"RxDB",width:"250"})})}),"\n",(0,a.jsx)(t.h2,{id:"setting-up-encryption-in-rxdb-for-react-native",children:"Setting Up Encryption in RxDB for React Native"}),"\n",(0,a.jsx)(t.h3,{id:"1-install-rxdb-and-required-plugins",children:"1. Install RxDB and Required Plugins"}),"\n",(0,a.jsx)(t.p,{children:"Install RxDB and the encryption plugin(s) you need. For the CryptoJS plugin:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"npm install rxdb\nnpm install crypto-js\n"})}),"\n",(0,a.jsx)(t.h3,{id:"2-set-up-your-rxdb-database-with-encryption",children:"2. Set Up Your RxDB Database with Encryption"}),"\n",(0,a.jsxs)(t.p,{children:["RxDB offers two ",(0,a.jsx)(t.a,{href:"/encryption.html",children:"encryption plugins"}),":"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"CryptoJS Plugin"}),": A free and straightforward solution for most basic use cases."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Web Crypto Plugin"}),": A ",(0,a.jsx)(t.a,{href:"/premium",children:"premium plugin"})," that utilizes the native Web Crypto API for better performance and security."]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["Below is an example showing how to set up RxDB using the CryptoJS plugin. This example uses the ",(0,a.jsx)(t.a,{href:"/rx-storage-memory.html",children:"in-memory storage"})," for testing purposes. In a real production scenario, you would use a persistent storage adapter, mostly the ",(0,a.jsx)(t.a,{href:"/rx-storage-sqlite.html",children:"SQLite-based storage"}),"."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"import { createRxDatabase } from 'rxdb';\nimport { wrappedKeyEncryptionCryptoJsStorage } from 'rxdb/plugins/encryption-crypto-js';\n\n/*\n * For testing, we use the in-memory storage of RxDB.\n * In production you would use the persistent SQLite based storage instead.\n */\nimport { getRxStorageMemory } from 'rxdb/plugins/storage-memory';\n\nasync function initEncryptedDatabase() {\n    // Wrap the normal storage with the encryption plugin\n    const encryptedMemoryStorage = wrappedKeyEncryptionCryptoJsStorage({\n        storage: getRxStorageMemory()\n    });\n\n    // Create an encrypted database\n    const db = await createRxDatabase({\n        name: 'myEncryptedDatabase',\n        storage: encryptedMemoryStorage,\n        password: 'sudoLetMeIn' // Make sure not to hardcode in production\n    });\n\n    // Define a schema and create a collection\n    await db.addCollections({\n        secureData: {\n            schema: {\n                title: 'secure data schema',\n                version: 0,\n                type: 'object',\n                primaryKey: 'id',\n                properties: {\n                    id: {\n                        type: 'string',\n                        maxLength: 100\n                    },\n                    normalField: {\n                        type: 'string'\n                    },\n                    secretField: {\n                        type: 'string'\n                    }\n                },\n                required: ['id', 'normalField', 'secretField']\n            }\n        }\n    });\n\n    return db;\n}\n"})}),"\n",(0,a.jsx)(t.h3,{id:"3-inserting-and-querying-encrypted-data",children:"3. Inserting and Querying Encrypted Data"}),"\n",(0,a.jsx)(t.p,{children:"Once you've set up the database with encryption, data in fields specified by your schema will be encrypted automatically before it is stored, and decrypted when queried."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"(async () => {\n    const db = await initEncryptedDatabase();\n\n    // Insert encrypted data\n    const doc = await db.secureData.insert({\n        id: 'mySecretId',\n        normalField: 'foobar',\n        secretField: 'This is top secret data'\n    });\n\n    // Query encrypted data by its primary key or non-encrypted fields\n    const fetchedDoc = await db.secureData.findOne({\n        selector: {\n            normalField: 'foobar'\n        }\n    }).exec(true);\n    console.log(fetchedDoc.secretField); // 'This is top secret data'\n\n    // Update data\n    await fetchedDoc.patch({\n        secretField: 'Updated secret data'\n    });\n})();\n"})}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Note"}),": You can only query directly by non-encrypted fields or primary keys. Encrypted fields cannot be used in queries because they are stored as ciphertext in the database. A common approach is to have a small subset of fields that need to be queried unencrypted while storing any sensitive data in encrypted fields."]}),"\n",(0,a.jsx)(t.h2,{id:"best-practices-for-react-native-encryption",children:"Best Practices for React Native Encryption"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Secure Password Handling"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Avoid hardcoding passwords or encryption keys."}),"\n",(0,a.jsx)(t.li,{children:"Use secure storage solutions like React Native Keychain or react-native-encrypted-storage to fetch the database password at runtime:"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"// Example: using react-native-keychain to securely retrieve a stored password\nimport * as Keychain from 'react-native-keychain';\n\nasync function getDatabasePassword() {\n    const credentials = await Keychain.getGenericPassword();\n    if (credentials) {\n        return credentials.password;\n    }\n    throw new Error('No password stored in Keychain');\n}\n"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Encrypt Attachments"}),":\nIf you need to store files (images, text files, etc.), consider encrypting attachments. RxDB supports attachments that can be encrypted automatically, ensuring your files are protected:"]}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:"import { createBlob } from 'rxdb/plugins/core';\nconst doc = await await db.secureData.findOne({\n    selector: {\n        normalField: 'foobar'\n    }\n}).exec(true);\nconst attachment = await doc.putAttachment({\n    id: 'encryptedFile.txt',\n    data: createBlob('Sensitive content', 'text/plain'),\n    type: 'text/plain',\n});\n"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Optimize Performance"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"If performance is critical, consider using the premium Web Crypto plugin, which leverages native APIs for faster encryption and decryption."}),"\n",(0,a.jsx)(t.li,{children:"If big chunks of data are encrypted, store them in attachments instead of document fields. Attachments will only be decrypted on explicit fetches, not during queries."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Use DevMode in Development"}),": RxDB's ",(0,a.jsx)(t.a,{href:"/dev-mode.html",children:"DevMode Plugin"})," can help validate your schema and encryption setup during development. Disable it in production for performance reasons."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Secure Communication"}),":"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Use HTTPS to secure network communication between the app and any backend services."}),"\n",(0,a.jsxs)(t.li,{children:["If you're synchronizing data to a server, ensure the data is also encrypted in transit. RxDB's ",(0,a.jsx)(t.a,{href:"/replication.html",children:"replication plugins"})," can work with secure endpoints to keep data consistent."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"SSL Pinning"}),": Consider SSL Pinning if you want to prevent man-in-the-middle attacks. SSL Pinning ensures the device trusts only the pinned certificate, preventing attackers from swapping out valid certificates with their own."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"follow-up",children:"Follow Up"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["Learn how to use RxDB with the ",(0,a.jsx)(t.a,{href:"/quickstart.html",children:"RxDB Quickstart"})," for a guided introduction."]}),"\n",(0,a.jsxs)(t.li,{children:["A good way to learn using RxDB database with React Native is to check out the ",(0,a.jsx)(t.a,{href:"https://github.com/pubkey/rxdb/tree/master/examples/react-native",children:"RxDB React Native example"})," and use that as a tutorial."]}),"\n",(0,a.jsxs)(t.li,{children:["Check out the ",(0,a.jsx)(t.a,{href:"https://github.com/pubkey/rxdb",children:"RxDB GitHub repository"})," and leave a star \u2b50 if you find it useful."]}),"\n",(0,a.jsxs)(t.li,{children:["Learn more about the ",(0,a.jsx)(t.a,{href:"/encryption.html",children:"RxDB encryption plugins"}),"."]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"By following these best practices and leveraging RxDB's powerful encryption plugins, you can build secure, performant, and robust React Native applications that keep your users' data safe."})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>c});var r=n(6540);const a={},i=r.createContext(a);function s(e){const t=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);