"use strict";(self.webpackChunkrxdb=self.webpackChunkrxdb||[]).push([[4583],{574:(e,t,r)=>{r.d(t,{Tj:()=>Jr,C3:()=>Ur,IA:()=>Zr});var a=r(7329);function n(e,t){var r=e.get(t);if(void 0===r)throw new Error("missing value from map "+t);return r}function s(e,t,r,a){var n=e.get(t);return void 0===n?(n=r(),e.set(t,n)):a&&a(n),n}function i(e){return Object.assign({},e)}function o(e,t){if(void 0===t&&(t=!1),!e)return e;if(!t&&Array.isArray(e))return e.sort(((e,t)=>"string"==typeof e&&"string"==typeof t?e.localeCompare(t):"object"==typeof e?1:-1)).map((e=>o(e,t)));if("object"==typeof e&&!Array.isArray(e)){var r={};return Object.keys(e).sort(((e,t)=>e.localeCompare(t))).forEach((a=>{r[a]=o(e[a],t)})),r}return e}var c=function e(t){if(!t)return t;if(null===t||"object"!=typeof t)return t;if(Array.isArray(t)){for(var r=new Array(t.length),a=r.length;a--;)r[a]=e(t[a]);return r}var n={};for(var s in t)n[s]=e(t[s]);return n};function l(e,t,r){return Object.defineProperty(e,t,{get:function(){return r}}),r}var d=e=>{var t=typeof e;return null!==e&&("object"===t||"function"===t)},u=new Set(["__proto__","prototype","constructor"]),h=new Set("0123456789");function m(e){var t=[],r="",a="start",n=!1;for(var s of e)switch(s){case"\\":if("index"===a)throw new Error("Invalid character in an index");if("indexEnd"===a)throw new Error("Invalid character after an index");n&&(r+=s),a="property",n=!n;break;case".":if("index"===a)throw new Error("Invalid character in an index");if("indexEnd"===a){a="property";break}if(n){n=!1,r+=s;break}if(u.has(r))return[];t.push(r),r="",a="property";break;case"[":if("index"===a)throw new Error("Invalid character in an index");if("indexEnd"===a){a="index";break}if(n){n=!1,r+=s;break}if("property"===a){if(u.has(r))return[];t.push(r),r=""}a="index";break;case"]":if("index"===a){t.push(Number.parseInt(r,10)),r="",a="indexEnd";break}if("indexEnd"===a)throw new Error("Invalid character after an index");default:if("index"===a&&!h.has(s))throw new Error("Invalid character in an index");if("indexEnd"===a)throw new Error("Invalid character after an index");"start"===a&&(a="property"),n&&(n=!1,r+="\\"),r+=s}switch(n&&(r+="\\"),a){case"property":if(u.has(r))return[];t.push(r);break;case"index":throw new Error("Index was not closed");case"start":t.push("")}return t}function p(e,t){if("number"!=typeof t&&Array.isArray(e)){var r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return!1}function f(e,t){if(p(e,t))throw new Error("Cannot use string index")}function v(e,t,r){if(Array.isArray(t)&&(t=t.join(".")),!t.includes(".")&&!t.includes("["))return e[t];if(!d(e)||"string"!=typeof t)return void 0===r?e:r;var a=m(t);if(0===a.length)return r;for(var n=0;n<a.length;n++){var s=a[n];if(null==(e=p(e,s)?n===a.length-1?void 0:null:e[s])){if(n!==a.length-1)return r;break}}return void 0===e?r:e}function g(e,t,r){if(Array.isArray(t)&&(t=t.join(".")),!d(e)||"string"!=typeof t)return e;for(var a=e,n=m(t),s=0;s<n.length;s++){var i=n[s];f(e,i),s===n.length-1?e[i]=r:d(e[i])||(e[i]="number"==typeof n[s+1]?[]:{}),e=e[i]}return a}var y=r(7810),b=r(3836),x=r(1449),w=r(6343),j={isDevMode:()=>!1,deepFreezeWhenDevMode:e=>e,tunnelErrorMessage:e=>"RxDB Error-Code "+e+".\n        Error messages are not included in RxDB core to reduce build size.\n        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html\n        - or search for the error code here: https://github.com/pubkey/rxdb/search?q="+e+"\n        "};function k(e,t,r){return"RxError ("+t+"):\n"+e+"\n"+function(e){var t="";return 0===Object.keys(e).length?t:(t+="Given parameters: {\n",t+=Object.keys(e).map((t=>{var r="[object Object]";try{r="errors"===t?e[t].map((e=>JSON.stringify(e,Object.getOwnPropertyNames(e)))):JSON.stringify(e[t],(function(e,t){return void 0===t?null:t}),2)}catch(a){}return t+":"+r})).join("\n"),t+="}")}(r)}var _=function(e){function t(t,r,a){var n;void 0===a&&(a={});var s=k(r,t,a);return(n=e.call(this,s)||this).code=t,n.message=s,n.parameters=a,n.rxdb=!0,n}return(0,x.A)(t,e),t.prototype.toString=function(){return this.message},(0,b.A)(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}((0,w.A)(Error)),D=function(e){function t(t,r,a){var n;void 0===a&&(a={});var s=k(r,t,a);return(n=e.call(this,s)||this).code=t,n.message=s,n.parameters=a,n.rxdb=!0,n}return(0,x.A)(t,e),t.prototype.toString=function(){return this.message},(0,b.A)(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}((0,w.A)(TypeError));function N(e,t){return new _(e,j.tunnelErrorMessage(e),t)}function R(e,t){return new D(e,j.tunnelErrorMessage(e),t)}function E(e){return!(!e||409!==e.status)&&e}var I={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};var C=/\./g,S="abcdefghijklmnopqrstuvwxyz";function O(e){void 0===e&&(e=10);for(var t="",r=0;r<e;r++)t+=S.charAt(Math.floor(Math.random()*S.length));return t}function P(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function T(e){for(;"."===e.charAt(0);)e=e.substr(1);for(;"."===e.slice(-1);)e=e.slice(0,-1);return e}var $=1;function A(){return{lwt:$}}function B(e,t){var r=t;return v(e,r=T(r="properties."+(r=r.replace(C,".properties."))))}function M(e){return"string"==typeof e?e:e.key}function L(e,t){if("string"==typeof e.primaryKey)return t[e.primaryKey];var r=e.primaryKey;return r.fields.map((e=>{var r=v(t,e);if(void 0===r)throw N("DOC18",{args:{field:e,documentData:t}});return r})).join(r.separator)}function q(e){var t=M((e=i(e)).primaryKey);e.properties=i(e.properties),e.additionalProperties=!1,Object.prototype.hasOwnProperty.call(e,"keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes?e.indexes.slice(0):[],e.required=e.required?e.required.slice(0):[],e.encrypted=e.encrypted?e.encrypted.slice(0):[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.properties._meta=W,e.required=e.required?e.required.slice(0):[],e.required.push("_deleted"),e.required.push("_rev"),e.required.push("_meta"),e.required.push("_attachments");var r=F(e);(0,y.Hb)(e.required,r),e.required=e.required.filter((e=>!e.includes("."))).filter(((e,t,r)=>r.indexOf(e)===t)),e.version=e.version||0;var a=e.indexes.map((e=>{var r=(0,y.k_)(e)?e.slice(0):[e];return r.includes(t)||r.push(t),"_deleted"!==r[0]&&r.unshift("_deleted"),r}));0===a.length&&a.push(function(e){return["_deleted",e]}(t)),a.push(["_meta.lwt",t]),e.internalIndexes&&e.internalIndexes.map((e=>{a.push(e)}));var n=new Set;return a.filter((e=>{var t=e.join(",");return!n.has(t)&&(n.add(t),!0)})),e.indexes=a,e}var W={type:"object",properties:{lwt:{type:"number",minimum:$,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function F(e){var t=Object.keys(e.properties).filter((t=>e.properties[t].final)),r=M(e.primaryKey);return t.push(r),"string"!=typeof e.primaryKey&&e.primaryKey.fields.forEach((e=>t.push(e))),t}var Q="docs",H="changes",z="attachments",K="dexie",Z=new Map,U=new Map;var J="__";function V(e){var t=e.split(".");if(t.length>1)return t.map((e=>V(e))).join(".");if(e.startsWith("|")){var r=e.substring(1);return J+r}return e}function G(e){var t=e.split(".");return t.length>1?t.map((e=>G(e))).join("."):e.startsWith(J)?"|"+e.substring(J.length):e}function Y(e,t){return t?(t=ee(t=i(t)),e.forEach((e=>{var r=v(t,e);g(t,e,r?"1":"0")})),t):t}function X(e,t){return t?(t=te(t=i(t)),e.forEach((e=>{var r=v(t,e);g(t,e,"1"===r)})),t):t}function ee(e){if(!e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return e;if(Array.isArray(e))return e.map((e=>ee(e)));if("object"==typeof e){var t={};return Object.entries(e).forEach((e=>{let[r,a]=e;"object"==typeof a&&(a=ee(a)),t[V(r)]=a})),t}}function te(e){if(!e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return e;if(Array.isArray(e))return e.map((e=>te(e)));if("object"==typeof e){var t={};return Object.entries(e).forEach((r=>{let[a,n]=r;("object"==typeof n||Array.isArray(e))&&(n=te(n)),t[G(a)]=n})),t}}function re(e){var t=[],r=M(e.primaryKey);t.push([r]),t.push(["_deleted",r]),e.indexes&&e.indexes.forEach((e=>{var r=(0,y.$r)(e);t.push(r)})),t.push(["_meta.lwt",r]),t.push(["_meta.lwt"]);var a=(t=t.map((e=>e.map((e=>V(e)))))).map((e=>1===e.length?e[0]:"["+e.join("+")+"]"));return(a=a.filter(((e,t,r)=>r.indexOf(e)===t))).join(", ")}async function ae(e,t){var r=await e;return(await r.dexieTable.bulkGet(t)).map((e=>X(r.booleanIndexes,e)))}function ne(e,t){return e+"||"+t}function se(e){var t=new Set,r=[];return e.indexes?(e.indexes.forEach((a=>{(0,y.$r)(a).forEach((a=>{t.has(a)||(t.add(a),"boolean"===B(e,a).type&&r.push(a))}))})),r.push("_deleted"),(0,y.jw)(r)):r}var ie=r(9092),oe=r(5734),ce={},le=r(1007);var de="undefined"!=typeof crypto&&void 0!==crypto.subtle&&"function"==typeof crypto.subtle.digest?async function(e){var t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t);return Array.prototype.map.call(new Uint8Array(r),(e=>("00"+e.toString(16)).slice(-2))).join("")}:function(e){return Promise.resolve((0,le.sc)(e))},ue=r(3337),he=String.fromCharCode(65535),me=Number.MIN_SAFE_INTEGER;function pe(e,t){var r=t.selector,a=e.indexes?e.indexes.slice(0):[];t.index&&(a=[t.index]);var n=!!t.sort.find((e=>"desc"===Object.values(e)[0])),s=new Set;Object.keys(r).forEach((t=>{var a=B(e,t);a&&"boolean"===a.type&&Object.prototype.hasOwnProperty.call(r[t],"$eq")&&s.add(t)}));var i,o=t.sort.map((e=>Object.keys(e)[0])).filter((e=>!s.has(e))).join(","),c=-1;if(a.forEach((e=>{var a=!0,l=!0,d=e.map((e=>{var t=r[e],n=t?Object.keys(t):[],s={};t&&n.length?n.forEach((e=>{if(fe.has(e)){var r=function(e,t){switch(e){case"$eq":return{startKey:t,endKey:t,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:t,inclusiveEnd:!0};case"$gte":return{startKey:t,inclusiveStart:!0};case"$lt":return{endKey:t,inclusiveEnd:!1};case"$gt":return{startKey:t,inclusiveStart:!1};default:throw new Error("SNH")}}(e,t[e]);s=Object.assign(s,r)}})):s={startKey:l?me:he,endKey:a?he:me,inclusiveStart:!0,inclusiveEnd:!0};return void 0===s.startKey&&(s.startKey=me),void 0===s.endKey&&(s.endKey=he),void 0===s.inclusiveStart&&(s.inclusiveStart=!0),void 0===s.inclusiveEnd&&(s.inclusiveEnd=!0),l&&!s.inclusiveStart&&(l=!1),a&&!s.inclusiveEnd&&(a=!1),s})),u=d.map((e=>e.startKey)),h=d.map((e=>e.endKey)),m={index:e,startKeys:u,endKeys:h,inclusiveEnd:a,inclusiveStart:l,sortSatisfiedByIndex:!n&&o===e.filter((e=>!s.has(e))).join(","),selectorSatisfiedByIndex:ye(e,t.selector,u,h)},p=function(e,t,r){var a=0,n=e=>{e>0&&(a+=e)},s=10,i=(0,y.Sd)(r.startKeys,(e=>e!==me&&e!==he));n(i*s);var o=(0,y.Sd)(r.startKeys,(e=>e!==he&&e!==me));n(o*s);var c=(0,y.Sd)(r.startKeys,((e,t)=>e===r.endKeys[t]));n(c*s*1.5);var l=r.sortSatisfiedByIndex?5:0;return n(l),a}(0,0,m);(p>=c||t.index)&&(c=p,i=m)})),!i)throw N("SNH",{query:t});return i}var fe=new Set(["$eq","$gt","$gte","$lt","$lte"]),ve=new Set(["$eq","$gt","$gte"]),ge=new Set(["$eq","$lt","$lte"]);function ye(e,t,r,a){var n=Object.entries(t).find((t=>{let[r,a]=t;return!e.includes(r)||Object.entries(a).find((e=>{let[t,r]=e;return!fe.has(t)}))}));if(n)return!1;if(t.$and||t.$or)return!1;var s=[],i=new Set;for(var[o,c]of Object.entries(t)){if(!e.includes(o))return!1;var l=Object.keys(c).filter((e=>ve.has(e)));if(l.length>1)return!1;var d=l[0];if(d&&i.add(o),"$eq"!==d){if(s.length>0)return!1;s.push(d)}}var u=[],h=new Set;for(var[m,p]of Object.entries(t)){if(!e.includes(m))return!1;var f=Object.keys(p).filter((e=>ge.has(e)));if(f.length>1)return!1;var v=f[0];if(v&&h.add(m),"$eq"!==v){if(u.length>0)return!1;u.push(v)}}var g=0;for(var y of e){for(var b of[i,h]){if(!b.has(y)&&b.size>0)return!1;b.delete(y)}if(r[g]!==a[g]&&i.size>0&&h.size>0)return!1;g++}return!0}var be=r(744),xe=r(2779),we=r(1692),je=r(4903),ke=r(7705),_e=r(2403),De=r(6776),Ne=r(6950),Re=r(6823),Ee=!1;function Ie(e){return Ee||((0,xe.DZ)(xe.hu.PIPELINE,{$sort:je.xF,$project:je.C2}),(0,xe.DZ)(xe.hu.QUERY,{$and:ke.a6,$eq:_e.XV,$elemMatch:Ne.Jy,$exists:Re.P,$gt:_e.MR,$gte:_e.fy,$in:_e.oZ,$lt:_e.NV,$lte:_e.Q_,$ne:_e.C5,$nin:_e.GU,$mod:De.Pp,$nor:ke.q3,$not:ke.En,$or:ke.sU,$regex:De.WP,$size:Ne.Ig,$type:Re.T}),Ee=!0),new we.X(e)}function Ce(e,t){var r=M(e.primaryKey);t=i(t);var a=c(t);if("number"!=typeof a.skip&&(a.skip=0),a.selector?(a.selector=a.selector,Object.entries(a.selector).forEach((e=>{let[t,r]=e;"object"==typeof r&&null!==r||(a.selector[t]={$eq:r})}))):a.selector={},a.index){var n=(0,y.$r)(a.index);n.includes(r)||n.push(r),a.index=n}if(a.sort)a.sort.find((e=>{return t=e,Object.keys(t)[0]===r;var t}))||(a.sort=a.sort.slice(0),a.sort.push({[r]:"asc"}));else if(a.index)a.sort=a.index.map((e=>({[e]:"asc"})));else{if(e.indexes){var s=new Set;Object.entries(a.selector).forEach((e=>{let[t,r]=e;("object"!=typeof r||null===r||!!Object.keys(r).find((e=>fe.has(e))))&&s.add(t)}));var o,l=-1;e.indexes.forEach((e=>{var t=(0,y.k_)(e)?e:[e],r=t.findIndex((e=>!s.has(e)));r>0&&r>l&&(l=r,o=t)})),o&&(a.sort=o.map((e=>({[e]:"asc"}))))}a.sort||(a.sort=[{[r]:"asc"}])}return a}function Se(e,t){if(!t.sort)throw N("SNH",{query:t});var r=[];t.sort.forEach((e=>{var t,a,n,s=Object.keys(e)[0],i=Object.values(e)[0];r.push({key:s,direction:i,getValueFn:(t=s,a=t.split("."),n=a.length,1===n?e=>e[t]:e=>{for(var t=e,r=0;r<n;++r)if(void 0===(t=t[a[r]]))return t;return t})})}));return(e,t)=>{for(var a=0;a<r.length;++a){var n=r[a],s=n.getValueFn(e),i=n.getValueFn(t);if(s!==i)return"asc"===n.direction?(0,be.UD)(s,i):(0,be.UD)(i,s)}}}function Oe(e,t){if(!t.sort)throw N("SNH",{query:t});var r=Ie(t.selector);return e=>r.test(e)}async function Pe(e,t){var r=await e.exec();return r?Array.isArray(r)?Promise.all(r.map((e=>t(e)))):await t(r):null}function Te(e){return e===me?-1/0:e}function $e(e,t,r){return e.includes(t)?r===he||!0===r?"1":"0":r}function Ae(e,t,r){if(!r){if("undefined"==typeof window)throw new Error("IDBKeyRange missing");r=window.IDBKeyRange}var a=t.startKeys.map(((r,a)=>{var n=t.index[a];return $e(e,n,r)})).map(Te),n=t.endKeys.map(((r,a)=>{var n=t.index[a];return $e(e,n,r)})).map(Te);return r.bound(a,n,!t.inclusiveStart,!t.inclusiveEnd)}async function Be(e,t){var r=await e.internals,a=t.query,n=a.skip?a.skip:0,s=n+(a.limit?a.limit:1/0),i=t.queryPlan,o=!1;i.selectorSatisfiedByIndex||(o=Oe(e.schema,t.query));var c=Ae(r.booleanIndexes,i,r.dexieDb._options.IDBKeyRange),l=i.index,d=[];if(await r.dexieDb.transaction("r",r.dexieTable,(async e=>{var t,a=e.idbtrans.objectStore(Q);t="["+l.map((e=>V(e))).join("+")+"]";var n=a.index(t).openCursor(c);await new Promise((e=>{n.onsuccess=function(t){var a=t.target.result;if(a){var n=X(r.booleanIndexes,a.value);o&&!o(n)||d.push(n),i.sortSatisfiedByIndex&&d.length===s?e():a.continue()}else e()}}))})),!i.sortSatisfiedByIndex){var u=Se(e.schema,t.query);d=d.sort(u)}return{documents:d=d.slice(n,s)}}function Me(e){for(var t="",r=0;r<e.length;r++){var a=e[r];if("-"===a)return parseInt(t,10);t+=a}throw new Error("malformatted revision: "+e)}function Le(e,t){return(t?Me(t._rev)+1:1)+"-"+e}var qe={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function We(e,t){qe[e].length>0&&qe[e].forEach((e=>e(t)))}function Fe(e,t){return Promise.all(qe[e].map((e=>e(t))))}var Qe="_rxdb_internal";async function He(e,t){var r=(await e.findDocumentsById([t],!1))[0];return r||void 0}async function ze(e,t,r){var a=await e.bulkWrite([t],r);if(a.error.length>0)throw a.error[0];return a.success[0]}function Ke(e,t,r,a){if(a)throw 409===a.status?N("CONFLICT",{collection:e.name,id:t,writeError:a,data:r}):422===a.status?N("VD2",{collection:e.name,id:t,writeError:a,data:r}):a}function Ze(e){return{previous:e.previous,document:Ue(e.document)}}function Ue(e){if(!e._attachments||0===Object.keys(e._attachments).length)return e;var t=i(e);return t._attachments={},Object.entries(e._attachments).forEach((e=>{let[r,a]=e;var n,s,i;t._attachments[r]=(i=(n=a).data)?{length:(s=i,atob(s).length),digest:n.digest,type:n.type}:n})),t}function Je(e){return Object.assign({},e,{_meta:i(e._meta)})}function Ve(e,t,r){j.deepFreezeWhenDevMode(r);var a={originalStorageInstance:t,schema:t.schema,internals:t.internals,collectionName:t.collectionName,databaseName:t.databaseName,options:t.options,bulkWrite(r,a){for(var n=e.token,s=new Array(r.length),i=(0,oe.t)(),o=0;o<r.length;o++){var c=r[o],l=Je(c.document);l._meta.lwt=i;var d=c.previous;l._rev=Le(n,d),s[o]={document:l,previous:d}}return We("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:s}),e.lockedRun((()=>t.bulkWrite(s,a))).then((r=>{var n={error:[],success:r.success.slice(0)},s=0===r.error.length?[]:r.error.filter((e=>!(409!==e.status||e.writeRow.previous||e.writeRow.document._deleted||!(0,ue.ZN)(e.documentInDb)._deleted)||(n.error.push(e),!1)));if(s.length>0){var i=s.map((t=>({previous:t.documentInDb,document:Object.assign({},t.writeRow.document,{_rev:Le(e.token,t.documentInDb)})})));return e.lockedRun((()=>t.bulkWrite(i,a))).then((e=>((0,y.Hb)(n.error,e.error),(0,y.Hb)(n.success,e.success),n)))}return r}))},query:r=>e.lockedRun((()=>t.query(r))),count:r=>e.lockedRun((()=>t.count(r))),findDocumentsById:(r,a)=>e.lockedRun((()=>t.findDocumentsById(r,a))),getAttachmentData:(r,a,n)=>e.lockedRun((()=>t.getAttachmentData(r,a,n))),getChangedDocumentsSince:t.getChangedDocumentsSince?(r,a)=>e.lockedRun((()=>t.getChangedDocumentsSince((0,ue.ZN)(r),a))):void 0,cleanup:r=>e.lockedRun((()=>t.cleanup(r))),remove:()=>(e.storageInstances.delete(a),e.lockedRun((()=>t.remove()))),close:()=>(e.storageInstances.delete(a),e.lockedRun((()=>t.close()))),changeStream:()=>t.changeStream(),conflictResultionTasks:()=>t.conflictResultionTasks(),resolveConflictResultionTask(e){if(e.output.isEqual)return t.resolveConflictResultionTask(e);var r=i(Object.assign({},e.output.documentData,{_meta:A(),_rev:"",_attachments:{}}));return delete r._meta,delete r._rev,delete r._attachments,t.resolveConflictResultionTask({id:e.id,output:{isEqual:!1,documentData:r}})}};return e.storageInstances.add(a),a}var Ge=r(3561),Ye=r(703),Xe=new Map;function et(e,t){var r=Xe.get(e);if(r)return r.refs.delete(t),0===r.refs.size?(Xe.delete(e),r.bc.close()):void 0}function tt(e,t,r,a){if(t.multiInstance){var n=a||function(e,t,r,a){var n=Xe.get(t);return n||(n={bc:new Ye.X2(["RxDB:",e,r].join("|")),refs:new Set},Xe.set(t,n)),n.refs.add(a),n.bc}(e,t.databaseInstanceToken,r.databaseName,r),s=new ie.B,i=r=>{r.storageName===e&&r.databaseName===t.databaseName&&r.collectionName===t.collectionName&&r.version===t.schema.version&&s.next(r.eventBulk)};n.addEventListener("message",i);var o=r.changeStream(),c=!1,l=o.subscribe((r=>{c||n.postMessage({storageName:e,databaseName:t.databaseName,collectionName:t.collectionName,version:t.schema.version,eventBulk:r})}));r.changeStream=function(){return s.asObservable().pipe((0,Ge.X)(o))};var d=r.close.bind(r);r.close=async function(){return c=!0,l.unsubscribe(),n.removeEventListener("message",i),a||await et(t.databaseInstanceToken,r),d()};var u=r.remove.bind(r);r.remove=async function(){return c=!0,l.unsubscribe(),n.removeEventListener("message",i),a||await et(t.databaseInstanceToken,r),u()}}}var rt=(0,oe.t)(),at="dexieTestMetaField",nt=!1,st=function(){function e(e,t,r,a,n,s,i,o){this.changes$=new ie.B,this.instanceId=rt++,this.storage=e,this.databaseName=t,this.collectionName=r,this.schema=a,this.internals=n,this.options=s,this.settings=i,this.devMode=o,this.primaryPath=M(this.schema.primaryKey)}var t=e.prototype;return t.bulkWrite=async function(e,t){ot(this),nt||ce.premium&&"string"==typeof ce.premium&&"6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93"===await de(ce.premium)||console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join("\n")),nt=!0,e.forEach((e=>{if(!e.document._rev||e.previous&&!e.previous._rev)throw N("SNH",{args:{row:e}});if(this.devMode&&e.previous&&(!e.previous._meta[at]||e.previous._meta[at]!==e.previous._rev))throw console.dir(e),new Error("missing or wrong _meta."+at)}));var r=await this.internals,a={success:[],error:[]};this.devMode&&(e=e.map((e=>{var t=Je(e.document);return t._meta[at]=t._rev,{previous:e.previous,document:t}})));var n,s=e.map((e=>e.document[this.primaryPath]));if(await r.dexieDb.transaction("rw",r.dexieTable,r.dexieAttachmentsTable,(async()=>{var i=new Map;(await ae(this.internals,s)).forEach((e=>{var t=e;return t&&i.set(t[this.primaryPath],t),t})),n=function(e,t,r,a,n,s,i){for(var o,c=!!e.schema.attachments,l=[],d=[],u=[],h={id:O(10),events:[],checkpoint:null,context:n,startTime:(0,oe.t)(),endTime:0},m=h.events,p=[],f=[],v=[],g=r.size>0,y=a.length,b=function(){var e,n=a[x],h=n.document,y=n.previous,b=h[t],w=h._deleted,j=y&&y._deleted,k=void 0;if(g&&(k=r.get(b)),k){var _=k._rev;if(!y||y&&_!==y._rev){var D={isError:!0,status:409,documentId:b,writeRow:n,documentInDb:k};return u.push(D),1}var R=c?Ze(n):n;c&&(w?y&&Object.keys(y._attachments).forEach((e=>{f.push({documentId:b,attachmentId:e,digest:(0,ue.ZN)(y)._attachments[e].digest})})):(Object.entries(h._attachments).find((t=>{let[r,a]=t;return(y?y._attachments[r]:void 0)||a.data||(e={documentId:b,documentInDb:k,isError:!0,status:510,writeRow:n,attachmentId:r}),!0})),e||Object.entries(h._attachments).forEach((e=>{let[t,r]=e;var a=y?y._attachments[t]:void 0;if(a){var n=R.document._attachments[t].digest;r.data&&a.digest!==n&&v.push({documentId:b,attachmentId:t,attachmentData:r,digest:r.digest})}else p.push({documentId:b,attachmentId:t,attachmentData:r,digest:r.digest})})))),e?u.push(e):(c?(d.push(Ze(R)),i&&i(h)):(d.push(R),i&&i(h)),o=R);var E=null,I=null,C=null;if(j&&!w)C="INSERT",E=c?Ue(h):h;else if(!y||j||w){if(!w)throw N("SNH",{args:{writeRow:n}});C="DELETE",E=(0,ue.ZN)(h),I=y}else C="UPDATE",E=c?Ue(h):h,I=y;var S={documentId:b,documentData:E,previousDocumentData:I,operation:C};m.push(S)}else{var O=!!w;if(c&&Object.entries(h._attachments).forEach((t=>{let[r,a]=t;a.data?p.push({documentId:b,attachmentId:r,attachmentData:a,digest:a.digest}):(e={documentId:b,isError:!0,status:510,writeRow:n,attachmentId:r},u.push(e))})),e||(c?(l.push(Ze(n)),s&&s(h)):(l.push(n),s&&s(h)),o=n),!O){var P={documentId:b,operation:"INSERT",documentData:c?Ue(h):h,previousDocumentData:c&&y?Ue(y):y};m.push(P)}}},x=0;x<y;x++)b();return{bulkInsertDocs:l,bulkUpdateDocs:d,newestRow:o,errors:u,eventBulk:h,attachmentsAdd:p,attachmentsRemove:f,attachmentsUpdate:v}}(this,this.primaryPath,i,e,t),a.error=n.errors;var o=[];n.bulkInsertDocs.forEach((e=>{a.success.push(e.document),o.push(e.document)})),n.bulkUpdateDocs.forEach((e=>{a.success.push(e.document),o.push(e.document)})),(o=o.map((e=>Y(r.booleanIndexes,e)))).length>0&&await r.dexieTable.bulkPut(o);var c=[];n.attachmentsAdd.forEach((e=>{c.push({id:ne(e.documentId,e.attachmentId),data:e.attachmentData.data})})),n.attachmentsUpdate.forEach((e=>{c.push({id:ne(e.documentId,e.attachmentId),data:e.attachmentData.data})})),await r.dexieAttachmentsTable.bulkPut(c),await r.dexieAttachmentsTable.bulkDelete(n.attachmentsRemove.map((e=>ne(e.documentId,e.attachmentId))))})),(n=(0,ue.ZN)(n)).eventBulk.events.length>0){var i=(0,ue.ZN)(n.newestRow).document;n.eventBulk.checkpoint={id:i[this.primaryPath],lwt:i._meta.lwt},n.eventBulk.endTime=(0,oe.t)(),this.changes$.next(n.eventBulk)}return a},t.findDocumentsById=async function(e,t){ot(this);var r=await this.internals,a=[];return await r.dexieDb.transaction("r",r.dexieTable,(async()=>{(await ae(this.internals,e)).forEach((e=>{!e||e._deleted&&!t||a.push(e)}))})),a},t.query=function(e){return ot(this),Be(this,e)},t.count=async function(e){if(e.queryPlan.selectorSatisfiedByIndex){var t=await async function(e,t){var r=await e.internals,a=t.queryPlan,n=a.index,s=Ae(r.booleanIndexes,a,r.dexieDb._options.IDBKeyRange),i=-1;return await r.dexieDb.transaction("r",r.dexieTable,(async e=>{var t,r=e.idbtrans.objectStore(Q);t="["+n.map((e=>V(e))).join("+")+"]";var a=r.index(t).count(s);i=await new Promise(((e,t)=>{a.onsuccess=function(){e(a.result)},a.onerror=e=>t(e)}))})),i}(this,e);return{count:t,mode:"fast"}}return{count:(await Be(this,e)).documents.length,mode:"slow"}},t.changeStream=function(){return ot(this),this.changes$.asObservable()},t.cleanup=async function(e){ot(this);var t=await this.internals;return await t.dexieDb.transaction("rw",t.dexieTable,(async()=>{var r=(0,oe.t)()-e,a=await t.dexieTable.where("_meta.lwt").below(r).toArray(),n=[];a.forEach((e=>{"1"===e._deleted&&n.push(e[this.primaryPath])})),await t.dexieTable.bulkDelete(n)})),!0},t.getAttachmentData=async function(e,t,r){ot(this);var a=await this.internals,n=ne(e,t);return await a.dexieDb.transaction("r",a.dexieAttachmentsTable,(async()=>{var r=await a.dexieAttachmentsTable.get(n);if(r)return r.data;throw new Error("attachment missing documentId: "+e+" attachmentId: "+t)}))},t.remove=async function(){ot(this);var e=await this.internals;return await e.dexieTable.clear(),this.close()},t.close=function(){return this.closed||(this.closed=(async()=>{this.changes$.complete(),await async function(e){var t=await e,r=U.get(e)-1;0===r?(t.dexieDb.close(),U.delete(e)):U.set(e,r)}(this.internals)})()),this.closed},t.conflictResultionTasks=function(){return new ie.B},t.resolveConflictResultionTask=async function(e){},e}();async function it(e,t,r){var n=function(e,t,r,n){var o="rxdb-dexie-"+e+"--"+n.version+"--"+t,c=s(Z,o,(()=>{var e=(async()=>{var e=i(r);e.autoOpen=!1;var t=new a.cf(o,e),s={[Q]:re(n),[H]:"++sequence, id",[z]:"id"};return t.version(1).stores(s),await t.open(),{dexieDb:t,dexieTable:t[Q],dexieAttachmentsTable:t[z],booleanIndexes:se(n)}})();return Z.set(o,c),U.set(c,0),e}));return c}(t.databaseName,t.collectionName,r,t.schema),o=new st(e,t.databaseName,t.collectionName,t.schema,n,t.options,r,t.devMode);return await tt(K,t,o),Promise.resolve(o)}function ot(e){if(e.closed)throw new Error("RxStorageInstanceDexie is closed "+e.databaseName+"-"+e.collectionName)}var ct="15.21.3",lt=function(){function e(e){this.name=K,this.rxdbVersion=ct,this.settings=e}return e.prototype.createStorageInstance=function(e){return function(e){if(e.schema.keyCompression)throw N("UT5",{args:{params:e}});if((t=e.schema).encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)throw N("UT6",{args:{params:e}});var t;if(e.schema.attachments&&e.schema.attachments.compression)throw N("UT7",{args:{params:e}})}(e),it(this,e,this.settings)},e}();function dt(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var r,a;if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(a=r;0!=a--;)if(!dt(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var n=Object.keys(e);if((r=n.length)!==Object.keys(t).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(t,n[a]))return!1;for(a=r;0!=a--;){var s=n[a];if(!dt(e[s],t[s]))return!1}return!0}return e!=e&&t!=t}var ut=function(){function e(e,t){this.jsonSchema=e,this.hashFunction=t,this.indexes=function(e){return(e.indexes||[]).map((e=>(0,y.k_)(e)?e:[e]))}(this.jsonSchema),this.primaryPath=M(this.jsonSchema.primaryKey),this.finalFields=F(this.jsonSchema)}var t=e.prototype;return t.validateChange=function(e,t){this.finalFields.forEach((r=>{if(!dt(e[r],t[r]))throw N("DOC9",{dataBefore:e,dataAfter:t,fieldName:r,schema:this.jsonSchema})}))},t.getDocumentPrototype=function(){var e={},t=B(this.jsonSchema,"");return Object.keys(t).forEach((t=>{var r=t;e.__defineGetter__(t,(function(){if(this.get&&"function"==typeof this.get)return this.get(r)})),Object.defineProperty(e,t+"$",{get:function(){return this.get$(r)},enumerable:!1,configurable:!1}),Object.defineProperty(e,t+"$$",{get:function(){return this.get$$(r)},enumerable:!1,configurable:!1}),Object.defineProperty(e,t+"_",{get:function(){return this.populate(r)},enumerable:!1,configurable:!1})})),l(this,"getDocumentPrototype",(()=>e)),e},t.getPrimaryOfDocumentData=function(e){return L(this.jsonSchema,e)},(0,b.A)(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var e={};return Object.entries(this.jsonSchema.properties).filter((e=>{let[,t]=e;return Object.prototype.hasOwnProperty.call(t,"default")})).forEach((t=>{let[r,a]=t;return e[r]=a.default})),l(this,"defaultValues",e)}},{key:"hash",get:function(){return l(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function ht(e,t,r){void 0===r&&(r=!0),r&&We("preCreateRxSchema",e);var a=q(e);a=function(e){return o(e,!0)}(a),j.deepFreezeWhenDevMode(a);var n=new ut(a,t);return We("createRxSchema",n),n}var mt=r(7708),pt=r(8146),ft=r(3356),vt=r(5520),gt=r(8609),yt=r(1753);function bt(e){var t=e.split("-"),r="RxDB";return t.forEach((e=>{r+=P(e)})),r+="Plugin",new Error("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { "+r+" } from 'rxdb/plugins/"+e+"';\n            addRxPlugin("+r+");\n        ")}function xt(e){return e.documentData?e.documentData:e.previousDocumentData}var wt=function(){function e(e,t,r,a){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=e,this.primaryPath=t,this.preWrite=r,this.postWrite=a}var t=e.prototype;return t.addWrite=function(e,t){var r=e[this.primaryPath],a=s(this.queueByDocId,r,(()=>[]));return new Promise(((r,n)=>{var s={lastKnownDocumentState:e,modifier:t,resolve:r,reject:n};(0,ue.ZN)(a).push(s),this.triggerRun()}))},t.triggerRun=async function(){if(!0!==this.isRunning&&0!==this.queueByDocId.size){this.isRunning=!0;var e=[],t=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(t.entries()).map((async t=>{let[r,a]=t;var n,s,i,o=(n=a.map((e=>e.lastKnownDocumentState)),s=n[0],i=Me(s._rev),n.forEach((e=>{var t=Me(e._rev);t>i&&(s=e,i=t)})),s),l=o;for(var d of a)try{l=await d.modifier(c(l))}catch(u){d.reject(u),d.reject=()=>{},d.resolve=()=>{}}try{await this.preWrite(l,o)}catch(u){return void a.forEach((e=>e.reject(u)))}e.push({previous:o,document:l})})));var r=e.length>0?await this.storageInstance.bulkWrite(e,"incremental-write"):{error:[],success:[]};return await Promise.all(r.success.map((e=>{var r=e[this.primaryPath];this.postWrite(e),n(t,r).forEach((t=>t.resolve(e)))}))),r.error.forEach((e=>{var r,a=e.documentId,i=n(t,a),o=E(e);if(o){var c=s(this.queueByDocId,a,(()=>[]));i.reverse().forEach((e=>{e.lastKnownDocumentState=(0,ue.ZN)(o.documentInDb),(0,ue.ZN)(c).unshift(e)}))}else{var l=N("COL20",{name:I[(r=e).status],document:r.documentId,writeError:r});i.forEach((e=>e.reject(l)))}})),this.isRunning=!1,this.triggerRun()}},e}();function jt(e){return async t=>{var r=function(e){return Object.assign({},e,{_meta:void 0,_deleted:void 0,_rev:void 0})}(t);r._deleted=t._deleted;var a=await e(r),n=Object.assign({},a,{_meta:t._meta,_attachments:t._attachments,_rev:t._rev,_deleted:void 0!==a._deleted?a._deleted:t._deleted});return void 0===n._deleted&&(n._deleted=!1),n}}var kt={get primaryPath(){if(this.isInstanceOfRxDocument)return this.collection.schema.primaryPath},get primary(){var e=this;if(e.isInstanceOfRxDocument)return e._data[e.primaryPath]},get revision(){if(this.isInstanceOfRxDocument)return this._data._rev},get deleted$(){if(this.isInstanceOfRxDocument)return this.$.pipe((0,mt.T)((e=>e._data._deleted)))},get deleted$$(){var e=this;return e.collection.database.getReactivityFactory().fromObservable(e.deleted$,e.getLatest().deleted,e.collection.database)},get deleted(){if(this.isInstanceOfRxDocument)return this._data._deleted},getLatest(){var e=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(e)},get $(){return this.collection.$.pipe((0,pt.p)((e=>!e.isLocal)),(0,pt.p)((e=>e.documentId===this.primary)),(0,mt.T)((e=>xt(e))),(0,ft.Z)(this.collection._docCache.getLatestDocumentData(this.primary)),(0,vt.F)(((e,t)=>e._rev===t._rev)),(0,mt.T)((e=>this.collection._docCache.getCachedRxDocument(e))),(0,gt.t)(ue.bz))},get $$(){var e=this;return e.collection.database.getReactivityFactory().fromObservable(e.$,e.getLatest()._data,e.collection.database)},get$(e){if(j.isDevMode()){if(e.includes(".item."))throw N("DOC1",{path:e});if(e===this.primaryPath)throw N("DOC2");if(this.collection.schema.finalFields.includes(e))throw N("DOC3",{path:e});if(!B(this.collection.schema.jsonSchema,e))throw N("DOC4",{path:e})}return this.$.pipe((0,mt.T)((t=>v(t,e))),(0,vt.F)())},get$$(e){var t=this.get$(e);return this.collection.database.getReactivityFactory().fromObservable(t,this.getLatest().get(e),this.collection.database)},populate(e){var t=B(this.collection.schema.jsonSchema,e),r=this.get(e);if(!r)return yt.$A;if(!t)throw N("DOC5",{path:e});if(!t.ref)throw N("DOC6",{path:e,schemaObj:t});var a=this.collection.database.collections[t.ref];if(!a)throw N("DOC7",{ref:t.ref,path:e,schemaObj:t});return"array"===t.type?a.findByIds(r).exec().then((e=>{var t=e.values();return Array.from(t)})):a.findOne(r).exec()},get(e){return s(this._propertyCache,e,(()=>{var t=v(this._data,e);if("object"!=typeof t||null===t||Array.isArray(t))return j.deepFreezeWhenDevMode(t);var r=this;return new Proxy(i(t),{get(t,a){if("string"!=typeof a)return t[a];var n=a.charAt(a.length-1);if(a.endsWith("$$")){var s=a.slice(0,-2);return r.get$$(T(e+"."+s))}if("$"===n){var i=a.slice(0,-1);return r.get$(T(e+"."+i))}if("_"===n){var o=a.slice(0,-1);return r.populate(T(e+"."+o))}return r.get(T(e+"."+a))}})}))},toJSON(e){if(void 0===e&&(e=!1),e)return j.deepFreezeWhenDevMode(this._data);var t=i(this._data);return delete t._rev,delete t._attachments,delete t._deleted,delete t._meta,j.deepFreezeWhenDevMode(t)},toMutableJSON(e){return void 0===e&&(e=!1),c(this.toJSON(e))},update(e){throw bt("update")},incrementalUpdate(e){throw bt("update")},updateCRDT(e){throw bt("crdt")},putAttachment(){throw bt("attachments")},getAttachment(){throw bt("attachments")},allAttachments(){throw bt("attachments")},get allAttachments$(){throw bt("attachments")},async modify(e,t){var r=this._data,a=await jt(e)(r);return this._saveData(a,r)},incrementalModify(e,t){return this.collection.incrementalWriteQueue.addWrite(this._data,jt(e)).then((e=>this.collection._docCache.getCachedRxDocument(e)))},patch(e){var t=this._data,r=c(t);return Object.entries(e).forEach((e=>{let[t,a]=e;r[t]=a})),this._saveData(r,t)},incrementalPatch(e){return this.incrementalModify((t=>(Object.entries(e).forEach((e=>{let[r,a]=e;t[r]=a})),t)))},async _saveData(e,t){if(e=i(e),this._data._deleted)throw N("DOC11",{id:this.primary,document:this});await Dt(this.collection,e,t);var r=await this.collection.storageInstance.bulkWrite([{previous:t,document:e}],"rx-document-save-data"),a=r.error[0];return Ke(this.collection,this.primary,e,a),await this.collection._runHooks("post","save",e,this),this.collection._docCache.getCachedRxDocument(r.success[0])},remove(){var e=this.collection;if(this.deleted)return Promise.reject(N("DOC13",{document:this,id:this.primary}));var t,r=i(this._data);return e._runHooks("pre","remove",r,this).then((async()=>{r._deleted=!0;var t=await e.storageInstance.bulkWrite([{previous:this._data,document:r}],"rx-document-remove"),a=t.error[0];return Ke(e,this.primary,r,a),t.success[0]})).then((e=>(t=e,this.collection._runHooks("post","remove",r,this)))).then((()=>this.collection._docCache.getCachedRxDocument(t)))},incrementalRemove(){return this.incrementalModify((async e=>(await this.collection._runHooks("pre","remove",e,this),e._deleted=!0,e))).then((async e=>(await this.collection._runHooks("post","remove",e._data,e),e)))},destroy(){throw N("DOC14")}};function _t(e){void 0===e&&(e=kt);var t=function(e,t){this.collection=e,this._data=t,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return t.prototype=e,t}function Dt(e,t,r){return t._meta=Object.assign({},r._meta,t._meta),j.isDevMode()&&e.schema.validateChange(r,t),e._runHooks("pre","save",t,r)}var Nt=r(2198),Rt=r(511),Et=r(4157),It=r(2442),Ct=r(6114);function St(e,t){return t.sort&&0!==t.sort.length?t.sort.map((e=>Object.keys(e)[0])):[e]}var Ot=new WeakMap;function Pt(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};var r=function(e){return s(Ot,e,(()=>{var t=e.collection,r=Ce(t.storageInstance.schema,c(e.mangoQuery)),a=t.schema.primaryPath,n=Se(t.schema.jsonSchema,r),s=Oe(t.schema.jsonSchema,r);return{primaryKey:e.collection.schema.primaryPath,skip:r.skip,limit:r.limit,sortFields:St(a,r),sortComparator:(t,r)=>{var a={docA:t,docB:r,rxQuery:e};return n(a.docA,a.docB)},queryMatcher:t=>s({doc:t,rxQuery:e}.doc)}}))}(e),a=(0,ue.ZN)(e._result).docsData.slice(0),n=(0,ue.ZN)(e._result).docsDataMap,i=!1;return t.map((e=>function(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:j.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}}(e))).filter(y.S7).find((e=>{var t={queryParams:r,changeEvent:e,previousResults:a,keyDocumentMap:n},s=(0,Ct.kC)(t);return"runFullQueryAgain"===s||("doNothing"!==s?(i=!0,(0,Ct.Cs)(s,r,e,a,n),!1):void 0)}))?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:i,newResults:a}}var Tt=function(){function e(){this._map=new Map}return e.prototype.getByQuery=function(e){var t=e.toString();return s(this._map,t,(()=>e))},e}();function $t(e,t){t.uncached=!0;var r=t.toString();e._map.delete(r)}function At(e){return e.refCount$.observers.length}var Bt,Mt,Lt=(Bt=100,Mt=3e4,(e,t)=>{if(!(t._map.size<Bt)){var r=(0,oe.t)()-Mt,a=[],n=Array.from(t._map.values());for(var s of n)At(s)>0||(0===s._lastEnsureEqual&&s._creationTime<r?$t(t,s):a.push(s));var i=a.length-Bt;i<=0||a.sort(((e,t)=>e._lastEnsureEqual-t._lastEnsureEqual)).slice(0,i).forEach((e=>$t(t,e)))}}),qt=new WeakSet;var Wt=function(){function e(e,t,r){this.cacheItemByDocId=new Map,this.registry="function"==typeof FinalizationRegistry?new FinalizationRegistry((e=>{var t=e.docId,r=this.cacheItemByDocId.get(t);r&&(r[0].delete(e.revisionHeight),0===r[0].size&&this.cacheItemByDocId.delete(t))})):void 0,this.primaryPath=e,this.changes$=t,this.documentCreator=r,t.subscribe((e=>{var t=e.documentId,r=this.cacheItemByDocId.get(t);if(r){var a=xt(e);r[1]=a}}))}var t=e.prototype;return t.getLatestDocumentData=function(e){return n(this.cacheItemByDocId,e)[1]},t.getLatestDocumentDataIfExists=function(e){var t=this.cacheItemByDocId.get(e);if(t)return t[1]},(0,b.A)(e,[{key:"getCachedRxDocuments",get:function(){return l(this,"getCachedRxDocuments",Ft(this))}},{key:"getCachedRxDocument",get:function(){var e=Ft(this);return l(this,"getCachedRxDocument",(t=>e([t])[0]))}}])}();function Ft(e){var t=e.primaryPath,r=e.cacheItemByDocId,a=e.registry,n=j.deepFreezeWhenDevMode,s=e.documentCreator;return e=>{for(var i=new Array(e.length),o=[],c=0;c<e.length;c++){var l=e[c],d=l[t],u=Me(l._rev),h=void 0,m=void 0,p=r.get(d);p?m=(h=p[0]).get(u):(p=[h=new Map,l],r.set(d,p));var f=m?m.deref():void 0;f||(l=n(l),f=s(l),h.set(u,Ht(f)),a&&o.push(f)),i[c]=f}return o.length>0&&a&&(0,yt.vN)().then((()=>{for(var e=0;e<o.length;e++){var t=o[e];a.register(t,{docId:t.primary,revisionHeight:Me(t.revision)})}})),i}}function Qt(e,t){return(0,e.getCachedRxDocuments)(t)}var Ht="function"==typeof WeakRef?function(e){return new WeakRef(e)}:function(e){return{deref:()=>e}};var zt=function(){return(0,b.A)((function(e,t,r){this.time=(0,oe.t)(),this.collection=e,this.count=r,this.documents=Qt(this.collection._docCache,t)}),[{key:"docsData",get:function(){return l(this,"docsData",this.documents.map((e=>e._data)))}},{key:"docsDataMap",get:function(){var e=new Map;return this.documents.forEach((t=>{e.set(t.primary,t._data)})),l(this,"docsDataMap",e)}},{key:"docsMap",get:function(){for(var e=new Map,t=this.documents,r=0;r<t.length;r++){var a=t[r];e.set(a.primary,a)}return l(this,"docsMap",e)}}])}(),Kt=0,Zt=function(){function e(e,t,r,a){void 0===a&&(a={}),this.id=++Kt,this._execOverDatabaseCount=0,this._creationTime=(0,oe.t)(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new Nt.t(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=yt.Dr,this.op=e,this.mangoQuery=t,this.collection=r,this.other=a,t||(this.mangoQuery={selector:{}}),this.isFindOneByIdQuery=function(e,t){if(!t.skip&&t.selector&&1===Object.keys(t.selector).length&&t.selector[e]){var r=t.selector[e];if("string"==typeof r)return r;if(1===Object.keys(r).length&&"string"==typeof r.$eq)return r.$eq;if(1===Object.keys(r).length&&Array.isArray(r.$eq)&&!r.$eq.find((e=>"string"!=typeof e)))return r.$eq}return!1}(this.collection.schema.primaryPath,t)}var t=e.prototype;return t._setResultData=function(e){if("number"!=typeof e){e instanceof Map&&(e=Array.from(e.values()));var t=new zt(this.collection,e,e.length);this._result=t}else this._result=new zt(this.collection,[],e)},t._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=(0,oe.t)(),"count"===this.op){var e=this.getPreparedQuery(),t=await this.collection.storageInstance.count(e);if("slow"!==t.mode||this.collection.database.allowSlowCount)return t.count;throw N("QU14",{collection:this.collection,queryObj:this.mangoQuery})}if("findByIds"===this.op){var r=(0,ue.ZN)(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,a=new Map,n=[];if(r.forEach((e=>{var t=this.collection._docCache.getLatestDocumentDataIfExists(e);if(t){if(!t._deleted){var r=this.collection._docCache.getCachedRxDocument(t);a.set(e,r)}}else n.push(e)})),n.length>0)(await this.collection.storageInstance.findDocumentsById(n,!1)).forEach((e=>{var t=this.collection._docCache.getCachedRxDocument(e);a.set(t.primary,t)}));return a}var s=async function(e){var t=[],r=e.collection;if(e.isFindOneByIdQuery)if(Array.isArray(e.isFindOneByIdQuery)){var a=e.isFindOneByIdQuery;if(a=a.filter((r=>{var a=e.collection._docCache.getLatestDocumentDataIfExists(r);return!a||(a._deleted||t.push(a),!1)})),a.length>0){var n=await r.storageInstance.findDocumentsById(a,!1);(0,y.Hb)(t,n)}}else{var s=e.isFindOneByIdQuery,i=e.collection._docCache.getLatestDocumentDataIfExists(s);if(!i){var o=await r.storageInstance.findDocumentsById([s],!1);o[0]&&(i=o[0])}i&&!i._deleted&&t.push(i)}else{var c=e.getPreparedQuery(),l=await r.storageInstance.query(c);t=l.documents}return t}(this);return s.then((e=>(this._lastExecEnd=(0,oe.t)(),e)))},t.exec=function(e){if(e&&"findOne"!==this.op)throw N("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return Vt(this).then((()=>(0,Rt._)(this.$))).then((t=>{if(!t&&e)throw N("QU10",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return t}))},t.toString=function(){var e=o({op:this.op,query:this.mangoQuery,other:this.other},!0),t=JSON.stringify(e);return this.toString=()=>t,t},t.getPreparedQuery=function(){var e={rxQuery:this,mangoQuery:Ce(this.collection.schema.jsonSchema,this.mangoQuery)};e.mangoQuery.selector._deleted={$eq:!1},e.mangoQuery.index&&e.mangoQuery.index.unshift("_deleted"),We("prePrepareQuery",e);var t=Gt(this.collection.schema.jsonSchema,e.mangoQuery);return this.getPreparedQuery=()=>t,t},t.doesDocumentDataMatch=function(e){return!e._deleted&&this.queryMatcher(e)},t.remove=function(){return this.exec().then((e=>Array.isArray(e)?Promise.all(e.map((e=>e.remove()))):e.remove()))},t.incrementalRemove=function(){return Pe(this.asRxQuery,(e=>e.incrementalRemove()))},t.update=function(e){throw bt("update")},t.patch=function(e){return Pe(this.asRxQuery,(t=>t.patch(e)))},t.incrementalPatch=function(e){return Pe(this.asRxQuery,(t=>t.incrementalPatch(e)))},t.modify=function(e){return Pe(this.asRxQuery,(t=>t.modify(e)))},t.incrementalModify=function(e){return Pe(this.asRxQuery,(t=>t.incrementalModify(e)))},t.where=function(e){throw bt("query-builder")},t.sort=function(e){throw bt("query-builder")},t.skip=function(e){throw bt("query-builder")},t.limit=function(e){throw bt("query-builder")},(0,b.A)(e,[{key:"$",get:function(){if(!this._$){var e=this.collection.$.pipe((0,pt.p)((e=>!e.isLocal)),(0,ft.Z)(null),(0,It.Z)((()=>Vt(this))),(0,mt.T)((()=>this._result)),(0,gt.t)(ue.bz),(0,vt.F)(((e,t)=>!(!e||e.time!==(0,ue.ZN)(t).time))),(0,pt.p)((e=>!!e)),(0,mt.T)((e=>{var t=(0,ue.ZN)(e);return"count"===this.op?t.count:"findOne"===this.op?0===t.documents.length?null:t.documents[0]:"findByIds"===this.op?t.docsMap:t.documents.slice(0)})));this._$=(0,Et.h)(e,this.refCount$.pipe((0,pt.p)((()=>!1))))}return this._$}},{key:"$$",get:function(){return this.collection.database.getReactivityFactory().fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){this.collection.schema.jsonSchema;return l(this,"queryMatcher",Oe(0,Ce(this.collection.schema.jsonSchema,this.mangoQuery)))}},{key:"asRxQuery",get:function(){return this}}])}();function Ut(e,t,r,a){We("preCreateRxQuery",{op:e,queryObj:t,collection:r,other:a});var n,s,i=new Zt(e,t,r,a);return i=(n=i).collection._queryCache.getByQuery(n),s=r,qt.has(s)||(qt.add(s),(0,yt.dY)().then((()=>(0,yt.Ve)(200))).then((()=>{s.destroyed||s.cacheReplacementPolicy(s,s._queryCache),qt.delete(s)}))),i}function Jt(e){var t=e.asRxQuery.collection._changeEventBuffer.counter;return e._latestChangeEvent>=t}function Vt(e){return e.collection.database.destroyed||Jt(e)?yt.Dr:(e._ensureEqualQueue=e._ensureEqualQueue.then((()=>function(e){if(e._lastEnsureEqual=(0,oe.t)(),e.collection.database.destroyed||Jt(e))return yt.Dr;var t=!1,r=!1;-1===e._latestChangeEvent&&(r=!0);if(!r){var a=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(null===a)r=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.counter;var n=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(a);if("count"===e.op){var s=(0,ue.ZN)(e._result).count,i=s;n.forEach((t=>{var r=t.previousDocumentData&&e.doesDocumentDataMatch(t.previousDocumentData),a=e.doesDocumentDataMatch(t.documentData);!r&&a&&i++,r&&!a&&i--})),i!==s&&(t=!0,e._setResultData(i))}else{var o=Pt(e,n);o.runFullQueryAgain?r=!0:o.changed&&(t=!0,e._setResultData(o.newResults))}}}if(r)return e._execOverDatabase().then((r=>(e._latestChangeEvent=e.collection._changeEventBuffer.counter,"number"==typeof r?(e._result&&r===e._result.count||(t=!0,e._setResultData(r)),t):(e._result&&function(e,t,r){if(t.length!==r.length)return!1;for(var a=0,n=t.length;a<n;){var s=t[a],i=r[a];if(a++,s._rev!==i._rev||s[e]!==i[e])return!1}return!0}(e.collection.schema.primaryPath,r,e._result.docsData)||(t=!0,e._setResultData(r)),t))));return Promise.resolve(t)}(e))),e._ensureEqualQueue)}function Gt(e,t){if(!t.sort)throw N("SNH",{query:t});return{query:t,queryPlan:pe(e,t)}}var Yt="collection",Xt="storage-token",er=q({version:0,title:"RxInternalDocument",primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[Yt,Xt,"rx-migration-status","OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function tr(e,t){return L(er,{key:e,context:t})}async function rr(e){var t=Gt(e.schema,{selector:{context:Yt,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0});return(await e.query(t)).documents}var ar="storageToken",nr=tr(ar,Xt);function sr(e,t){return e+"-"+t.version}function ir(e,t){return t=function(e,t){for(var r=Object.keys(e.defaultValues),a=0;a<r.length;++a){var n=r[a];Object.prototype.hasOwnProperty.call(t,n)&&void 0!==t[n]||(t[n]=e.defaultValues[n])}return t}(e,t=i(t)),(t=function(e,t,r){if("string"==typeof t.primaryKey)return r;var a=L(t,r),n=r[e];if(n&&n!==a)throw N("DOC19",{args:{documentData:r,existingPrimary:n,newPrimary:a},schema:t});return r[e]=a,r}(e.primaryPath,e.jsonSchema,t))._meta=A(),Object.prototype.hasOwnProperty.call(t,"_deleted")||(t._deleted=!1),Object.prototype.hasOwnProperty.call(t,"_attachments")||(t._attachments={}),Object.prototype.hasOwnProperty.call(t,"_rev")||(t._rev=""),t}async function or(e,t,r,a,n,s,i){var o=(await rr(t)).filter((e=>e.data.name===n)),c=[];o.forEach((e=>{c.push({collectionName:e.data.name,schema:e.data.schema,isCollection:!0}),e.data.connectedStorages.forEach((e=>c.push({collectionName:e.collectionName,isCollection:!1,schema:e.schema})))}));var l=new Set;if(c=c.filter((e=>{var t=e.collectionName+"||"+e.schema.version;return!l.has(t)&&(l.add(t),!0)})),await Promise.all(c.map((async t=>{var i=await e.createStorageInstance({collectionName:t.collectionName,databaseInstanceToken:r,databaseName:a,multiInstance:!1,options:{},schema:t.schema,password:s,devMode:j.isDevMode()});await i.remove(),t.isCollection&&await Fe("postRemoveRxCollection",{storage:e,databaseName:a,collectionName:n})}))),i){var d=o.map((e=>{var t=Je(e);return t._deleted=!0,t._meta.lwt=(0,oe.t)(),t._rev=Le(r,e),{previous:e,document:t}}));await t.bulkWrite(d,"rx-database-remove-collection-all")}}function cr(e){if(e.destroyed)throw N("COL21",{collection:e.name,version:e.schema.version})}var lr=function(){function e(e){this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=e,this.subs.push(this.collection.$.pipe((0,pt.p)((e=>!e.isLocal))).subscribe((e=>this._handleChangeEvent(e))))}var t=e.prototype;return t._handleChangeEvent=function(e){for(this.counter++,this.buffer.push(e),this.eventCounterMap.set(e,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},t.getArrayIndexByPointer=function(e){var t=this.buffer[0],r=this.eventCounterMap.get(t);return e<r?null:e-r},t.getFrom=function(e){var t=[],r=this.getArrayIndexByPointer(e);if(null===r)return null;for(;;){var a=this.buffer[r];if(r++,!a)return t;t.push(a)}},t.runFrom=function(e,t){var r=this.getFrom(e);if(null===r)throw new Error("out of bounds");r.forEach((e=>t(e)))},t.reduceByLastOfDoc=function(e){return e.slice(0)},t.destroy=function(){this.subs.forEach((e=>e.unsubscribe()))},e}();var dr=new WeakMap;function ur(e){var t=e.schema.getDocumentPrototype(),r=function(e){var t={};return Object.entries(e.methods).forEach((e=>{let[r,a]=e;t[r]=a})),t}(e),a={};return[t,r,kt].forEach((e=>{Object.getOwnPropertyNames(e).forEach((t=>{var r=Object.getOwnPropertyDescriptor(e,t),n=!0;(t.startsWith("_")||t.endsWith("_")||t.startsWith("$")||t.endsWith("$"))&&(n=!1),"function"==typeof r.value?Object.defineProperty(a,t,{get(){return r.value.bind(this)},enumerable:n,configurable:!1}):(r.enumerable=n,r.configurable=!1,r.writable&&(r.writable=!1),Object.defineProperty(a,t,r))}))})),a}function hr(e,t,r){var a=function(e,t,r){var a=new e(t,r);return We("createRxDocument",a),a}(t,e,j.deepFreezeWhenDevMode(r));return e._runHooksSync("post","create",r,a),We("postCreateRxDocument",a),a}var mr=function(e,t){return dt(Ue(e.newDocumentState),Ue(e.realMasterState))?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:e.realMasterState})};var pr=["pre","post"],fr=["insert","save","remove","create"],vr=!1,gr=function(){function e(e,t,r,a,n,s,i,o,c,l,d,u){void 0===n&&(n={}),void 0===s&&(s={}),void 0===i&&(i={}),void 0===o&&(o={}),void 0===c&&(c={}),void 0===l&&(l=Lt),void 0===d&&(d={}),void 0===u&&(u=mr),this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=new Tt,this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.onRemove=[],this.database=e,this.name=t,this.schema=r,this.internalStorageInstance=a,this.instanceCreationOptions=n,this.migrationStrategies=s,this.methods=i,this.attachments=o,this.options=c,this.cacheReplacementPolicy=l,this.statics=d,this.conflictHandler=u,function(e){if(vr)return;vr=!0;var t=Object.getPrototypeOf(e);fr.forEach((e=>{pr.map((r=>{var a=r+P(e);t[a]=function(t,a){return this.addHook(r,e,t,a)}}))}))}(this.asRxCollection)}var t=e.prototype;return t.prepare=async function(){this.storageInstance=Ve(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new wt(this.storageInstance,this.schema.primaryPath,((e,t)=>Dt(this,e,t)),(e=>this._runHooks("post","save",e)));var e,t,r=this.database.eventBulks$.pipe((0,pt.p)((e=>e.collectionName===this.name)));this.$=r.pipe((0,It.Z)((e=>e.events))),this.checkpoint$=r.pipe((0,mt.T)((e=>e.checkpoint))),this._changeEventBuffer=(e=this.asRxCollection,new lr(e)),this._docCache=new Wt(this.schema.primaryPath,this.$.pipe((0,pt.p)((e=>!e.isLocal))),(e=>{var r;return t||(r=this.asRxCollection,t=s(dr,r,(()=>_t(ur(r))))),hr(this.asRxCollection,t,e)}));var a=this.database.internalStore.changeStream().pipe((0,pt.p)((e=>{var t=this.name+"-"+this.schema.version;return!!e.events.find((e=>"collection"===e.documentData.context&&e.documentData.key===t&&"DELETE"===e.operation))}))).subscribe((async()=>{await this.destroy(),await Promise.all(this.onRemove.map((e=>e())))}));this._subs.push(a);var n=await this.database.storageToken,i=this.storageInstance.changeStream().subscribe((e=>{for(var t=new Array(e.events.length),r=e.events,a=this.name,s=j.deepFreezeWhenDevMode,i=0;i<r.length;i++){var o=r[i];t[i]={documentId:o.documentId,collectionName:a,isLocal:!1,operation:o.operation,documentData:s(o.documentData),previousDocumentData:s(o.previousDocumentData)}}var c={id:e.id,internal:!1,collectionName:this.name,storageToken:n,events:t,databaseToken:this.database.token,checkpoint:e.checkpoint,context:e.context,endTime:e.endTime,startTime:e.startTime};this.database.$emit(c)}));return this._subs.push(i),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe((e=>{this.conflictHandler(e.input,e.context).then((t=>{this.storageInstance.resolveConflictResultionTask({id:e.id,output:t})}))}))),yt.em},t.cleanup=function(e){throw cr(this),bt("cleanup")},t.migrationNeeded=function(){throw bt("migration-schema")},t.getMigrationState=function(){throw bt("migration-schema")},t.startMigration=function(e){return void 0===e&&(e=10),cr(this),this.getMigrationState().startMigration(e)},t.migratePromise=function(e){return void 0===e&&(e=10),this.getMigrationState().migratePromise(e)},t.insert=async function(e){cr(this);var t=await this.bulkInsert([e]),r=t.error[0];return Ke(this,e[this.schema.primaryPath],e,r),(0,ue.ZN)(t.success[0])},t.bulkInsert=async function(e){if(cr(this),0===e.length)return{success:[],error:[]};var t,r=this.schema.primaryPath;if(this.hasHooks("pre","insert"))t=await Promise.all(e.map((e=>{var t=ir(this.schema,e);return this._runHooks("pre","insert",t).then((()=>({document:t})))})));else{t=[];for(var a=0;a<e.length;a++){var n=e[a],s=ir(this.schema,n);t[a]={document:s}}}var i=await this.storageInstance.bulkWrite(t,"rx-collection-bulk-insert"),o=Qt(this._docCache,i.success);if(this.hasHooks("post","insert")){var c=new Map;t.forEach((e=>{var t=e.document;c.set(t[r],t)})),await Promise.all(o.map((e=>this._runHooks("post","insert",c.get(e.primary),e))))}return{success:o,error:i.error}},t.bulkRemove=async function(e){cr(this);var t=this.schema.primaryPath;if(0===e.length)return{success:[],error:[]};var r=await this.findByIds(e).exec(),a=[],s=new Map;Array.from(r.values()).forEach((e=>{var t=e.toMutableJSON(!0);a.push(t),s.set(e.primary,t)})),await Promise.all(a.map((e=>{var t=e[this.schema.primaryPath];return this._runHooks("pre","remove",e,r.get(t))})));var o=a.map((e=>{var t=i(e);return t._deleted=!0,{previous:e,document:t}})),c=await this.storageInstance.bulkWrite(o,"rx-collection-bulk-remove"),l=c.success.map((e=>e[t]));return await Promise.all(l.map((e=>this._runHooks("post","remove",s.get(e),r.get(e))))),{success:l.map((e=>n(r,e))),error:c.error}},t.bulkUpsert=async function(e){cr(this);var t=[],r=new Map;e.forEach((e=>{var a=ir(this.schema,e),n=a[this.schema.primaryPath];if(!n)throw N("COL3",{primaryPath:this.schema.primaryPath,data:a,schema:this.schema.jsonSchema});r.set(n,a),t.push(a)}));var a=await this.bulkInsert(t),s=a.success.slice(0),i=[];return await Promise.all(a.error.map((async e=>{if(409!==e.status)i.push(e);else{var t=e.documentId,a=n(r,t),o=(0,ue.ZN)(e.documentInDb),c=this._docCache.getCachedRxDocuments([o])[0],l=await c.incrementalModify((()=>a));s.push(l)}}))),{error:i,success:s}},t.upsert=async function(e){cr(this);var t=await this.bulkUpsert([e]);return Ke(this.asRxCollection,e[this.schema.primaryPath],e,t.error[0]),t.success[0]},t.incrementalUpsert=function(e){cr(this);var t=ir(this.schema,e),r=t[this.schema.primaryPath];if(!r)throw N("COL4",{data:e});var a=this._incrementalUpsertQueues.get(r);return a||(a=yt.em),a=a.then((()=>function(e,t,r){var a=e._docCache.getLatestDocumentDataIfExists(t);if(a)return Promise.resolve({doc:e._docCache.getCachedRxDocuments([a])[0],inserted:!1});return e.findOne(t).exec().then((t=>t?{doc:t,inserted:!1}:e.insert(r).then((e=>({doc:e,inserted:!0})))))}(this,r,t))).then((e=>e.inserted?e.doc:function(e,t){return e.incrementalModify((e=>t))}(e.doc,t))),this._incrementalUpsertQueues.set(r,a),a},t.find=function(e){if(cr(this),"string"==typeof e)throw N("COL5",{queryObj:e});return e||(e={selector:{}}),Ut("find",e,this)},t.findOne=function(e){if(cr(this),"number"==typeof e||Array.isArray(e))throw R("COL6",{queryObj:e});var t;if("string"==typeof e)t=Ut("findOne",{selector:{[this.schema.primaryPath]:e},limit:1},this);else{if(e||(e={selector:{}}),e.limit)throw N("QU6");(e=i(e)).limit=1,t=Ut("findOne",e,this)}return t},t.count=function(e){return cr(this),e||(e={selector:{}}),Ut("count",e,this)},t.findByIds=function(e){return cr(this),Ut("findByIds",{selector:{[this.schema.primaryPath]:{$in:e.slice(0)}}},this)},t.exportJSON=function(){throw bt("json-dump")},t.importJSON=function(e){throw bt("json-dump")},t.insertCRDT=function(e){throw bt("crdt")},t.addHook=function(e,t,r,a){if(void 0===a&&(a=!1),"function"!=typeof r)throw R("COL7",{key:t,when:e});if(!pr.includes(e))throw R("COL8",{key:t,when:e});if(!fr.includes(t))throw N("COL9",{key:t});if("post"===e&&"create"===t&&!0===a)throw N("COL10",{when:e,key:t,parallel:a});var n=r.bind(this),s=a?"parallel":"series";this.hooks[t]=this.hooks[t]||{},this.hooks[t][e]=this.hooks[t][e]||{series:[],parallel:[]},this.hooks[t][e][s].push(n)},t.getHooks=function(e,t){return this.hooks[t]&&this.hooks[t][e]?this.hooks[t][e]:{series:[],parallel:[]}},t.hasHooks=function(e,t){if(!this.hooks[t]||!this.hooks[t][e])return!1;var r=this.getHooks(e,t);return!!r&&(r.series.length>0||r.parallel.length>0)},t._runHooks=function(e,t,r,a){var n=this.getHooks(e,t);if(!n)return yt.em;var s=n.series.map((e=>()=>e(r,a)));return(0,yt.h$)(s).then((()=>Promise.all(n.parallel.map((e=>e(r,a))))))},t._runHooksSync=function(e,t,r,a){if(this.hasHooks(e,t)){var n=this.getHooks(e,t);n&&n.series.forEach((e=>e(r,a)))}},t.promiseWait=function(e){return new Promise((t=>{var r=setTimeout((()=>{this.timeouts.delete(r),t()}),e);this.timeouts.add(r)}))},t.destroy=async function(){return this.destroyed?yt.Dr:(await Promise.all(this.onDestroy.map((e=>e()))),this.destroyed=!0,Array.from(this.timeouts).forEach((e=>clearTimeout(e))),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then((()=>this.storageInstance.close())).then((()=>(this._subs.forEach((e=>e.unsubscribe())),delete this.database.collections[this.name],Fe("postDestroyRxCollection",this).then((()=>!0))))))},t.remove=async function(){await this.destroy(),await Promise.all(this.onRemove.map((e=>e()))),await or(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)},(0,b.A)(e,[{key:"insert$",get:function(){return this.$.pipe((0,pt.p)((e=>"INSERT"===e.operation)))}},{key:"update$",get:function(){return this.$.pipe((0,pt.p)((e=>"UPDATE"===e.operation)))}},{key:"remove$",get:function(){return this.$.pipe((0,pt.p)((e=>"DELETE"===e.operation)))}},{key:"asRxCollection",get:function(){return this}}])}();var yr=r(7635),br=r(5525),xr=new Set,wr=function(){function e(e,t,r,a,n,s,i,o,c,l,d,u,h){void 0===i&&(i=!1),void 0===o&&(o={}),this.idleQueue=new yr.G,this.rxdbVersion=ct,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.states={},this.eventBulks$=new ie.B,this.observable$=this.eventBulks$.pipe((0,It.Z)((e=>e.events))),this.storageToken=yt.Dr,this.storageTokenDocument=yt.Dr,this.emittedEventBulkIds=new br.p4(6e4),this.name=e,this.token=t,this.storage=r,this.instanceCreationOptions=a,this.password=n,this.multiInstance=s,this.eventReduce=i,this.options=o,this.internalStore=c,this.hashFunction=l,this.cleanupPolicy=d,this.allowSlowCount=u,this.reactivity=h,"pseudoInstance"!==this.name&&(this.internalStore=Ve(this.asRxDatabase,c,er),this.storageTokenDocument=async function(e){var t=O(10),r=e.password?await e.hashFunction(JSON.stringify(e.password)):void 0,a={id:nr,context:Xt,key:ar,data:{rxdbVersion:e.rxdbVersion,token:t,instanceToken:e.token,passwordHash:r},_deleted:!1,_meta:A(),_rev:"",_attachments:{}},n=await e.internalStore.bulkWrite([{document:a}],"internal-add-storage-token");if(n.success[0])return n.success[0];var s=(0,ue.ZN)(n.error[0]);if(s.isError&&E(s)){var i=s;if(c=i.documentInDb.data.rxdbVersion,l=e.rxdbVersion,!c||l.includes("beta")&&l!==c||c.split(".")[0]!==l.split(".")[0])throw N("DM5",{args:{database:e.name,databaseStateVersion:i.documentInDb.data.rxdbVersion,codeVersion:e.rxdbVersion}});if(r&&r!==i.documentInDb.data.passwordHash)throw N("DB1",{passwordHash:r,existingPasswordHash:i.documentInDb.data.passwordHash});var o=i.documentInDb;return(0,ue.ZN)(o)}var c,l;throw s}(this.asRxDatabase).catch((e=>this.startupErrors.push(e))),this.storageToken=this.storageTokenDocument.then((e=>e.data.token)).catch((e=>this.startupErrors.push(e))))}var t=e.prototype;return t.getReactivityFactory=function(){if(!this.reactivity)throw N("DB14",{database:this.name});return this.reactivity},t.$emit=function(e){this.emittedEventBulkIds.has(e.id)||(this.emittedEventBulkIds.add(e.id),this.eventBulks$.next(e))},t.removeCollectionDoc=async function(e,t){var r=await He(this.internalStore,tr(sr(e,t),Yt));if(!r)throw N("SNH",{name:e,schema:t});var a=Je(r);a._deleted=!0,await this.internalStore.bulkWrite([{document:a,previous:r}],"rx-database-remove-collection")},t.addCollections=async function(e){var t={},r={},a=[],n={};await Promise.all(Object.entries(e).map((async e=>{let[s,o]=e;var c=s,l=o.schema;t[c]=l;var d=ht(l,this.hashFunction);if(r[c]=d,this.collections[s])throw N("DB3",{name:s});var u=sr(s,l),h={id:tr(u,Yt),key:u,context:Yt,data:{name:c,schemaHash:await d.hash,schema:d.jsonSchema,version:d.version,connectedStorages:[]},_deleted:!1,_meta:A(),_rev:"",_attachments:{}};a.push({document:h});var m=Object.assign({},o,{name:c,schema:d,database:this}),p=i(o);p.database=this,p.name=s,We("preCreateRxCollection",p),m.conflictHandler=p.conflictHandler,n[c]=m})));var s=await this.internalStore.bulkWrite(a,"rx-database-add-collection");await async function(e){if(await e.storageToken,e.startupErrors[0])throw e.startupErrors[0]}(this),await Promise.all(s.error.map((async e=>{if(409!==e.status)throw N("DB12",{database:this.name,writeError:e});var a=(0,ue.ZN)(e.documentInDb),n=a.data.name,s=r[n];if(a.data.schemaHash!==await s.hash)throw N("DB6",{database:this.name,collection:n,previousSchemaHash:a.data.schemaHash,schemaHash:await s.hash,previousSchema:a.data.schema,schema:(0,ue.ZN)(t[n])})})));var o={};return await Promise.all(Object.keys(e).map((async e=>{var t=n[e],r=await function(e){let{database:t,name:r,schema:a,instanceCreationOptions:n={},migrationStrategies:s={},autoMigrate:i=!0,statics:o={},methods:c={},attachments:l={},options:d={},localDocuments:u=!1,cacheReplacementPolicy:h=Lt,conflictHandler:m=mr}=e;var p={databaseInstanceToken:t.token,databaseName:t.name,collectionName:r,schema:a.jsonSchema,options:n,multiInstance:t.multiInstance,password:t.password,devMode:j.isDevMode()};return We("preCreateRxStorageInstance",p),async function(e,t){return t.multiInstance=e.multiInstance,await e.storage.createStorageInstance(t)}(t,p).then((e=>{var p=new gr(t,r,a,e,n,s,c,l,d,h,o,m);return p.prepare().then((()=>{Object.entries(o).forEach((e=>{let[t,r]=e;Object.defineProperty(p,t,{get:()=>r.bind(p)})}));var e=yt.em;return i&&0!==p.schema.version&&(e=p.migratePromise()),e})).then((()=>(We("createRxCollection",{collection:p,creator:{name:r,schema:a,storageInstance:e,instanceCreationOptions:n,migrationStrategies:s,methods:c,attachments:l,options:d,cacheReplacementPolicy:h,localDocuments:u,statics:o}}),p))).catch((t=>e.close().then((()=>Promise.reject(t)))))}))}(t);o[e]=r,this.collections[e]=r,this[e]||Object.defineProperty(this,e,{get:()=>this.collections[e]})}))),o},t.lockedRun=function(e){return this.idleQueue.wrapCall(e)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(e){throw bt("json-dump")},t.addState=function(e){throw bt("state")},t.importJSON=function(e){throw bt("json-dump")},t.backup=function(e){throw bt("backup")},t.leaderElector=function(){throw bt("leader-election")},t.isLeader=function(){throw bt("leader-election")},t.waitForLeadership=function(){throw bt("leader-election")},t.migrationStates=function(){throw bt("migration-schema")},t.destroy=async function(){return this.destroyed?yt.Dr:(this.destroyed=!0,await Fe("preDestroyRxDatabase",this),this.eventBulks$.complete(),this._subs.map((e=>e.unsubscribe())),"pseudoInstance"===this.name?yt.Dr:this.requestIdlePromise().then((()=>Promise.all(this.onDestroy.map((e=>e()))))).then((()=>Promise.all(Object.keys(this.collections).map((e=>this.collections[e])).map((e=>e.destroy()))))).then((()=>this.internalStore.close())).then((()=>xr.delete(this.storage.name+"|"+this.name))).then((()=>!0)))},t.remove=function(){return this.destroy().then((()=>async function(e,t,r){var a=O(10),n=await jr(a,t,e,{},!1,r),s=await rr(n),i=new Set;s.forEach((e=>i.add(e.data.name)));var o=Array.from(i);return await Promise.all(o.map((s=>or(t,n,a,e,s,r)))),await Fe("postRemoveRxDatabase",{databaseName:e,storage:t}),await n.remove(),o}(this.name,this.storage,this.password)))},(0,b.A)(e,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();async function jr(e,t,r,a,n,s){return await t.createStorageInstance({databaseInstanceToken:e,databaseName:r,collectionName:Qe,schema:er,options:a,multiInstance:n,password:s,devMode:j.isDevMode()})}function kr(e){let{storage:t,instanceCreationOptions:r,name:a,password:n,multiInstance:s=!0,eventReduce:i=!0,ignoreDuplicate:o=!1,options:c={},cleanupPolicy:l,allowSlowCount:d=!1,localDocuments:u=!1,hashFunction:h=de,reactivity:m}=e;We("preCreateRxDatabase",{storage:t,instanceCreationOptions:r,name:a,password:n,multiInstance:s,eventReduce:i,ignoreDuplicate:o,options:c,localDocuments:u}),o||function(e,t){var r=t.name+"|"+e;if(xr.has(r))throw N("DB8",{name:e,storage:t.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}(a,t),xr.add(t.name+"|"+a);var p=O(10);return jr(p,t,a,r,s,n).catch((e=>{throw xr.delete(t.name+"|"+a),e})).then((e=>{var f=new wr(a,p,t,r,n,s,i,c,e,h,l,d,m);return Fe("createRxDatabase",{database:f,creator:{storage:t,instanceCreationOptions:r,name:a,password:n,multiInstance:s,eventReduce:i,ignoreDuplicate:o,options:c,localDocuments:u}}).then((()=>f))}))}var _r={RxSchema:ut.prototype,RxDocument:kt,RxQuery:Zt.prototype,RxCollection:gr.prototype,RxDatabase:wr.prototype},Dr=new Set,Nr=new Set;var Rr=function(e){function t(t,r,a){var n;return(n=e.call(this,null,r)||this).id=t,n.parent=a,n}return(0,x.A)(t,e),t}(_t()),Er={get isLocal(){return!0},get allAttachments$(){throw N("LD1",{document:this})},get primaryPath(){return"id"},get primary(){return this.id},get $(){var e=n(Pr,this.parent);return this.parent.$.pipe((0,pt.p)((e=>e.documentId===this.primary)),(0,pt.p)((e=>e.isLocal)),(0,mt.T)((e=>xt(e))),(0,ft.Z)(e.docCache.getLatestDocumentData(this.primary)),(0,vt.F)(((e,t)=>e._rev===t._rev)),(0,mt.T)((t=>e.docCache.getCachedRxDocument(t))),(0,gt.t)(ue.bz))},get $$(){var e=this,t=Sr(e);return t.getReactivityFactory().fromObservable(e.$,e.getLatest()._data,t)},get deleted$$(){var e=this,t=Sr(e);return t.getReactivityFactory().fromObservable(e.deleted$,e.getLatest().deleted,t)},getLatest(){var e=n(Pr,this.parent),t=e.docCache.getLatestDocumentData(this.primary);return e.docCache.getCachedRxDocument(t)},get(e){if(e="data."+e,this._data){if("string"!=typeof e)throw R("LD2",{objPath:e});var t=v(this._data,e);return t=j.deepFreezeWhenDevMode(t)}},get$(e){if(e="data."+e,j.isDevMode()){if(e.includes(".item."))throw N("LD3",{objPath:e});if(e===this.primaryPath)throw N("LD4")}return this.$.pipe((0,mt.T)((e=>e._data)),(0,mt.T)((t=>v(t,e))),(0,vt.F)())},get$$(e){var t=Sr(this);return t.getReactivityFactory().fromObservable(this.get$(e),this.getLatest().get(e),t)},async incrementalModify(e){var t=await $r(this.parent);return t.incrementalWriteQueue.addWrite(this._data,(async t=>(t.data=await e(t.data,this),t))).then((e=>t.docCache.getCachedRxDocument(e)))},incrementalPatch(e){return this.incrementalModify((t=>(Object.entries(e).forEach((e=>{let[r,a]=e;t[r]=a})),t)))},async _saveData(e){var t=await $r(this.parent),r=this._data;return e.id=this.id,t.storageInstance.bulkWrite([{previous:r,document:e}],"local-document-save-data").then((t=>{var r=t.success[0];if(!r)throw t.error[0];(e=i(e))._rev=r._rev}))},async remove(){var e=await $r(this.parent),t=i(this._data);return t._deleted=!0,ze(e.storageInstance,{previous:this._data,document:t},"local-document-remove").then((t=>e.docCache.getCachedRxDocument(t)))}},Ir=!1,Cr=()=>{if(!Ir){Ir=!0;var e=kt;Object.getOwnPropertyNames(e).forEach((t=>{if(!Object.getOwnPropertyDescriptor(Er,t)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(Er,t,r)}}));["populate","update","putAttachment","getAttachment","allAttachments"].forEach((e=>Er[e]=(e=>()=>{throw N("LD6",{functionName:e})})(e)))}};function Sr(e){var t=e.parent;return t instanceof wr?t:t.database}var Or=new WeakMap,Pr=new WeakMap;function Tr(e){var t=e.database?e.database:e,r=e.database?e.name:"",a=(async()=>{var a=await Ar(t.token,t.storage,t.name,r,t.instanceCreationOptions,t.multiInstance);a=Ve(t,a,qr);var n=new Wt("id",e.$.pipe((0,pt.p)((e=>e.isLocal))),(t=>function(e,t){Cr();var r=new Rr(e.id,e,t);return Object.setPrototypeOf(r,Er),r.prototype=Er,r}(t,e))),s=new wt(a,"id",(()=>{}),(()=>{})),i=await t.storageToken,o=a.changeStream().subscribe((r=>{for(var a=new Array(r.events.length),n=r.events,s=e.database?e.name:void 0,o=0;o<n.length;o++){var c=n[o];a[o]={documentId:c.documentId,collectionName:s,isLocal:!0,operation:c.operation,documentData:j.deepFreezeWhenDevMode(c.documentData),previousDocumentData:j.deepFreezeWhenDevMode(c.previousDocumentData)}}var l={id:r.id,internal:!1,collectionName:e.database?e.name:void 0,storageToken:i,events:a,databaseToken:t.token,checkpoint:r.checkpoint,context:r.context,endTime:r.endTime,startTime:r.startTime};t.$emit(l)}));e._subs.push(o);var c={database:t,parent:e,storageInstance:a,docCache:n,incrementalWriteQueue:s};return Pr.set(e,c),c})();Or.set(e,a)}function $r(e){var t=Or.get(e);if(!t){var r=e.database?e.database:e,a=e.database?e.name:"";throw N("LD8",{database:r.name,collection:a})}return t}function Ar(e,t,r,a,n,s){return t.createStorageInstance({databaseInstanceToken:e,databaseName:r,collectionName:Lr(a),schema:qr,options:n,multiInstance:s,devMode:j.isDevMode()})}function Br(e){var t=Or.get(e);if(t)return Or.delete(e),t.then((e=>e.storageInstance.close()))}async function Mr(e,t,r){var a=O(10),n=await Ar(a,e,t,r,{},!1);await n.remove()}function Lr(e){return"plugin-local-documents-"+e}var qr=q({title:"RxLocalDocument",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:128},data:{type:"object",additionalProperties:!0}},required:["id","data"]});async function Wr(e,t){var r=await $r(this),a={id:e,data:t,_deleted:!1,_meta:A(),_rev:"",_attachments:{}};return ze(r.storageInstance,{document:a},"local-document-insert").then((e=>r.docCache.getCachedRxDocument(e)))}function Fr(e,t){return this.getLocal(e).then((r=>r?r.incrementalModify((()=>t)):this.insertLocal(e,t)))}async function Qr(e){var t=await $r(this),r=t.docCache,a=r.getLatestDocumentDataIfExists(e);return a?Promise.resolve(r.getCachedRxDocument(a)):He(t.storageInstance,e).then((e=>e?t.docCache.getCachedRxDocument(e):null))}function Hr(e){return this.$.pipe((0,ft.Z)(null),(0,It.Z)((async t=>t?{changeEvent:t}:{doc:await this.getLocal(e)})),(0,It.Z)((async t=>{if(t.changeEvent){var r=t.changeEvent;return r.isLocal&&r.documentId===e?{use:!0,doc:await this.getLocal(e)}:{use:!1}}return{use:!0,doc:t.doc}})),(0,pt.p)((e=>e.use)),(0,mt.T)((e=>e.doc)))}var zr={name:"local-documents",rxdb:!0,prototypes:{RxCollection:e=>{e.insertLocal=Wr,e.upsertLocal=Fr,e.getLocal=Qr,e.getLocal$=Hr},RxDatabase:e=>{e.insertLocal=Wr,e.upsertLocal=Fr,e.getLocal=Qr,e.getLocal$=Hr}},hooks:{createRxDatabase:{before:e=>{e.creator.localDocuments&&Tr(e.database)}},createRxCollection:{before:e=>{e.creator.localDocuments&&Tr(e.collection)}},preDestroyRxDatabase:{after:e=>Br(e)},postDestroyRxCollection:{after:e=>Br(e)},postRemoveRxDatabase:{after:e=>Mr(e.storage,e.databaseName,"")},postRemoveRxCollection:{after:e=>Mr(e.storage,e.databaseName,e.collectionName)}},overwritable:{}};let Kr;function Zr(){return"undefined"!=typeof window&&window.indexedDB}function Ur(){return Kr||(Kr=(async()=>{!function(e){if(We("preAddRxPlugin",{plugin:e,plugins:Dr}),!Dr.has(e)){if(Nr.has(e.name))throw N("PL3",{name:e.name,plugin:e});if(Dr.add(e),Nr.add(e.name),!e.rxdb)throw R("PL1",{plugin:e});e.init&&e.init(),e.prototypes&&Object.entries(e.prototypes).forEach((e=>{let[t,r]=e;return r(_r[t])})),e.overwritable&&Object.assign(j,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach((e=>{let[t,r]=e;r.after&&qe[t].push(r.after),r.before&&qe[t].unshift(r.before)}))}}(zr);var e;return await kr({name:"rxdb-landing-v3",localDocuments:!0,storage:(void 0===e&&(e={}),new lt(e))})})()),Kr}const Jr=["#e6008d","#8d2089","#5f2688"]},6492:(e,t,r)=>{r.d(t,{d:()=>s});var a=r(4589),n=r(4848);function s(){const e=[{label:"Readwise, USA",description:"We use RxDB because it works across multiple platforms and we need to store of a great deal of data, some users have tens of thousands of documents! RxDB was the only cross-platform, offline-first solution with good enough performance to meet our needs.",href:"https://readwise.io/",target:"_blank",logo:"/files/companies/readwise.svg",logoStyle:"slider-logo-black lazyload"},{label:"myAgro, Africa",description:"Transitioning to RxDB was a breath of fresh air due to its comprehensive features, including schema migration, real-time replication, conflict resolution, and reactive programming.",href:"https://www.myagro.org/",target:"_blank",logo:"/files/companies/myagro.svg",logoStyle:"slider-logo-black lazyload"},{label:"MoreApp, Germany",description:"We provide a mobile app that is used by people in the\n            field to fill in valuable information like inspections,\n            surveys and audits. Our users don't always have access to the internet, building from an Offline-first approach with RxDB allows us to have the data integrity we need without being online.",href:"https://moreapp.com/",target:"_blank",logo:"/files/companies/moreapp.png",logoStyle:"slider-logo-black lazyload"},{label:"ALTGRAS, Africa",description:"We use RxDB to create applications capable of being\n            used in the most remote areas where Internet access is\n            really a challenge.",href:"https://altgras.com/",target:"_blank",logo:"/files/companies/altgras.png",logoStyle:"slider-logo-white lazyload"},{label:"WooCommerce POS, Australia",description:"We use RxDB to provide an offline first, cross platform\n            point of sale system. With RxDB we could create a web-, desktop- and mobile app using the same code base.",href:"https://wcpos.com/",target:"_blank",logo:"/files/companies/woopos.png",logoStyle:"slider-logo-black lazyload"},{label:"atroo GmbH, Germany",description:"RxDB is a main component in building offline-ready\n            multichannel apps. It has become our default stack for\n            this kind of apps.",href:"https://atroo.de/",target:"_blank",logo:"/files/companies/atroo.png",logoStyle:"slider-logo-black lazyload"},{label:"Nutrien, Canada",description:"With RxDB we have built an offline capable Progressive Web Application that is used by our borer operators to report on conditions at the mineface.",href:"https://www.nutrien.com/",target:"_blank",logo:"/files/companies/nutrien.svg",logoStyle:"slider-logo-black lazyload"}];return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.A,{dots:!0,centerMode:!0,centerPadding:"180px",infinite:!0,arrows:!1,adaptiveHeight:!0,speed:500,slidesToShow:3,slidesToScroll:1,initialSlide:0,responsive:[{breakpoint:1460,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0,dots:!0,centerPadding:"180px"}},{breakpoint:1124,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0,dots:!0,centerPadding:"100px"}},{breakpoint:900,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0,dots:!0,centerPadding:"40px"}},{breakpoint:690,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0,dots:!0,centerMode:!1,centerPadding:"0px"}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,infinite:!1,dots:!0,swipeToSlide:!0,centerMode:!1,centerPadding:"0px"}}],children:e.map((e=>(0,n.jsxs)("div",{className:"slider-content",children:[(0,n.jsx)("img",{src:"/img/quote.svg",className:"review-img",alt:"quote"}),(0,n.jsx)("h3",{children:e.description}),(0,n.jsxs)("div",{className:"slider-profile",children:[(0,n.jsx)("img",{className:e.logoStyle,"data-src":e.logo,alt:"logo"}),(0,n.jsxs)("div",{className:"slider-info",children:[(0,n.jsx)("p",{className:"developer",children:e.label}),(0,n.jsx)("a",{href:e.href,target:e.target?"_blank":"_self",className:"company-link",children:e.href})]})]})]},e.label)))})})}},1527:(e,t,r)=>{function a(e,t){if(!window.trigger)throw new Error("window.trigger not defined");return window.trigger(e,t)}r.d(t,{h:()=>a})},7479:(e,t,r)=>{r.r(t),r.d(t,{default:()=>P});var a=r(4586),n=r(4043),s=r(5260),i=(r(6879),r(4157)),o=r(4629),c=r(7688),l=r(4134),d=r(2442),u=r(9739),h=r(1693),m=r(7708),p=Array.isArray;function f(e){return(0,m.T)((function(t){return function(e,t){return p(t)?e.apply(void 0,(0,o.fX)([],(0,o.zs)(t))):e(t)}(e,t)}))}var v=["addListener","removeListener"],g=["addEventListener","removeEventListener"],y=["on","off"];function b(e,t,r,a){if((0,h.T)(r)&&(a=r,r=void 0),a)return b(e,t,r).pipe(f(a));var n=(0,o.zs)(function(e){return(0,h.T)(e.addEventListener)&&(0,h.T)(e.removeEventListener)}(e)?g.map((function(a){return function(n){return e[a](t,n,r)}})):function(e){return(0,h.T)(e.addListener)&&(0,h.T)(e.removeListener)}(e)?v.map(x(e,t)):function(e){return(0,h.T)(e.on)&&(0,h.T)(e.off)}(e)?y.map(x(e,t)):[],2),s=n[0],i=n[1];if(!s&&(0,u.X)(e))return(0,d.Z)((function(e){return b(e,t,r)}))((0,c.Tg)(e));if(!s)throw new TypeError("Invalid event target");return new l.c((function(e){var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.next(1<t.length?t:t[0])};return s(t),function(){return i(t)}}))}function x(e,t){return function(r){return function(a){return e[r](t,a)}}}var w=r(5520),j=r(3337),k=r(1753),_=r(5734),D=r(574),N=r(6540),R=r(1527),E=r(6492),I=r(4848);function C(e){console.log("----"),console.dir(e);const t=e.opacity?e.opacity:1,r={"":{boxSizing:"border-box"},container:{border:"1px solid rgb(241 241 241 / "+100*t+"%)",borderTopLeftRadius:"7px",borderTopRightRadius:"7px",borderBottomLeftRadius:"3px",borderBottomRightRadius:"3px",overflow:"hidden",backgroundClip:"padding-box"},row:{padding:"10px",background:"#f1f1f1",opacity:t},left:{float:"left",width:"15%"},right:{marginTop:3,float:"left",width:"10%"},middle:{float:"left",width:"75%"},row_after:{content:'""',display:"table",clear:"both"},dot:{marginTop:"4px",marginRight:2,height:"12px",width:"12px",backgroundColor:"#bbb",borderRadius:"50%",display:"inline-block"},input_type_text:{width:"100%",borderRadius:"3px",border:"none",backgroundColor:"white",marginTop:"-8px",height:"25px",color:"#666",padding:"5px"},bar:{width:"17px",height:"3px",backgroundColor:"#aaa",margin:"3px 0",display:"block"},content:{padding:"10px",backgroundColor:"var(--bg-color)",minWidth:335},input:{backgroundColor:"white",borderRadius:4,borderWidth:1,paddingTop:3}};return(0,I.jsxs)("div",{style:r.container,children:[(0,I.jsxs)("div",{style:r.row,children:[(0,I.jsxs)("div",{style:{...r.column,...r.left},children:[(0,I.jsx)("span",{style:{...r.dot,background:"#ED594A"}}),(0,I.jsx)("span",{style:{...r.dot,background:"#FDD800"}}),(0,I.jsx)("span",{style:{...r.dot,background:"#5AC05A"}})]}),(0,I.jsx)("div",{style:{...r.column,...r.middle},children:(0,I.jsx)("input",{type:"text",value:"",disabled:!0,style:r.input})}),(0,I.jsx)("div",{style:{...r.column,...r.right},children:(0,I.jsxs)("div",{style:{float:"right"},children:[(0,I.jsx)("span",{style:r.bar}),(0,I.jsx)("span",{style:r.bar}),(0,I.jsx)("span",{style:r.bar})]})}),(0,I.jsx)("div",{className:"clear"})]}),(0,I.jsx)("div",{style:r.content,children:e.children})]})}let S=!1;async function O(){if(S)return;S=!0,console.log("start animation");if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void console.log("reducedMotion is set to true");if(!(0,D.IA)())return;const e=await(0,D.C3)();try{await e.insertLocal("beatingvalues",{beatPeriod:0,text1:"JavaScript",text2:"you deserve",color:D.Tj[0]})}catch(p){}const t=(0,j.ZN)(await e.getLocal("beatingvalues"));(async()=>{for(await(0,k.ND)(A);S;){const e=B(),r=(0,k.ND)(e.timeToNextPeriod);if(e.period%2==0)try{await t.incrementalModify((t=>(t.beatPeriod>=e.period||(t.beatPeriod=e.period,t.color=D.Tj[e.period%3],e.period%4==0?t.text1=F(T,e.period)[0]:t.text2=F($,e.period)[0]),t)))}catch(p){}await r}})();const r=await e.upsertLocal("mousepos",{x:0,y:0,time:0});let a=[];window.addEventListener("mousemove",(e=>{a=[e.clientX,e.clientY]})),(0,i.h)(b(window,"mousemove"),b(window,"scroll"),b(window,"resize")).subscribe((()=>{r.incrementalPatch({x:a[0],y:a[1],time:(0,_.t)()})})),function(e){const t=document.getElementsByClassName("tilt-to-mouse"),r=100;function a(e,t,a){const n=a.getBoundingClientRect(),s=-(t-n.y-n.height/2)/r,i=(e-n.x-n.width/2)/r;return`perspective(150px)    rotateX(${q(s)}deg)    rotateY(${q(i)}deg) `}function n(e,t){e.style.transform=a.apply(null,t)}e.$.subscribe((e=>{e._data.data.time&&Array.from(t).forEach((t=>{if(!H(t))return;n(t,(0,j.ZN)([e._data.data.x,e._data.data.y]).concat([t]))}))}))}(r),function(e){const t=document.getElementsByClassName("enlarge-on-mouse");function r(e){const t=e.getBoundingClientRect();return{centerX:t.left+t.width/2,centerY:t.top+t.height/2,width:t.width,height:t.height}}function a(e,t){const r=`scale(${t})`;e.style.transform=r}e.$.pipe((0,m.T)((e=>e._data))).subscribe((e=>{e.data.time&&e.data.x&&e.data.y&&Array.from(t).forEach((t=>{if(!H(t))return;const n=r(t),s=e.data.x-n.centerX,i=e.data.y-n.centerY,o=Math.sqrt(s*s+i*i);function c(e){return 1.9^e}let l=1+n.width/2/c(o+300);l>1.5&&(l=1.5),l<1.01&&(l=1),a(t,l)}))}))}(r);const n=document.getElementsByClassName("beating"),s=document.getElementsByClassName("beating-first"),o=document.getElementsByClassName("beating-second"),c=document.getElementsByClassName("beating-number"),l=document.getElementsByClassName("beating-color"),d=document.getElementsByClassName("beating-color-string"),u=[];let h=0;B(),t.$.pipe((0,m.T)((e=>e._data.data)),(0,w.F)(((e,t)=>JSON.stringify(e)===JSON.stringify(t)))).subscribe((e=>{u.forEach((function(e){e(h)})),h+=1;const t=e.color;Array.from(l).forEach((function(e){e.style.backgroundColor=t})),Array.from(d).forEach((function(e){e.innerHTML=t}))})),u.push((function(){Array.from(n).forEach((function(e){e.style.animationDuration=A+"ms",e.classList.remove("animation"),e.offsetWidth,e.classList.add("animation")})),Array.from(s).forEach((function(e){e.style.animationDuration=A+"ms",e.classList.remove("animation"),e.offsetWidth,e.classList.add("animation")})),Array.from(o).forEach((function(e){e.style.animationDuration=A+"ms",e.classList.remove("animation"),e.offsetWidth,e.classList.add("animation")}))})),u.push((function(){Array.from(c).forEach((function(e){W()&&W()&&setTimeout((function(){const t=parseFloat(e.innerHTML)+1;e.innerHTML=t+""}),105)}))}))}function P(){const{siteConfig:e}=(0,a.A)();return(0,N.useEffect)((()=>(O(),()=>{console.log("stop animation"),S=!1}))),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(s.A,{children:(0,I.jsx)("body",{className:"homepage"})}),(0,I.jsx)(n.A,{title:`${e.title}`,description:"RxDB is a fast, local-first NoSQL-database for JavaScript Applications like Websites, hybrid Apps, Electron-Apps, Progressive Web Apps and Node.js",children:(0,I.jsxs)("main",{children:[(0,I.jsxs)("div",{className:"block first hero centered dark",children:[(0,I.jsxs)("div",{className:"content",children:[(0,I.jsxs)("h1",{style:{fontSize:"3.5em",fontWeight:400,textAlign:"center",lineHeight:"120%",letterSpacing:-1},children:["The local ",(0,I.jsx)("b",{className:"underline",children:"Database"})," for"," ",(0,I.jsx)("b",{className:"underline",children:"JavaScript"})," Applications"]}),(0,I.jsxs)("div",{className:"inner",children:[(0,I.jsxs)("div",{className:"half left",children:[(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsxs)("ul",{className:"checked",children:[(0,I.jsxs)("li",{children:[(0,I.jsx)("b",{children:"Offline Support"}),": Store data locally on your users device to build applications that work even when there is ",(0,I.jsx)("u",{children:"no internet access"}),"."]}),(0,I.jsxs)("li",{children:[(0,I.jsx)("b",{children:"Supports all JavaScript runtimes"}),": With the flexible RxDB storage layer you can run the same code in ",(0,I.jsx)("u",{children:"Browsers"}),", ",(0,I.jsx)("u",{children:"Node.js"}),", ",(0,I.jsx)("u",{children:"Electron"}),","," ",(0,I.jsx)("u",{children:"React-Native"}),", ",(0,I.jsx)("u",{children:"Capacitor"}),", ",(0,I.jsx)("u",{children:"Bun"})," and ",(0,I.jsx)("u",{children:"Deno"}),"."]}),(0,I.jsxs)("li",{children:[(0,I.jsx)("b",{children:"Realtime Queries"}),": With RxDB you can observe query results and even single document fields everything which makes building ",(0,I.jsx)("u",{children:"realtime applications"})," effortless."]}),(0,I.jsxs)("li",{children:[(0,I.jsx)("b",{children:"Realtime Replication"}),": Run a two-way realtime replication with one of the many replication plugins. Also making your ",(0,I.jsx)("u",{children:"custom backend compatible"})," is pretty simple."]}),(0,I.jsxs)("li",{children:[(0,I.jsx)("b",{children:"Great Performance"}),": Years of performance optimization made RxDB one of the ",(0,I.jsx)("u",{children:"fastest"})," ways to store and query data inside of JavaScript."]})]}),(0,I.jsx)("div",{className:"clear"}),(0,I.jsx)("br",{})]}),(0,I.jsx)("div",{className:"half right",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,I.jsx)("div",{style:{paddingLeft:80,paddingRight:80},children:(0,I.jsx)(C,{opacity:.3,children:(0,I.jsx)("img",{src:"/files/logo/logo_text.svg",className:"hero-img",style:{padding:40,paddingLeft:80,paddingRight:80},alt:"rxdb-image"})})})}),(0,I.jsx)("div",{className:"clear"})]})]}),(0,I.jsxs)("div",{className:"content",children:[(0,I.jsx)("a",{className:"button",href:"/quickstart.html",onClick:()=>(0,R.h)("start_now",.4),children:"Try RxDB for free"}),(0,I.jsxs)("a",{className:"button light",href:"/code",target:"_blank",children:[(0,I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",className:"star-icon","aria-hidden":"true",fill:"currentColor",style:{width:14,marginRight:8,marginLeft:-6,float:"left",marginTop:2},children:(0,I.jsx)("path",{d:"M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"})}),"Star (20,172)"]}),(0,I.jsx)("div",{className:"clear"}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{})]})]}),(0,I.jsxs)("div",{className:"block reviews",children:[(0,I.jsx)("div",{className:"content centered",children:(0,I.jsxs)("div",{className:"inner",children:[(0,I.jsxs)("h2",{children:["Used by ",(0,I.jsx)("b",{className:"underline",children:"many"})]}),(0,I.jsxs)("p",{children:["RxDB is a proven technology used by thousands of developers worldwide. ",(0,I.jsx)("br",{}),"With its flexibility, RxDB is used in a diverse range of apps and services."]}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{})]})}),(0,I.jsx)(E.d,{})]}),(0,I.jsx)("a",{href:"/chat",target:"_blank",children:(0,I.jsxs)("div",{className:"trophy discord",children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/discord.svg",alt:"RxDB Discord chat"}),(0,I.jsxs)("div",{style:{flex:1},children:[(0,I.jsx)("div",{className:"subtitle",children:"Chat on"}),(0,I.jsx)("div",{className:"title",children:"Discord"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{className:"valuetitle",children:"members"}),(0,I.jsxs)("div",{className:"value",children:["747",(0,I.jsx)("div",{className:"arrow-up",children:" "})]})]})]})}),(0,I.jsx)("div",{className:"block second dark",children:(0,I.jsxs)("div",{className:"content",children:[(0,I.jsxs)("h2",{children:["Realtime applications ",(0,I.jsx)("b",{className:"underline",children:"made easy"})]}),(0,I.jsxs)("p",{children:["From the results of a query, to a single field of a document, with RxDB you can ",(0,I.jsx)("b",{children:"observe everything"}),". This enables you to build realtime applications ",(0,I.jsx)("b",{children:"fast"})," and ",(0,I.jsx)("b",{children:"reliable"}),". It does not matter if the data was changed by"," ",(0,I.jsx)("b",{children:"a user event"}),", ",(0,I.jsx)("b",{children:"another browser tab"})," or by the",(0,I.jsx)("b",{children:" replication"}),"."," ","Whenever your data changes, your UI reflects the new state. You can either use ",(0,I.jsx)("b",{children:"RxJS"})," or add ",(0,I.jsx)("a",{href:"/reactivity.html",target:"_blank",children:"custom reactiveness libraries"})," like signals or other state management."]}),(0,I.jsxs)("div",{className:"inner",children:[(0,I.jsxs)("div",{className:"code half",children:[(0,I.jsxs)("fieldset",{className:"samp-wrapper",style:{backgroundColor:"var(--bg-color)"},children:[(0,I.jsx)("legend",{children:"Write"}),(0,I.jsxs)("samp",{children:[(0,I.jsx)("span",{className:"cm-keyword",children:"await "}),(0,I.jsx)("span",{className:"cm-variable",children:"collection"}),".",(0,I.jsx)("span",{className:"cm-method",children:"upsert"}),"(","{",(0,I.jsx)("br",{}),(0,I.jsx)("span",{className:"cm-property",children:"\xa0 id"}),": ",(0,I.jsx)("span",{className:"cm-string",children:"'foobar'"}),",",(0,I.jsx)("br",{}),(0,I.jsx)("span",{className:"cm-property",children:"\xa0 color"}),": ",(0,I.jsxs)("span",{className:"cm-string",children:["'",(0,I.jsx)("span",{className:"beating-color-string beating-color",children:"#e6008d"}),"'"]}),(0,I.jsx)("br",{}),"}",");"]})]}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsxs)("fieldset",{className:"samp-wrapper",style:{backgroundColor:"var(--bg-color)"},children:[(0,I.jsx)("legend",{children:"Observe"}),(0,I.jsxs)("samp",{style:{backgroundColor:"var(--bg-color)"},children:[(0,I.jsx)("span",{className:"cm-keyword",children:"await "}),(0,I.jsx)("span",{className:"cm-variable",children:"collection"}),".",(0,I.jsxs)("span",{className:"cm-method",children:["findOne(",(0,I.jsx)("span",{className:"cm-string",children:"'foobar'"}),")"]}),(0,I.jsx)("br",{}),"\xa0.",(0,I.jsx)("span",{className:"cm-property",children:"$"}),(0,I.jsx)("span",{className:"cm-comment",children:" // get observable"}),(0,I.jsx)("br",{}),"\xa0.",(0,I.jsx)("span",{className:"cm-method",children:"subscribe"}),"(",(0,I.jsx)("span",{className:"cm-def",children:"d"}),(0,I.jsx)("span",{className:"cm-operator",children:" =>"})," ","{",(0,I.jsx)("br",{}),(0,I.jsx)("span",{className:"cm-variable",children:"\xa0\xa0 screen"}),".",(0,I.jsx)("span",{className:"cm-property",children:"backgroundColor"}),(0,I.jsx)("span",{className:"cm-operator",children:" = "}),(0,I.jsx)("span",{className:"cm-variable",children:"d"}),".",(0,I.jsx)("span",{className:"cm-property beating-color",children:"color"}),";",(0,I.jsx)("br",{}),"\xa0","}",");"]})]})]}),(0,I.jsx)("div",{className:"canvas half",children:(0,I.jsxs)("div",{className:"content-canvas",children:[(0,I.jsx)("div",{className:"device tablet",style:{marginLeft:481,marginTop:117},children:(0,I.jsx)("div",{className:"beating-color",children:(0,I.jsx)("img",{src:"./files/logo/logo.svg",className:"beating logo",alt:"RxDB"})})}),(0,I.jsx)("div",{className:"device desktop",style:{marginTop:"0%"},children:(0,I.jsx)("div",{className:"beating-color",children:(0,I.jsx)("img",{src:"./files/logo/logo.svg",className:"beating logo",alt:"RxDB"})})}),(0,I.jsxs)("div",{className:"device server",style:{marginLeft:0,marginTop:168},children:[(0,I.jsx)("div",{className:"beating-color one"}),(0,I.jsx)("div",{className:"beating-color two"}),(0,I.jsx)("div",{className:"beating-color three"})]})]})})]})]})}),(0,I.jsx)("a",{href:"https://twitter.com/intent/user?screen_name=rxdbjs",onClick:()=>(0,R.h)("twitter_trophy_click",.2),target:"_blank",children:(0,I.jsxs)("div",{className:"trophy twitter",children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/twitter-blue.svg",alt:"RxDB Twitter"}),(0,I.jsxs)("div",{style:{flex:1},children:[(0,I.jsx)("div",{className:"subtitle",children:"Follow on"}),(0,I.jsx)("div",{className:"title",children:"Twitter"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{className:"valuetitle",children:"followers"}),(0,I.jsxs)("div",{className:"value",children:["2843",(0,I.jsx)("div",{className:"arrow-up",children:" "})]})]})]})}),(0,I.jsx)("div",{className:"block replication",children:(0,I.jsxs)("div",{className:"content",children:[(0,I.jsxs)("div",{className:"half left",children:[(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsxs)("h2",{children:["Replicate ",(0,I.jsx)("b",{children:"with your existing infrastructure"})]}),(0,I.jsxs)("p",{children:["RxDB supports replication with a"," ",(0,I.jsx)("a",{href:"/replication-couchdb.html",target:"_blank",children:"CouchDB"})," ","server or any custom"," ",(0,I.jsx)("a",{href:"/replication-graphql.html",target:"_blank",children:"GraphQL"})," ","endpoint which smoothly integrates with your existing infrastructure. Also you can use the replication primitives plugin to create custom replications over any protocol like"," ",(0,I.jsx)("a",{href:"/replication-http.html",target:"_blank",children:"HTTP"}),","," ",(0,I.jsx)("a",{href:"/replication-websocket.html",target:"_blank",children:"Websocket"}),","," ",(0,I.jsx)("a",{href:"/replication-webrtc.html",target:"_blank",children:"WebRTC"})," ","or"," ",(0,I.jsx)("a",{href:"/replication-firestore.html",target:"_blank",children:"Firestore"}),"."]})]}),(0,I.jsx)("div",{className:"half right",children:(0,I.jsxs)("div",{className:"replication-icons",children:[(0,I.jsx)("img",{"data-src":"./files/logo/logo.svg",alt:"RxDB",className:"replicate-logo tilt-to-mouse lazyload"}),(0,I.jsx)("a",{href:"/replication-graphql.html",target:"_blank",children:(0,I.jsx)("div",{className:"neumorphism-circle-xl centered replicate-graphql enlarge-on-mouse",children:(0,I.jsx)("img",{"data-src":"./files/icons/graphql-text.svg",alt:"GraphQL",className:"protocol lazyload"})})}),(0,I.jsx)("a",{href:"/replication-couchdb.html",target:"_blank",children:(0,I.jsx)("div",{className:"neumorphism-circle-xl centered replicate-couchdb enlarge-on-mouse",children:(0,I.jsx)("img",{"data-src":"./files/icons/couchdb-text.svg",alt:"CouchDB",className:"protocol lazyload"})})}),(0,I.jsx)("a",{href:"/replication-http.html",target:"_blank",children:(0,I.jsxs)("div",{className:"neumorphism-circle-xs centered replicate-rest enlarge-on-mouse",children:["{"," HTTP ","}"]})}),(0,I.jsx)("a",{href:"/replication-websocket.html",target:"_blank",children:(0,I.jsx)("div",{className:"neumorphism-circle-xs centered replicate-websocket enlarge-on-mouse",children:"websocket"})}),(0,I.jsx)("a",{href:"/replication-webrtc.html",target:"_blank",children:(0,I.jsx)("div",{className:"neumorphism-circle-xs centered replicate-webrtc enlarge-on-mouse",children:"WebRTC"})})]})}),(0,I.jsx)("div",{className:"clear"})]})}),(0,I.jsx)("a",{href:"/code",target:"_blank",children:(0,I.jsxs)("div",{className:"trophy github",children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/github-star-with-logo.svg",alt:"RxDB github star"}),(0,I.jsxs)("div",{style:{flex:1},children:[(0,I.jsx)("div",{className:"subtitle",children:"Open Source on"}),(0,I.jsx)("div",{className:"title",children:"GitHub"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{className:"valuetitle",children:"stars"}),(0,I.jsxs)("div",{className:"value",children:["20172",(0,I.jsx)("div",{className:"arrow-up",children:" "})]})]})]})}),(0,I.jsxs)("div",{className:"block offline-first dark",children:[(0,I.jsx)("div",{className:"offline-image-wrapper",children:(0,I.jsx)("img",{"data-src":"files/icons/wifi/wifi_1a202c.svg",className:"offline-image beating-second lazyload",alt:"offline"})}),(0,I.jsxs)("div",{className:"content",children:[(0,I.jsxs)("h2",{children:["Online ",(0,I.jsx)("b",{className:"underline",children:"is optional"})]}),(0,I.jsxs)("div",{className:"full-width",children:[(0,I.jsx)("div",{className:"half left",children:(0,I.jsxs)("p",{children:["RxDB follows the"," ",(0,I.jsx)("a",{href:"/offline-first.html",target:"_blank",children:"Offline First"})," ","paradigm where an application must work as well offline as it does online. This is done by persisting data locally on the client side and replicating it in the background. RxDB can even be used solely on the client side, with no backend at all."]})}),(0,I.jsx)("div",{className:"half right",children:(0,I.jsxs)("ul",{className:"checked",children:[(0,I.jsxs)("li",{children:["Your application still ",(0,I.jsx)("b",{children:"works offline"})]}),(0,I.jsxs)("li",{children:["Increases ",(0,I.jsx)("b",{children:"perceived performance"})]}),(0,I.jsxs)("li",{children:["Easier and ",(0,I.jsx)("b",{children:"faster implementation"})]}),(0,I.jsxs)("li",{children:["Needs less backend resources and ",(0,I.jsx)("b",{children:"scales better"})]})]})})]})]})]}),(0,I.jsx)("div",{className:"block frameworks",children:(0,I.jsxs)("div",{className:"content",children:[(0,I.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/angular",target:"_blank",children:(0,I.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"-10%",left:"10%"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/angular.svg",alt:"angular"}),"Angular"]})}),(0,I.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"10%",left:"58%"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/capacitor.svg",alt:"capacitor"}),"Capacitor"]}),(0,I.jsxs)("div",{className:"neumorphism-circle-s circle centered enlarge-on-mouse",style:{top:"-4%",left:"44%"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/deno.svg",alt:"deno"}),"Deno"]}),(0,I.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/node",target:"_blank",children:(0,I.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"-5%",left:"85%"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/nodejs.svg",alt:"Node.js"}),"Node.js"]})}),(0,I.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/react",target:"_blank",children:(0,I.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"4%",left:"26%"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/react.svg",alt:"React"}),"React"]})}),(0,I.jsxs)("div",{className:"neumorphism-circle-s circle centered enlarge-on-mouse",style:{top:"15%",left:"90%",marginLeft:"-35px"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/svelte.svg",alt:"Svelte"}),"Svelte"]}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsxs)("h2",{children:["Flexible ",(0,I.jsx)("b",{className:"underline",children:"storage layer"})]}),(0,I.jsxs)("p",{children:["RxDB is based on a storage interface that enables you to swap out the underlying storage engine. This increases code reuse because the same database code can be used in ",(0,I.jsx)("b",{children:"any JavaScript runtime"})," ","by just switching out the storage settings.",(0,I.jsx)("br",{})]}),(0,I.jsxs)("div",{className:"below-text",children:[(0,I.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/electron",target:"_blank",children:(0,I.jsxs)("div",{className:"neumorphism-circle-s circle centered enlarge-on-mouse",style:{top:"2%",left:"18%"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/electron.svg",alt:"electron"}),"Electron"]})}),(0,I.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/vue",target:"_blank",children:(0,I.jsxs)("div",{className:"neumorphism-circle-s circle centered enlarge-on-mouse",style:{top:"3%",left:"45%"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/vuejs.svg",alt:"Vue.js"}),"Vue.js"]})}),(0,I.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/ionic2",target:"_blank",children:(0,I.jsxs)("div",{className:"neumorphism-circle-s circle centered enlarge-on-mouse",style:{top:"2%",left:"71%"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/ionic.svg",alt:"ionic"}),"Ionic"]})}),(0,I.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"46%",left:"11%"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/nativescript.svg",alt:"NativeScript"}),"NativeScript"]}),(0,I.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/react-native",target:"_blank",children:(0,I.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"45%",left:"35%"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/react.svg",alt:"React Native"}),"React Native"]})}),(0,I.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"45%",left:"62%"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/nextjs.svg",alt:"Next.js"}),"Next.js"]}),(0,I.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/flutter",target:"_blank",children:(0,I.jsxs)("div",{className:"neumorphism-circle-s circle centered enlarge-on-mouse",style:{top:"40%",left:"86%"},children:[(0,I.jsx)("img",{className:"lazyload","data-src":"./files/icons/flutter.svg",alt:"Flutter"}),"Flutter"]})})]})]})}),(0,I.jsx)("div",{className:"block sixth dark",children:(0,I.jsxs)("div",{className:"content",children:[(0,I.jsx)("h2",{children:"Pricing Models"}),(0,I.jsx)("br",{}),(0,I.jsx)("div",{className:"inner",children:(0,I.jsxs)("div",{className:"buy-options",children:[(0,I.jsx)("div",{className:"buy-option bg-gradient-left-top",children:(0,I.jsxs)("div",{className:"buy-option-inner",children:[(0,I.jsxs)("div",{className:"buy-option-title",children:[(0,I.jsx)("h2",{children:"Open Source Core"}),(0,I.jsx)("div",{className:"price",children:"for Hobbyists and Prototypes"})]}),(0,I.jsx)("div",{className:"buy-option-features",children:(0,I.jsxs)("p",{children:["The RxDB Open Core provides a robust and reliable database engine that's freely accessible to everyone.",(0,I.jsx)("br",{}),"This core includes all the essential features you need to develop efficient, real-time applications like storages, replication and other plugins.",(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),"Our open-core approach encourages a vibrant community of developers, fostering collaboration and innovation."]})}),(0,I.jsx)("a",{href:"/code",target:"_blank",rel:"noopener",onClick:()=>(0,R.h)("get_the_code_main_page",.8),children:(0,I.jsx)("div",{className:"buy-option-action bg-top hover-shadow-top",children:"Get the Code"})})]})}),(0,I.jsx)("div",{className:"buy-option bg-gradient-right-top",children:(0,I.jsxs)("div",{className:"buy-option-inner",children:[(0,I.jsxs)("div",{className:"buy-option-title",children:[(0,I.jsx)("h2",{children:"Premium Plugins"}),(0,I.jsx)("div",{className:"price",children:"for professional Developers"})]}),(0,I.jsxs)("div",{className:"buy-option-features",children:[(0,I.jsx)("p",{children:"Our Premium Plugins are essential for professionals using RxDB. They boost the basic features of RxDB with significant performance improvements and reduced bundle size."}),(0,I.jsxs)("ul",{children:[(0,I.jsxs)("li",{children:[(0,I.jsx)("b",{children:"Enhanced Storage Plugins"})," to speed up data processing significantly."]}),(0,I.jsxs)("li",{children:[(0,I.jsx)("b",{children:"Robust Encryption"})," secures your data with state-of-the-art encryption methods."]}),(0,I.jsxs)("li",{children:[(0,I.jsx)("b",{children:"Advanced Metrics Logging"})," provides detailed insights for performance monitoring."]})]})]}),(0,I.jsx)("a",{href:"/premium",onClick:()=>(0,R.h)("request_premium_main_page",3),children:(0,I.jsx)("div",{className:"buy-option-action bg-middle hover-shadow-middle",children:"Request Premium"})})]})}),(0,I.jsx)("div",{className:"buy-option bg-gradient-left-top",children:(0,I.jsxs)("div",{className:"buy-option-inner",children:[(0,I.jsxs)("div",{className:"buy-option-title",children:[(0,I.jsx)("h2",{children:"Consulting"}),(0,I.jsx)("div",{className:"price",children:"Get Professional Support"})]}),(0,I.jsx)("div",{className:"buy-option-features",children:(0,I.jsxs)("p",{children:["Unlock the full potential of RxDB with our tailored consulting services. Our experts collaborate directly with your team to optimize your use of RxDB, ensuring seamless integration and peak performance.",(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),"From quick ",(0,I.jsx)("b",{children:"one-time support sessions"})," to ",(0,I.jsx)("b",{children:"full project"})," development and ",(0,I.jsx)("b",{children:"custom feature"})," implementation, we're here to accelerate your project's success. Let's build something incredible together."]})}),(0,I.jsx)("a",{href:"/consulting",onClick:()=>(0,R.h)("consulting_session_request_main_page",4),children:(0,I.jsx)("div",{className:"buy-option-action bg-bottom hover-shadow-bottom",children:"Get in Contact"})})]})})]})})]})}),(0,I.jsx)("div",{className:"block last",children:(0,I.jsxs)("div",{className:"content",children:[(0,I.jsxs)("h2",{children:["Start using ",(0,I.jsx)("b",{className:"underline",children:"RxDB"})," today"]}),(0,I.jsxs)("div",{className:"buttons full-width",children:[(0,I.jsx)("a",{href:"/quickstart.html",rel:"noopener",target:"_blank",onClick:()=>(0,R.h)("start_now_main_bottom",.4),children:(0,I.jsx)("div",{className:"button get-premium",style:{left:"50%",top:"20%",marginLeft:"-122px"},children:"Start now"})}),(0,I.jsx)("a",{href:"/newsletter",rel:"noopener",target:"_blank",onClick:()=>(0,R.h)("newsletter_main_bottom",.4),children:(0,I.jsx)("div",{className:"button",style:{left:"25%",marginLeft:"-90px"},children:"Get the Newsletter"})}),(0,I.jsx)("a",{href:"/chat",rel:"noopener",target:"_blank",onClick:()=>(0,R.h)("join_chat_main_bottom",.4),children:(0,I.jsx)("div",{className:"button",style:{left:"77%",top:"6%",marginLeft:"-70.5px"},children:"Join the Chat"})}),(0,I.jsx)("a",{href:"/premium",onClick:()=>(0,R.h)("get_premium_main_bottom",.4),children:(0,I.jsx)("div",{className:"button",style:{top:"40%",left:"20%",marginLeft:"-70.5px"},children:"Get Premium"})}),(0,I.jsx)("a",{href:"https://twitter.com/intent/user?screen_name=rxdbjs",rel:"noopener",target:"_blank",onClick:()=>(0,R.h)("follow_twitter_main_bottom",.4),children:(0,I.jsx)("div",{className:"button",style:{top:"44%",left:"73%",marginLeft:"-85px"},children:"Follow on Twitter"})}),(0,I.jsx)("a",{href:"/code",rel:"noopener",target:"_blank",onClick:()=>(0,R.h)("get_code_main_bottom",.4),children:(0,I.jsx)("div",{className:"button",style:{top:"54%",left:"32%",marginLeft:"-70px"},children:"Get the Code"})})]})]})})]})})]})}const T=["NoSQL","OfflineFirst","JavaScript","observable","reactive","realtime","client side","fast"],$=["for the Web","for Node.js","for Browsers","for Capacitor","for Electron","for hybrid apps","for PWAs","for React Native","for NativeScript","for UI apps","you deserve","that syncs"],A=851;function B(){const e=((new Date).getTime()-196e7)/A,t=Math.floor(e);return{ratio:e,period:t,timeToNextPeriod:(e-t)*A}}const M=22,L=-1*M;function q(e){return e<L?L:e>M?M:e}function W(){return Math.random()<.5}function F(e,t){let r,a,n=(e=e.slice(0)).length;for(;n;)a=Math.floor(Q(t)*n--),r=e[n],e[n]=e[a],e[a]=r,++t;return e}function Q(e){const t=1e4*Math.sin(e++);return t-Math.floor(t)}function H(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}},7810:(e,t,r)=>{function a(e){return e[e.length-1]}function n(e){return Array.isArray(e)?e.slice(0):[e]}function s(e){return Array.isArray(e)}function i(e){return null!=e}function o(e,t){var r=0,a=-1;for(var n of e){if(!t(n,a+=1))break;r+=1}return r}function c(e,t){for(var r=t.length,a=0;a<r;++a){var n=t[a];e.push(n)}}function l(e){return e.filter((function(e,t,r){return r.indexOf(e)===t}))}r.d(t,{$r:()=>n,Hb:()=>c,S7:()=>i,Sd:()=>o,dG:()=>a,jw:()=>l,k_:()=>s})},3337:(e,t,r)=>{function a(e,t){if(!e)throw t||(t=""),new Error("ensureNotFalsy() is falsy: "+t);return e}r.d(t,{ZN:()=>a,bz:()=>n});var n={bufferSize:1,refCount:!0}},1753:(e,t,r)=>{function a(){return new Promise((e=>setTimeout(e,0)))}function n(e){return void 0===e&&(e=0),new Promise((t=>setTimeout(t,e)))}r.d(t,{$A:()=>i,Dr:()=>s,ND:()=>n,Ve:()=>d,dY:()=>a,em:()=>o,h$:()=>u,vN:()=>c});Promise.resolve(!0);var s=Promise.resolve(!1),i=Promise.resolve(null),o=Promise.resolve();function c(e){return void 0===e&&(e=1e4),"function"==typeof requestIdleCallback?new Promise((t=>{requestIdleCallback((()=>t()),{timeout:e})})):n(0)}var l=o;function d(e){return void 0===e&&(e=void 0),l=l.then((()=>c(e)))}function u(e,t){return e.reduce(((e,t)=>e.then(t)),Promise.resolve(t))}},5734:(e,t,r)=>{r.d(t,{t:()=>n});var a=0;function n(){var e=Date.now();(e+=.01)<=a&&(e=a+.01);var t=parseFloat(e.toFixed(2));return a=t,t}}}]);