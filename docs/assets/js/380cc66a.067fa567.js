"use strict";(self.webpackChunkrxdb=self.webpackChunkrxdb||[]).push([[2061],{1772:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>d,default:()=>x,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"rx-storage-dexie","title":"RxDB Dexie.js Database - Fast, Reactive, Sync with Any Backend","description":"Use Dexie.js to power RxDB in the browser. Enjoy quick setup, Dexie addons, and reliable storage for small apps or prototypes.","source":"@site/docs/rx-storage-dexie.md","sourceDirName":".","slug":"/rx-storage-dexie.html","permalink":"/rx-storage-dexie.html","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"RxDB Dexie.js Database - Fast, Reactive, Sync with Any Backend","slug":"rx-storage-dexie.html","description":"Use Dexie.js to power RxDB in the browser. Enjoy quick setup, Dexie addons, and reliable storage for small apps or prototypes."},"sidebar":"tutorialSidebar","previous":{"title":"RxStorage Overview","permalink":"/rx-storage.html"},"next":{"title":"IndexedDB \ud83d\udc51","permalink":"/rx-storage-indexeddb.html"}}');var r=n(4848),a=n(8453),s=n(7580);const o={title:"RxDB Dexie.js Database - Fast, Reactive, Sync with Any Backend",slug:"rx-storage-dexie.html",description:"Use Dexie.js to power RxDB in the browser. Enjoy quick setup, Dexie addons, and reliable storage for small apps or prototypes."},d="RxStorage Dexie.js",l={},c=[{value:"Dexie.js vs IndexedDB Storage",id:"dexiejs-vs-indexeddb-storage",level:2},{value:"How to use Dexie.js as a Storage for RxDB",id:"how-to-use-dexiejs-as-a-storage-for-rxdb",level:2},{value:"Import the Dexie Storage",id:"import-the-dexie-storage",level:3},{value:"Create a Database",id:"create-a-database",level:3},{value:"Overwrite/Polyfill the native IndexedDB API with an in-memory version",id:"overwritepolyfill-the-native-indexeddb-api-with-an-in-memory-version",level:2},{value:"Using Dexie Addons",id:"using-dexie-addons",level:2},{value:"Sync Dexie.js with your Backend in RxDB",id:"sync-dexiejs-with-your-backend-in-rxdb",level:2},{value:"A. Use Dexie Cloud Sync",id:"a-use-dexie-cloud-sync",level:3},{value:"Install the Dexie Cloud Addon",id:"install-the-dexie-cloud-addon",level:4},{value:"Import RxDB and dexie-cloud",id:"import-rxdb-and-dexie-cloud",level:4},{value:"Create a Dexie based RxStorage with the Cloud Plugin",id:"create-a-dexie-based-rxstorage-with-the-cloud-plugin",level:4},{value:"Create an RxDB Database",id:"create-an-rxdb-database",level:4},{value:"B. Use the RxDB Replication",id:"b-use-the-rxdb-replication",level:3},{value:"Import the RxDB with dexie and the CouchDB plugin",id:"import-the-rxdb-with-dexie-and-the-couchdb-plugin",level:4},{value:"Create an RxDB Database with the Dexie Storage",id:"create-an-rxdb-database-with-the-dexie-storage",level:4},{value:"Add a Collection",id:"add-a-collection",level:4},{value:"Sync the Collection with a CouchDB Server",id:"sync-the-collection-with-a-couchdb-server",level:4},{value:"liveQuery - Realtime Queries",id:"livequery---realtime-queries",level:2},{value:"Disabling the non-premium console log",id:"disabling-the-non-premium-console-log",level:2},{value:"Performance comparison with other RxStorage plugins",id:"performance-comparison-with-other-rxstorage-plugins",level:2}];function h(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"rxstorage-dexiejs",children:"RxStorage Dexie.js"})}),"\n",(0,r.jsxs)(i.p,{children:["To store the data inside of and RxDB Database in IndexedDB in the ",(0,r.jsx)(i.a,{href:"/articles/browser-database.html",children:"browser"}),", you can use the ",(0,r.jsx)(i.a,{href:"https://github.com/dexie/Dexie.js",children:"Dexie.js"})," based ",(0,r.jsx)(i.a,{href:"/rx-storage.html",children:"RxStorage"}),". Dexie.js is a minimal wrapper around IndexedDB and the Dexie.js RxStorage wraps that again to use it for an RxDB database in the browser. For side projects and prototypes that run in a browser, you should use the dexie RxStorage as a default."]}),"\n",(0,r.jsx)(i.h2,{id:"dexiejs-vs-indexeddb-storage",children:"Dexie.js vs IndexedDB Storage"}),"\n",(0,r.jsxs)(i.p,{children:["While Dexie.js ",(0,r.jsx)(i.a,{href:"/rx-storage.html",children:"RxStorage"})," can be used for free, most professional projects should switch to our ",(0,r.jsxs)(i.strong,{children:["premium ",(0,r.jsx)(i.a,{href:"/rx-storage-indexeddb.html",children:"IndexedDB RxStorage"})," \ud83d\udc51"]})," in production:"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["It is faster and reduces build size by up to ",(0,r.jsx)(i.strong,{children:"36%"}),"."]}),"\n",(0,r.jsxs)(i.li,{children:["It has a way ",(0,r.jsx)(i.a,{href:"/rx-storage-performance.html",children:"better performance"})," on reads and writes."]}),"\n",(0,r.jsxs)(i.li,{children:["It does not use a ",(0,r.jsx)(i.a,{href:"/slow-indexeddb.html#batched-cursor",children:"Batched Cursor"})," or ",(0,r.jsx)(i.a,{href:"/slow-indexeddb.html#custom-indexes",children:"custom indexes"})," which makes queries slower compared to the ",(0,r.jsx)(i.a,{href:"/rx-storage-indexeddb.html",children:"IndexedDB RxStorage"}),"."]}),"\n",(0,r.jsxs)(i.li,{children:["It supports ",(0,r.jsx)(i.strong,{children:"non-required indexes"})," which is ",(0,r.jsx)(i.a,{href:"https://github.com/pubkey/rxdb/pull/6643#issuecomment-2505310082",children:"not possible"})," with Dexie.js."]}),"\n",(0,r.jsxs)(i.li,{children:["It runs in a ",(0,r.jsx)(i.strong,{children:"WAL-like mode"})," (similar to SQLite) for faster writes and improved responsiveness."]}),"\n",(0,r.jsxs)(i.li,{children:["It support the ",(0,r.jsx)(i.a,{href:"/rx-storage-indexeddb.html#storage-buckets",children:"Storage Buckets API"})]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"how-to-use-dexiejs-as-a-storage-for-rxdb",children:"How to use Dexie.js as a Storage for RxDB"}),"\n",(0,r.jsxs)(s.g,{children:[(0,r.jsx)(i.h3,{id:"import-the-dexie-storage",children:"Import the Dexie Storage"}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:"import { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageDexie } from 'rxdb/plugins/storage-dexie';\n"})}),(0,r.jsx)(i.h3,{id:"create-a-database",children:"Create a Database"}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:"const db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageDexie()\n});\n"})})]}),"\n",(0,r.jsx)(i.h2,{id:"overwritepolyfill-the-native-indexeddb-api-with-an-in-memory-version",children:"Overwrite/Polyfill the native IndexedDB API with an in-memory version"}),"\n",(0,r.jsxs)(i.p,{children:["Node.js has no IndexedDB API. To still run the Dexie ",(0,r.jsx)(i.code,{children:"RxStorage"})," in Node.js, for example to run unit tests, you have to polyfill it.\nYou can do that by using the ",(0,r.jsx)(i.a,{href:"https://github.com/dumbmatter/fakeIndexedDB",children:"fake-indexeddb"})," module and pass it to the ",(0,r.jsx)(i.code,{children:"getRxStorageDexie()"})," function."]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:"import { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageDexie } from 'rxdb/plugins/storage-dexie';\n\n//> npm install fake-indexeddb --save\nconst fakeIndexedDB = require('fake-indexeddb');\nconst fakeIDBKeyRange = require('fake-indexeddb/lib/FDBKeyRange');\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageDexie({\n        indexedDB: fakeIndexedDB,\n        IDBKeyRange: fakeIDBKeyRange\n    })\n});\n\n"})}),"\n",(0,r.jsx)(i.h2,{id:"using-dexie-addons",children:"Using Dexie Addons"}),"\n",(0,r.jsxs)(i.p,{children:["Dexie.js has its own plugin system with ",(0,r.jsx)(i.a,{href:"https://dexie.org/docs/DerivedWork#known-addons",children:"many plugins"})," for encryption, replication or other use cases. With the Dexie.js ",(0,r.jsx)(i.code,{children:"RxStorage"})," you can use the same plugins by passing them to the ",(0,r.jsx)(i.code,{children:"getRxStorageDexie()"})," function."]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:"const db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageDexie({\n        addons: [ /* Your Dexie.js plugins */ ]\n    })\n});\n"})}),"\n",(0,r.jsx)(i.h2,{id:"sync-dexiejs-with-your-backend-in-rxdb",children:"Sync Dexie.js with your Backend in RxDB"}),"\n",(0,r.jsx)(i.p,{children:"Having your local data in sync with a remote backend is a key feature of RxDB. Here are two approaches to achieve this when using the Dexie.js RxStorage:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Dexie Cloud"})," provides a ",(0,r.jsx)(i.strong,{children:"managed solution"}),": For quick setups, letting you rely on its Cloud backend and conflict resolution."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/replication.html",children:"RxDB's replication"}),": Offers ",(0,r.jsx)(i.strong,{children:"full control"})," over your backend, data flow, and ",(0,r.jsx)(i.a,{href:"/transactions-conflicts-revisions.html",children:"conflict handling"}),"."]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Choose the approach that best suits your needs - whether you want to get started quickly with Dexie Cloud or require the adaptability and autonomy of RxDB's native replication."}),"\n",(0,r.jsx)(i.h3,{id:"a-use-dexie-cloud-sync",children:"A. Use Dexie Cloud Sync"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Dexie Cloud"})," is an official SaaS solution provided by the Dexie team. It offers automatic synchronization, user management, and conflict resolution out of the box. The primary benefits are:"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Automatic Sync"}),": Dexie Cloud keeps your local IndexedDB in sync with its cloud-based backend."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"User Authentication"}),": Built-in user management (auth, roles, permissions)."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Conflict Resolution"}),": Automated resolution logic on the server side."]}),"\n"]}),"\n",(0,r.jsxs)(s.g,{children:[(0,r.jsx)(i.h4,{id:"install-the-dexie-cloud-addon",children:"Install the Dexie Cloud Addon"}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"npm install dexie-cloud-addon\n"})}),(0,r.jsx)(i.h4,{id:"import-rxdb-and-dexie-cloud",children:"Import RxDB and dexie-cloud"}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:"import { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageDexie } from 'rxdb/plugins/storage-dexie';\nimport dexieCloud from 'dexie-cloud-addon';\n"})}),(0,r.jsx)(i.h4,{id:"create-a-dexie-based-rxstorage-with-the-cloud-plugin",children:"Create a Dexie based RxStorage with the Cloud Plugin"}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:'const storage = getRxStorageDexie({\n  addons: [dexieCloud],\n  /*\n   * Whenever a new dexie database instance is created,\n   * this method will be called.\n   */\n  async onCreate(dexieDatabase, dexieDatabaseName) {\n    await dexieDatabase.cloud.configure({\n        databaseUrl: "https://<yourdatabase>.dexie.cloud",\n        requireAuth: true // optional\n    });\n  }\n});\n'})}),(0,r.jsx)(i.h4,{id:"create-an-rxdb-database",children:"Create an RxDB Database"}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:"const db = await createRxDatabase({\n  name: 'mydb',\n  storage\n});\n"})})]}),"\n",(0,r.jsx)(i.h3,{id:"b-use-the-rxdb-replication",children:"B. Use the RxDB Replication"}),"\n",(0,r.jsxs)(i.p,{children:["For ",(0,r.jsx)(i.strong,{children:"full flexibility"})," over your backend or conflict resolution strategy, you can use one of ",(0,r.jsx)(i.strong,{children:"RxDB's many replication plugins"})," like"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/replication-couchdb.html",children:"CouchDB Replication"})," Plugin: Replicate with a CouchDB Server"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/replication-graphql.html",children:"GraphQL Replication"})," Plugin: Sync data with any GraphQL endpoint. Useful when you have a custom schema or you want to utilize GraphQL's powerful query features."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/replication-http.html",children:"Custom Replication with REST APIs"}),": Implement your own replication by building a pull/push handler that communicates with any RESTful backend."]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Below is an example of replicating an RxDB collection with a CouchDB backend using RxDB's CouchDB replication plugin:"}),"\n",(0,r.jsxs)(s.g,{children:[(0,r.jsx)(i.h4,{id:"import-the-rxdb-with-dexie-and-the-couchdb-plugin",children:"Import the RxDB with dexie and the CouchDB plugin"}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:"import { replicateCouchDB } from 'rxdb/plugins/replication-couchdb';\nimport { getRxStorageDexie } from 'rxdb/plugins/storage-dexie';\nimport { createRxDatabase } from 'rxdb/plugins/core';\n"})}),(0,r.jsx)(i.h4,{id:"create-an-rxdb-database-with-the-dexie-storage",children:"Create an RxDB Database with the Dexie Storage"}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:"const db = await createRxDatabase({\n  name: 'mydb',\n  storage: getRxStorageDexie()\n});\n"})}),(0,r.jsx)(i.h4,{id:"add-a-collection",children:"Add a Collection"}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:"await db.addCollections({\n    humans: {\n        schema: {\n            version: 0,\n            type: 'object',\n            primaryKey: 'id',\n            properties: {\n                id: { type: 'string', maxLength: 100 },\n                name: { type: 'string' },\n                age: { type: 'number' }\n              },\n            required: ['id', 'name']\n        }\n    }\n});\n"})}),(0,r.jsx)(i.h4,{id:"sync-the-collection-with-a-couchdb-server",children:"Sync the Collection with a CouchDB Server"}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:"const replicationState = replicateCouchDB({\n  replicationIdentifier: 'my-couchdb-replication',\n  collection: db.humans,\n  // The URL to your CouchDB endpoint\n  url: 'http://example.com/db/humans'\n});\n"})})]}),"\n",(0,r.jsx)(i.h2,{id:"livequery---realtime-queries",children:"liveQuery - Realtime Queries"}),"\n",(0,r.jsxs)(i.p,{children:["Dexie.js offers a feature called ",(0,r.jsx)(i.code,{children:"liveQuery"})," which automatically updates query results as data changes, allowing you to react to these changes in real-time. However, because RxDB intrinsically provides ",(0,r.jsx)(i.a,{href:"/rx-query.html#observe",children:"reactive queries"}),", you typically do ",(0,r.jsx)(i.strong,{children:"not"})," need to enable live queries through Dexie. Once you have created your database and collections with RxDB, any query you perform can be observed by subscribing to it, for example via ",(0,r.jsx)(i.code,{children:"collection.find().$.subscribe(results => { /*... */ })"}),". This means RxDB takes care of listening for changes and automatically emitting new results - ensuring your UI stays in sync with the underlying data without requiring extra plugins or manual polling."]}),"\n",(0,r.jsx)(i.h2,{id:"disabling-the-non-premium-console-log",children:"Disabling the non-premium console log"}),"\n",(0,r.jsxs)(i.p,{children:["We want to be transparent with our community, and you'll notice a console message when using the free Dexie.js based RxStorage implementation. This message serves to inform you about the availability of faster storage solutions within our ",(0,r.jsx)(i.a,{href:"/premium/",children:"\ud83d\udc51 Premium Plugins"}),". We understand that this might be a minor inconvenience, and we sincerely apologize for that. However, maintaining and improving RxDB requires substantial resources, and our premium users help us ensure its sustainability. If you find value in RxDB and wish to remove this message, we encourage you to explore our premium storage options, which are optimized for professional use and production environments. Thank you for your understanding and support."]}),"\n",(0,r.jsxs)(i.p,{children:["If you already have premium access and want to use the Dexie.js ",(0,r.jsx)(i.a,{href:"/rx-storage.html",children:"RxStorage"})," without the log, you can call the ",(0,r.jsx)(i.code,{children:"setPremiumFlag()"})," function to disable the log."]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-js",children:"import { setPremiumFlag } from 'rxdb-premium/plugins/shared';\nsetPremiumFlag();\n"})}),"\n",(0,r.jsx)(i.h2,{id:"performance-comparison-with-other-rxstorage-plugins",children:"Performance comparison with other RxStorage plugins"}),"\n",(0,r.jsx)(i.p,{children:"The performance of the Dexie.js RxStorage is good enough for most use cases but other storages can have way better performance metrics:"}),"\n",(0,r.jsx)("p",{align:"center",children:(0,r.jsx)("img",{src:"./files/rx-storage-performance-browser.png",alt:"RxStorage performance - browser Dexie.js",width:"700"})})]})}function x(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},7580:(e,i,n)=>{n.d(i,{g:()=>r});var t=n(4848);function r(e){const i=[];let n=null;return e.children.forEach((e=>{e.props.id?(n&&i.push(n),n={headline:e,paragraphs:[]}):n&&n.paragraphs.push(e)})),n&&i.push(n),(0,t.jsx)("div",{style:a.stepsContainer,children:i.map(((e,i)=>(0,t.jsxs)("div",{style:a.stepWrapper,children:[(0,t.jsxs)("div",{style:a.stepIndicator,children:[(0,t.jsxs)("div",{style:a.stepNumber,children:[i+1,"."]}),(0,t.jsx)("div",{style:a.verticalLine})]}),(0,t.jsxs)("div",{style:a.stepContent,children:[(0,t.jsx)("div",{children:e.headline}),e.paragraphs.map(((e,i)=>(0,t.jsx)("div",{style:a.item,children:e},i)))]})]},i)))})}const a={stepsContainer:{display:"flex",flexDirection:"column"},stepWrapper:{display:"flex",alignItems:"stretch",marginBottom:"1rem",position:"relative",minWidth:0},stepIndicator:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",width:"32px",marginRight:"1rem",minWidth:0},stepNumber:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--color-middle)",border:"3px solid #391a3b",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},verticalLine:{position:"absolute",top:"32px",bottom:"0",left:"50%",width:"1px",background:"linear-gradient(to bottom, var(--color-middle) 0%, var(--color-middle) 80%, rgba(0,0,0,0) 100%)",transform:"translateX(-50%)"},stepContent:{flex:1,minWidth:0,overflowWrap:"break-word"},item:{marginTop:"0.5rem"}}},8453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>o});var t=n(6540);const r={},a=t.createContext(r);function s(e){const i=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(a.Provider,{value:i},e.children)}}}]);