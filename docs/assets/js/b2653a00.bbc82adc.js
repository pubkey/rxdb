"use strict";(globalThis.webpackChunkrxdb=globalThis.webpackChunkrxdb||[]).push([[3588],{7296:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"articles/vue-database","title":"RxDB as a Database in a Vue.js Application","description":"Level up your Vue projects with RxDB. Build real-time, resilient, and responsive apps powered by a reactive NoSQL database right in the browser.","source":"@site/docs/articles/vue-database.md","sourceDirName":"articles","slug":"/articles/vue-database.html","permalink":"/articles/vue-database.html","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"RxDB as a Database in a Vue.js Application","slug":"vue-database.html","description":"Level up your Vue projects with RxDB. Build real-time, resilient, and responsive apps powered by a reactive NoSQL database right in the browser."},"sidebar":"tutorialSidebar","previous":{"title":"React Native Encryption and Encrypted Database/Storage","permalink":"/articles/react-native-encryption.html"},"next":{"title":"IndexedDB Database in Vue Apps - The Power of RxDB","permalink":"/articles/vue-indexeddb.html"}}');var t=a(4848),s=a(8453);const r={title:"RxDB as a Database in a Vue.js Application",slug:"vue-database.html",description:"Level up your Vue projects with RxDB. Build real-time, resilient, and responsive apps powered by a reactive NoSQL database right in the browser."},o="RxDB as a Database in a Vue Application",l={},c=[{value:"Why Vue Applications Need a Database",id:"why-vue-applications-need-a-database",level:2},{value:"Introducing RxDB as a Database Solution",id:"introducing-rxdb-as-a-database-solution",level:2},{value:"RxDB vs. Other Vue Database Options",id:"rxdb-vs-other-vue-database-options",level:3},{value:"Getting Started with RxDB",id:"getting-started-with-rxdb",level:2},{value:"Installation",id:"installation",level:3},{value:"Creating and Configuring Your Database",id:"creating-and-configuring-your-database",level:2},{value:"Vue Reactivity and RxDB Observables",id:"vue-reactivity-and-rxdb-observables",level:2},{value:"Different RxStorage Layers for RxDB",id:"different-rxstorage-layers-for-rxdb",level:2},{value:"Synchronizing Data with RxDB between Clients and Servers",id:"synchronizing-data-with-rxdb-between-clients-and-servers",level:2},{value:"Advanced RxDB Features and Techniques",id:"advanced-rxdb-features-and-techniques",level:2},{value:"Offline-First Approach",id:"offline-first-approach",level:3},{value:"Observable Queries and Change Streams",id:"observable-queries-and-change-streams",level:3},{value:"Encryption of Local Data",id:"encryption-of-local-data",level:3},{value:"Indexing and Performance Optimization",id:"indexing-and-performance-optimization",level:3},{value:"JSON Key Compression",id:"json-key-compression",level:3},{value:"Multi-Tab Support",id:"multi-tab-support",level:3},{value:"Best Practices for Using RxDB in Vue",id:"best-practices-for-using-rxdb-in-vue",level:2},{value:"Follow Up",id:"follow-up",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"rxdb-as-a-database-in-a-vue-application",children:"RxDB as a Database in a Vue Application"})}),"\n",(0,t.jsxs)(n.p,{children:["In the modern web ecosystem, ",(0,t.jsx)(n.a,{href:"https://vuejs.org/",children:"Vue"})," has become a leading choice for building highly performant, reactive single-page applications (SPAs). However, while Vue excels at managing and updating the user interface, robust and efficient data handling also plays a pivotal role in delivering a great user experience. Enter ",(0,t.jsx)(n.a,{href:"https://rxdb.info/",children:"RxDB"}),", a reactive JavaScript database that runs in the browser (and beyond), offering significant capabilities such as offline-first data handling, real-time synchronization, and straightforward integration with Vue's reactivity system."]}),"\n",(0,t.jsx)(n.p,{children:"This article explores how RxDB works, why it's a perfect match for Vue, and how you can leverage it to build more engaging, performant, and data-resilient Vue applications."}),"\n",(0,t.jsx)("center",{children:(0,t.jsx)("a",{href:"https://rxdb.info/",children:(0,t.jsx)("img",{src:"/files/logo/rxdb_javascript_database.svg",alt:"JavaScript Vue Database",width:"220"})})}),"\n",(0,t.jsx)(n.h2,{id:"why-vue-applications-need-a-database",children:"Why Vue Applications Need a Database"}),"\n",(0,t.jsx)(n.p,{children:"Vue is renowned for its lightweight core and flexible architecture centered around reactive state management and reusable components. However, modern Vue applications often require:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Offline Capabilities:"})," Allowing users to continue working even without internet access."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Real-Time Updates:"})," Keeping UI data in sync with changes as they occur, whether locally or from other connected clients."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Improved Performance:"})," Reducing server round trips and leveraging local storage for faster data operations."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Scalable Data Handling:"})," Managing increasingly large datasets or complex queries right in the browser."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"While you can store data in Vuex/Pinia stores or via direct AJAX calls, these solutions may not suffice when your application demands a full-featured offline-first database or complex synchronization with a server. RxDB addresses these needs with a dedicated, reactive, browser-based database that pairs seamlessly with Vue's reactivity system."}),"\n",(0,t.jsx)(n.h2,{id:"introducing-rxdb-as-a-database-solution",children:"Introducing RxDB as a Database Solution"}),"\n",(0,t.jsxs)(n.p,{children:["RxDB - short for Reactive Database - is built on the principle of combining ",(0,t.jsx)(n.a,{href:"/articles/in-memory-nosql-database.html",children:"NoSQL database"})," capabilities with reactive programming. It runs inside your client-side environment (browser, ",(0,t.jsx)(n.a,{href:"/nodejs-database.html",children:"Node.js"}),", or ",(0,t.jsx)(n.a,{href:"/articles/mobile-database.html",children:"mobile devices"}),") and provides:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Real-Time Reactivity"}),": Automatically updates subscribed components whenever data changes."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Offline-First Approach"}),": Stores data locally and syncs with the server when online connectivity is restored."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Data Replication"}),": Effortlessly keeps data synchronized across multiple tabs, devices, or server instances."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Multi-Tab Support"}),": Seamlessly propagates changes to all open tabs in the user's ",(0,t.jsx)(n.a,{href:"/articles/browser-database.html",children:"browser"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Observable Queries"}),": Automatically refresh the result set when documents in your queried collection change."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"rxdb-vs-other-vue-database-options",children:"RxDB vs. Other Vue Database Options"}),"\n",(0,t.jsx)(n.p,{children:"Compared to traditional approaches - like raw IndexedDB or local storage - RxDB adds a powerful, reactive layer that simplifies your data flow. While tools like Vuex or Pinia are great for state management, they are not fully fledged databases with features like replication, conflict resolution, and offline persistence. RxDB bridges the gap by providing an integrated data handling solution tailor-made for modern, data-intensive Vue applications."}),"\n",(0,t.jsx)(n.h2,{id:"getting-started-with-rxdb",children:"Getting Started with RxDB"}),"\n",(0,t.jsx)(n.p,{children:"Let's break down the essentials for using RxDB within a Vue application."}),"\n",(0,t.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.p,{children:"You can install RxDB (and RxJS, which it depends on) via npm or yarn:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install rxdb rxjs\n"})}),"\n",(0,t.jsx)(n.h2,{id:"creating-and-configuring-your-database",children:"Creating and Configuring Your Database"}),"\n",(0,t.jsxs)(n.p,{children:["Within your Vue project, you can set up an RxDB instance in a dedicated file or a Vue plugin. Below is an example using ",(0,t.jsx)(n.a,{href:"/articles/localstorage.html",children:"Localstorage"})," as the storage engine:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"// db.js\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nexport async function initDatabase() {\n  const db = await createRxDatabase({\n    name: 'heroesdb',\n    storage: getRxStorageLocalstorage(),\n    password: 'myPassword',    // optional encryption password\n    multiInstance: true,       // multi-tab support\n    eventReduce: true          // optimize event handling\n  });\n\n  await db.addCollections({\n    hero: {\n      schema: {\n        title: 'hero schema',\n        version: 0,\n        primaryKey: 'id',\n        type: 'object',\n        properties: {\n          id: { type: 'string' },\n          name: { type: 'string' },\n          healthpoints: { type: 'number' }\n        }\n      }\n    }\n  });\n\n  return db;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"After creating the RxDB instance, you can share it across your application (for example, by providing it in a plugin or a global property in Vue)."}),"\n",(0,t.jsx)(n.h2,{id:"vue-reactivity-and-rxdb-observables",children:"Vue Reactivity and RxDB Observables"}),"\n",(0,t.jsxs)(n.p,{children:["RxDB queries return RxJS observables (",(0,t.jsx)(n.code,{children:".$"}),"). Vue can automatically update components when data changes if you manually subscribe and store results in Vue refs/reactive objects, or if you use RxDB's ",(0,t.jsx)(n.a,{href:"/reactivity.html",children:"custom reactivity for Vue"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example with Vue 3 Composition API:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"// HeroList.vue\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { initDatabase } from '@/db';\n\nconst heroes = ref([]);\nlet db;\n\nonMounted(async () => {\n  db = await initDatabase();\n\n  // Subscribe to an RxDB query\n  db.hero\n    .find({\n      selector: {\n        healthpoints: { $gt: 0 }\n      },\n      sort: [{ name: 'asc' }]\n    })\n    .$ // the dot-$ is an observable that emits whenever the query results change\n    .subscribe((newHeroes) => {\n      heroes.value = newHeroes;\n    });\n});\n<\/script>\n\n<template>\n  <ul>\n    <li v-for=\"hero in heroes\" :key=\"hero.id\">\n      {{ hero.name }} - HP: {{ hero.healthpoints }}\n    </li>\n  </ul>\n</template>\n"})}),"\n",(0,t.jsx)(n.h2,{id:"different-rxstorage-layers-for-rxdb",children:"Different RxStorage Layers for RxDB"}),"\n",(0,t.jsx)(n.p,{children:'RxDB supports multiple storage backends - called "RxStorage layers" - giving you flexibility in how data is persisted:'}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/rx-storage-localstorage.html",children:"LocalStorage RxStorage"}),": Uses the browsers localstorage API."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/rx-storage-indexeddb.html",children:"IndexedDB RxStorage"}),": Direct usage of native IndexedDB."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/rx-storage-opfs.html",children:"OPFS RxStorage"}),": Uses the File System Access API for even faster storage in modern browsers."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/rx-storage-memory.html",children:"Memory RxStorage"}),": Stores data in memory, ideal for tests or ephemeral data."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/rx-storage-sqlite.html",children:"SQLite RxStorage"}),": Runs SQLite, which can be compiled to WebAssembly for the browser. While possible, it typically carries a larger bundle size compared to native browser APIs like ",(0,t.jsx)(n.a,{href:"/articles/localstorage-indexeddb-cookies-opfs-sqlite-wasm.html",children:"IndexedDB or OPFS"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Choose the storage option that best aligns with your Vue application's requirements for performance, persistence, and platform compatibility."}),"\n",(0,t.jsx)(n.h2,{id:"synchronizing-data-with-rxdb-between-clients-and-servers",children:"Synchronizing Data with RxDB between Clients and Servers"}),"\n",(0,t.jsx)(n.p,{children:"RxDB champions an offline-first approach: data is kept locally so that your Vue app remains usable, even without internet. When connectivity is restored, RxDB ensures your local changes synchronize to the server, resolving conflicts as necessary."}),"\n",(0,t.jsx)("p",{align:"center",children:(0,t.jsx)("img",{src:"../files/database-replication.png",alt:"database replication",width:"200"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/articles/realtime-database.html",children:"Real-Time Synchronization"}),": With RxDB's replication plugins, any local change can be instantly pushed to a remote endpoint while pulling down remote changes to ensure consistency."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Conflict Resolution"}),": In multi-user scenarios, conflicts may arise if two clients update the same document simultaneously. RxDB provides hooks to handle and resolve these gracefully."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Scalable Architecture"}),": By reducing reliance on continuous server requests, you can lighten server load and deliver a more responsive user experience."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"advanced-rxdb-features-and-techniques",children:"Advanced RxDB Features and Techniques"}),"\n",(0,t.jsx)(n.h3,{id:"offline-first-approach",children:"Offline-First Approach"}),"\n",(0,t.jsx)(n.p,{children:"Vue applications can seamlessly function offline by leveraging RxDB's local database storage. The moment the network is restored, all unsynced data is pushed to the server. This capability is particularly beneficial for Progressive Web Apps (PWAs) and scenarios with spotty connectivity."}),"\n",(0,t.jsx)(n.h3,{id:"observable-queries-and-change-streams",children:"Observable Queries and Change Streams"}),"\n",(0,t.jsx)(n.p,{children:"Beyond simply returning data, RxDB queries emit observables that respond to any change in the underlying documents. This real-time approach can drastically simplify state management, since updates flow directly into your Vue components without additional manual wiring."}),"\n",(0,t.jsx)(n.h3,{id:"encryption-of-local-data",children:"Encryption of Local Data"}),"\n",(0,t.jsxs)(n.p,{children:["For applications handling sensitive information, RxDB supports ",(0,t.jsx)(n.a,{href:"/encryption.html",children:"encryption"})," of local data. Your data is stored securely in the browser, protecting it from unauthorized access."]}),"\n",(0,t.jsx)(n.h3,{id:"indexing-and-performance-optimization",children:"Indexing and Performance Optimization"}),"\n",(0,t.jsxs)(n.p,{children:["By ",(0,t.jsx)(n.a,{href:"/rx-schema.html",children:"defining indexes"})," on frequently searched fields, you can speed up queries and reduce overall resource usage. This is crucial for larger datasets where performance might otherwise degrade."]}),"\n",(0,t.jsx)(n.h3,{id:"json-key-compression",children:"JSON Key Compression"}),"\n",(0,t.jsxs)(n.p,{children:["This ",(0,t.jsx)(n.a,{href:"/key-compression.html",children:"optimization"})," shortens field names in stored JSON documents, thereby reducing storage space and potentially improving performance for read/write operations."]}),"\n",(0,t.jsx)(n.h3,{id:"multi-tab-support",children:"Multi-Tab Support"}),"\n",(0,t.jsx)(n.p,{children:"If your users open multiple tabs of your Vue application, RxDB ensures data is synchronized across all instances in real time. Changes made in one tab are immediately reflected in others, creating a unified user experience."}),"\n",(0,t.jsx)("p",{align:"center",children:(0,t.jsx)("img",{src:"../files/multiwindow.gif",alt:"multi tab support",width:"450"})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices-for-using-rxdb-in-vue",children:"Best Practices for Using RxDB in Vue"}),"\n",(0,t.jsx)(n.p,{children:"Here are some recommendations to get the most out of RxDB in your Vue projects:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Centralize Database Creation: Initialize and configure RxDB in a dedicated file or plugin, ensuring only one database instance is created."}),"\n",(0,t.jsx)(n.li,{children:"Leverage Vue's Composition API or a Global Store: Use watchers, refs, or a store like Pinia to neatly manage data subscriptions and updates, preventing scattered subscription logic."}),"\n",(0,t.jsx)(n.li,{children:"Async Subscriptions: Prefer using Vue's lifecycle hooks and the Composition API to manage subscriptions. Clean up subscriptions when components unmount or no longer need the data."}),"\n",(0,t.jsx)(n.li,{children:"Optimize Queries and Indexes: Only query the data you need, and define indexes to speed up lookups."}),"\n",(0,t.jsxs)(n.li,{children:["Test ",(0,t.jsx)(n.a,{href:"/offline-first.html",children:"Offline Scenarios"}),": Make sure your offline logic works as expected by simulating network disconnections and reconnections."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/transactions-conflicts-revisions.html",children:"Plan Conflict Resolution"}),": For multi-user apps, decide how to merge concurrent changes to prevent data inconsistencies."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"follow-up",children:"Follow Up"}),"\n",(0,t.jsx)(n.p,{children:"To explore more about RxDB and leverage its capabilities for browser database development, check out the following resources:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/code/",children:"RxDB GitHub Repository"}),": Visit the official GitHub repository of RxDB to access the source code, documentation, and community support."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/quickstart.html",children:"RxDB Quickstart"}),": Get started quickly with RxDB by following the provided quickstart guide, which offers step-by-step instructions for setting up and using RxDB in your projects."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/reactivity.html",children:"RxDB Reactivity for Vue"}),": Discover how RxDB observables can directly produce Vue refs, simplifying integration with your Vue components."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/pubkey/rxdb/tree/master/examples/vue",children:"RxDB Vue Example at GitHub"}),": Explore an official Vue example to see RxDB in action within a Vue application."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/pubkey/rxdb/tree/master/examples",children:"RxDB Examples"}),": Browse even more official examples to learn best practices you can apply to your own projects."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>r,x:()=>o});var i=a(6540);const t={},s=i.createContext(t);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);