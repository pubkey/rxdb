"use strict";(globalThis.webpackChunkrxdb=globalThis.webpackChunkrxdb||[]).push([[6717],{4557:(s,e,n)=>{n.r(e),n.d(e,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"rx-schema","title":"Design Perfect Schemas in RxDB","description":"Learn how to define, secure, and validate your data in RxDB. Master primary keys, indexes, encryption, and more with the RxSchema approach.","source":"@site/docs/rx-schema.md","sourceDirName":".","slug":"/rx-schema.html","permalink":"/rx-schema.html","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Design Perfect Schemas in RxDB","slug":"rx-schema.html","description":"Learn how to define, secure, and validate your data in RxDB. Master primary keys, indexes, encryption, and more with the RxSchema approach."},"sidebar":"tutorialSidebar","previous":{"title":"RxDatabase","permalink":"/rx-database.html"},"next":{"title":"RxCollection","permalink":"/rx-collection.html"}}');var i=n(4848),o=n(8453);const a={title:"Design Perfect Schemas in RxDB",slug:"rx-schema.html",description:"Learn how to define, secure, and validate your data in RxDB. Master primary keys, indexes, encryption, and more with the RxSchema approach."},l="RxSchema",t={},c=[{value:"Example",id:"example",level:2},{value:"Create a collection with the schema",id:"create-a-collection-with-the-schema",level:2},{value:"version",id:"version",level:2},{value:"primaryKey",id:"primarykey",level:2},{value:"composite primary key",id:"composite-primary-key",level:3},{value:"Indexes",id:"indexes",level:2},{value:"Index-example",id:"index-example",level:3},{value:"attachments",id:"attachments",level:2},{value:"default",id:"default",level:2},{value:"final",id:"final",level:2},{value:"Non allowed properties",id:"non-allowed-properties",level:2},{value:"FAQ",id:"faq",level:2}];function d(s){const e={a:"a",admonition:"admonition",code:"code",figure:"figure",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,o.R)(),...s.components},{Details:n}=e;return n||function(s,e){throw new Error("Expected "+(e?"component":"object")+" `"+s+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"rxschema",children:"RxSchema"})}),"\n",(0,i.jsxs)(e.p,{children:["Schemas define the structure of the documents of a collection. Which field should be used as primary, which fields should be used as indexes and what should be encrypted. Every collection has its own schema. With RxDB, schemas are defined with the ",(0,i.jsx)(e.a,{href:"https://json-schema.org/blog/posts/rxdb-case-study",children:"jsonschema"}),"-standard which you might know from other projects."]}),"\n",(0,i.jsx)(e.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(e.p,{children:"In this example-schema we define a hero-collection with the following settings:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"the version-number of the schema is 0"}),"\n",(0,i.jsxs)(e.li,{children:["the name-property is the ",(0,i.jsx)(e.strong,{children:"primaryKey"}),". This means its a unique, indexed, required ",(0,i.jsx)(e.code,{children:"string"})," which can be used to definitely find a single document."]}),"\n",(0,i.jsx)(e.li,{children:"the color-field is required for every document"}),"\n",(0,i.jsx)(e.li,{children:"the healthpoints-field must be a number between 0 and 100"}),"\n",(0,i.jsx)(e.li,{children:"the secret-field stores an encrypted value"}),"\n",(0,i.jsx)(e.li,{children:"the birthyear-field is final which means it is required and cannot be changed"}),"\n",(0,i.jsx)(e.li,{children:"the skills-attribute must be an array with objects which contain the name and the damage-attribute. There is a maximum of 5 skills per hero."}),"\n",(0,i.jsx)(e.li,{children:"Allows adding attachments and store them encrypted"}),"\n"]}),"\n",(0,i.jsx)(e.figure,{"data-rehype-pretty-code-figure":"",children:(0,i.jsx)(e.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"json","data-theme":"css-variables",children:(0,i.jsxs)(e.code,{"data-language":"json","data-theme":"css-variables",style:{display:"grid"},children:[(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  {"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "title"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "hero schema"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "version"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "description"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "describes a simple hero"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "primaryKey"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "name"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "object"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "properties"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'        "name"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "string"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "maxLength"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 100"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" // <- the primary key must have set maxLength"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"        }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'        "color"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "string"'})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"        }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'        "healthpoints"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "number"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "minimum"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "maximum"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 100"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"        }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'        "secret"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "string"'})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"        }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'        "birthyear"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "number"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "final"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" true"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "minimum"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 1900"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "maximum"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 2050"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"        }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'        "skills"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "array"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "maxItems"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 5"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "uniqueItems"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" true"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'            "items"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'                "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "object"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'                "properties"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'                    "name"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'                        "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "string"'})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"                    }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'                    "damage"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'                        "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "number"'})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"                    }"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"                }"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"            }"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"        }"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "required"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'        "name"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'        "color"'})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    ]"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "encrypted"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"secret"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"]"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "attachments"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'        "encrypted"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" true"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})})]})})}),"\n",(0,i.jsx)(e.h2,{id:"create-a-collection-with-the-schema",children:"Create a collection with the schema"}),"\n",(0,i.jsx)(e.figure,{"data-rehype-pretty-code-figure":"",children:(0,i.jsx)(e.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"javascript","data-theme":"css-variables",children:(0,i.jsxs)(e.code,{"data-language":"javascript","data-theme":"css-variables",style:{display:"grid"},children:[(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" myDatabase"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".addCollections"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"({"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    heroes"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"        schema"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" myHeroSchema"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"});"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".dir"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"myDatabase"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"."}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"heroes"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:".name);"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// heroes"})})]})})}),"\n",(0,i.jsx)(e.h2,{id:"version",children:"version"}),"\n",(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.code,{children:"version"})," field is a number, starting with ",(0,i.jsx)(e.code,{children:"0"}),".\nWhen the version is greater than 0, you have to provide the migrationStrategies to create a collection with this schema."]}),"\n",(0,i.jsx)(e.h2,{id:"primarykey",children:"primaryKey"}),"\n",(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.code,{children:"primaryKey"})," field contains the fieldname of the property that will be used as primary key for the whole collection.\nThe value of the primary key of the document must be a ",(0,i.jsx)(e.code,{children:"string"}),", unique, final and is required."]}),"\n",(0,i.jsx)(e.h3,{id:"composite-primary-key",children:"composite primary key"}),"\n",(0,i.jsx)(e.p,{children:"You can define a composite primary key which gets composed from multiple properties of the document data."}),"\n",(0,i.jsx)(e.figure,{"data-rehype-pretty-code-figure":"",children:(0,i.jsx)(e.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"javascript","data-theme":"css-variables",children:(0,i.jsxs)(e.code,{"data-language":"javascript","data-theme":"css-variables",style:{display:"grid"},children:[(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" mySchema"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  keyCompression"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" true"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" // set this to true, to enable the keyCompression"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  version"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  title"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'human schema with composite primary'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  primaryKey"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"      // where should the composed string be stored"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      key"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'id'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"      // fields that will be used to create the composed key"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      fields"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"          'firstName'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"          'lastName'"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      ]"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"      // separator which is used to concat the fields values."})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      separator"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '|'"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'object'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  properties"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      id"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          maxLength"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 100"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" // <- the primary key must have set maxLength"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      firstName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      lastName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  required"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    'id'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" "})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    'firstName'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    'lastName'"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  ]"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"};"})})]})})}),"\n",(0,i.jsx)(e.p,{children:"You can then find a document by using the relevant parts to create the composite primaryKey:"}),"\n",(0,i.jsx)(e.figure,{"data-rehype-pretty-code-figure":"",children:(0,i.jsx)(e.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"ts","data-theme":"css-variables",children:(0,i.jsxs)(e.code,{"data-language":"ts","data-theme":"css-variables",style:{display:"grid"},children:[(0,i.jsx)(e.span,{"data-line":"",children:" "}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// inserting with composite primary"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" myRxCollection"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".insert"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"({"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"    // id, <- do not set the id, it will be filled by RxDB"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    firstName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'foo'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    lastName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'bar'"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"});"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:" "}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// find by composite primary"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" id"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" myRxCollection"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"."}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"schema"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".getPrimaryOfDocumentData"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"({"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    firstName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'foo'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    lastName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'bar'"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"});"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" myRxDocument"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" myRxCollection"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".findOne"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(id)"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".exec"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"();"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:" "})]})})}),"\n",(0,i.jsx)(e.h2,{id:"indexes",children:"Indexes"}),"\n",(0,i.jsx)(e.p,{children:"RxDB supports secondary indexes which are defined at the schema-level of the collection."}),"\n",(0,i.jsxs)(e.p,{children:["Index is only allowed on field types ",(0,i.jsx)(e.code,{children:"string"}),", ",(0,i.jsx)(e.code,{children:"integer"})," and ",(0,i.jsx)(e.code,{children:"number"}),". Some RxStorages allow to use ",(0,i.jsx)(e.code,{children:"boolean"})," fields as index."]}),"\n",(0,i.jsxs)(e.p,{children:["Depending on the field type, you must have set some meta attributes like ",(0,i.jsx)(e.code,{children:"maxLength"})," or ",(0,i.jsx)(e.code,{children:"minimum"}),". This is required so that RxDB\nis able to know the maximum string representation length of a field, which is needed to craft custom indexes on several ",(0,i.jsx)(e.code,{children:"RxStorage"})," implementations."]}),"\n",(0,i.jsx)(e.admonition,{type:"note",children:(0,i.jsxs)(e.p,{children:["RxDB will always append the ",(0,i.jsx)(e.code,{children:"primaryKey"})," to all indexes to ensure a deterministic sort order of query results. You do not have to add the ",(0,i.jsx)(e.code,{children:"primaryKey"})," to any index."]})}),"\n",(0,i.jsx)(e.h3,{id:"index-example",children:"Index-example"}),"\n",(0,i.jsx)(e.figure,{"data-rehype-pretty-code-figure":"",children:(0,i.jsx)(e.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"javascript","data-theme":"css-variables",children:(0,i.jsxs)(e.code,{"data-language":"javascript","data-theme":"css-variables",style:{display:"grid"},children:[(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" schemaWithIndexes"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  version"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  title"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'human schema with indexes'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  keyCompression"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" true"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  primaryKey"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'id'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'object'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  properties"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      id"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          maxLength"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 100"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" // <- the primary key must have set maxLength"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      firstName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          maxLength"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 100"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" // <- string-fields that are used as an index, must have set maxLength."})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      lastName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      active"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'boolean'"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      familyName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      balance"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'number'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:" "}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"          // number fields that are used in an index, must have set minimum, maximum and multipleOf"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          minimum"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          maximum"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 100000"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          multipleOf"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 0.01"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      creditCards"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'array'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          items"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"              type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'object'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"              properties"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"                    cvc"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"                        type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'number'"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"                    }"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"              }"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          } "})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  required"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"      'id'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"      'active'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" // <- boolean fields that are used in an index, must be required. "})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  ]"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  indexes"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    'firstName'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" // <- this will create a simple index for the `firstName` field"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    ["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'active'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'firstName'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"]"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" // <- this will create a compound-index for these two fields"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    'active'"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  ]"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"};"})})]})})}),"\n",(0,i.jsx)(e.h1,{id:"internalindexes",children:"internalIndexes"}),"\n",(0,i.jsxs)(e.p,{children:["When you use RxDB on the server-side, you might want to use internalIndexes to speed up internal queries. ",(0,i.jsx)(e.a,{href:"/rx-server.html#server-only-indexes",children:"Read more"})]}),"\n",(0,i.jsx)(e.h2,{id:"attachments",children:"attachments"}),"\n",(0,i.jsxs)(e.p,{children:["To use attachments in the collection, you have to add the ",(0,i.jsx)(e.code,{children:"attachments"}),"-attribute to the schema. ",(0,i.jsx)(e.a,{href:"/rx-attachment.html",children:"See RxAttachment"}),"."]}),"\n",(0,i.jsx)(e.h2,{id:"default",children:"default"}),"\n",(0,i.jsx)(e.p,{children:"Default values can only be defined for first-level fields.\nWhenever you insert a document unset fields will be filled with default-values."}),"\n",(0,i.jsx)(e.figure,{"data-rehype-pretty-code-figure":"",children:(0,i.jsx)(e.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"javascript","data-theme":"css-variables",children:(0,i.jsxs)(e.code,{"data-language":"javascript","data-theme":"css-variables",style:{display:"grid"},children:[(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" schemaWithDefaultAge"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  version"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  primaryKey"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'id'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'object'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  properties"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      id"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          maxLength"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 100"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" // <- the primary key must have set maxLength"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      firstName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      lastName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      age"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'integer'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          default"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 20"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"       // <- default will be used"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  required"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'id'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"]"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"};"})})]})})}),"\n",(0,i.jsx)(e.h2,{id:"final",children:"final"}),"\n",(0,i.jsxs)(e.p,{children:["By setting a field to ",(0,i.jsx)(e.code,{children:"final"}),", you make sure it cannot be modified later. Final fields are always required.\nFinal fields cannot be observed because they will not change."]}),"\n",(0,i.jsx)(e.p,{children:"Advantages:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"With final fields you can ensure that no-one accidentally modifies the data."}),"\n",(0,i.jsxs)(e.li,{children:["When you enable the ",(0,i.jsx)(e.code,{children:"eventReduce"})," algorithm, some performance-improvements are done."]}),"\n"]}),"\n",(0,i.jsx)(e.figure,{"data-rehype-pretty-code-figure":"",children:(0,i.jsx)(e.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"javascript","data-theme":"css-variables",children:(0,i.jsxs)(e.code,{"data-language":"javascript","data-theme":"css-variables",style:{display:"grid"},children:[(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" schemaWithFinalAge"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  version"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  primaryKey"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'id'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'object'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  properties"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      id"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          maxLength"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 100"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" // <- the primary key must have set maxLength"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      firstName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      lastName"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      age"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'integer'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          final"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" true"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  required"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'id'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"]"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"};"})})]})})}),"\n",(0,i.jsx)(e.h2,{id:"non-allowed-properties",children:"Non allowed properties"}),"\n",(0,i.jsxs)(e.p,{children:["The schema is not only used to validate objects before they are written into the database, but also used to map getters to observe and populate single fieldnames, keycompression and other things. Therefore you can not use every schema which would be valid for the spec of ",(0,i.jsx)(e.a,{href:"http://json-schema.org/",children:"json-schema.org"}),".\nFor example, fieldnames must match the regex ",(0,i.jsx)(e.code,{children:"^[a-zA-Z][[a-zA-Z0-9_]*]?[a-zA-Z0-9]$"})," and ",(0,i.jsx)(e.code,{children:"additionalProperties"})," is always set to ",(0,i.jsx)(e.code,{children:"false"}),". But don't worry, RxDB will instantly throw an error when you pass an invalid schema into it."]}),"\n",(0,i.jsxs)(e.p,{children:["Also the following class properties of ",(0,i.jsx)(e.code,{children:"RxDocument"})," cannot be used as top level fields because they would clash when the RxDocument property is accessed:"]}),"\n",(0,i.jsx)(e.figure,{"data-rehype-pretty-code-figure":"",children:(0,i.jsx)(e.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"json","data-theme":"css-variables",children:(0,i.jsxs)(e.code,{"data-language":"json","data-theme":"css-variables",style:{display:"grid"},children:[(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"["})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "collection"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "_data"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "_propertyCache"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "isInstanceOfRxDocument"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "primaryPath"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "primary"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "revision"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "deleted$"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "deleted$$"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "deleted"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "getLatest"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "$"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "$$"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "get$"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "get$$"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "populate"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "get"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "toJSON"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "toMutableJSON"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "update"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "incrementalUpdate"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "updateCRDT"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "putAttachment"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "putAttachmentBase64"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "getAttachment"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "allAttachments"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "allAttachments$"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "modify"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "incrementalModify"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "patch"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "incrementalPatch"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "_saveData"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "remove"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "incrementalRemove"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "close"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "deleted"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "synced"'})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"]"})})]})})}),"\n",(0,i.jsx)(e.h2,{id:"faq",children:"FAQ"}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:"How can I store a Date?"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(e.p,{children:["With RxDB you can only store plain JSON data inside of a document. You cannot store a JavaScript ",(0,i.jsx)(e.code,{children:"new Date()"})," instance directly. This is for performance reasons and because ",(0,i.jsx)(e.code,{children:"Date()"})," is a mutable thing where changing it at any time might cause strange problem that are hard to debug."]}),(0,i.jsxs)(e.p,{children:["To store a date in RxDB, you have to define a string field with a ",(0,i.jsx)(e.code,{children:"format"})," attribute:"]}),(0,i.jsx)(e.figure,{"data-rehype-pretty-code-figure":"",children:(0,i.jsx)(e.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"json","data-theme":"css-variables",children:(0,i.jsxs)(e.code,{"data-language":"json","data-theme":"css-variables",style:{display:"grid"},children:[(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'   "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "string"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'   "format"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "date-time"'})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),(0,i.jsxs)(e.p,{children:["When storing the data you have to first transform your ",(0,i.jsx)(e.code,{children:"Date"})," object into a string ",(0,i.jsx)(e.code,{children:"Date.toISOString()"}),".\nBecause the ",(0,i.jsx)(e.code,{children:"date-time"})," is sortable, you can do whatever query operations on that field and even use it as an index."]})]})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:"How to store schemaless data?"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(e.p,{children:['By design, RxDB requires that every collection has a schema. This means you cannot create a truly "schema-less" collection where top-level fields are unknown at schema creation time. RxDB must know about all fields of a document at the top level to perform validation, index creation, and other internal optimizations.\nHowever, there is a way to store data of arbitrary structure at sub-fields. To do this, define a property with ',(0,i.jsx)(e.code,{children:'type: "object"'})," in your schema. For example:"]}),(0,i.jsx)(e.figure,{"data-rehype-pretty-code-figure":"",children:(0,i.jsx)(e.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"ts","data-theme":"css-variables",children:(0,i.jsxs)(e.code,{"data-language":"ts","data-theme":"css-variables",style:{display:"grid"},children:[(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "version"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:": "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "primaryKey"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:": "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"id"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:": "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"object"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "properties"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:": {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'        "id"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'            "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "string"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'            "maxLength"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 100"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"        }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'        "myDynamicData"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'            "type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "object"'})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"            // Here you can store any JSON data"})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"            // because it's an open object."})}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"        }"})}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    }"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{"data-line":"",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "required"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:": ["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"id"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"]"})]}),"\n",(0,i.jsx)(e.span,{"data-line":"",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})})]})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:["Why does RxDB automatically set ",(0,i.jsx)(e.code,{children:"additionalProperties: false"})," at the top level"]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(e.p,{children:["RxDB automatically sets ",(0,i.jsx)(e.code,{children:"additionalProperties: false"})," at the top level of a schema to ensure that all top-level fields are known in advance. This design choice offers several benefits:"]}),(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Prevents collisions with RxDocument class properties:\nRxDB documents have built-in class methods (e.g., .toJSON, .save) at the top level. By forbidding unknown top-level properties, we avoid accidental naming collisions with these built-in methods."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Avoids conflicts with user-defined ORM functions:\nDevelopers can add custom ",(0,i.jsx)(e.a,{href:"/orm.html",children:"ORM methods"})," to RxDocuments. If top-level properties were unbounded, a property name could accidentally conflict with a method name, leading to unexpected behavior."]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Improves TypeScript typings:\nIf RxDB didn't know about all top-level fields, the document type would effectively become ",(0,i.jsx)(e.code,{children:"any"}),". That means a simple typo like ",(0,i.jsx)(e.code,{children:"myDocument.toJOSN()"})," would only be caught at runtime, not at build time. By disallowing unknown properties, TypeScript can provide strict typing and catch errors sooner."]}),"\n"]}),"\n"]})]})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:"Can't change the schema of a collection"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(e.p,{children:["When you make changes to the schema of a collection, you sometimes can get an error like\n",(0,i.jsx)(e.code,{children:"Error: addCollections(): another instance created this collection with a different schema"}),"."]}),(0,i.jsx)(e.p,{children:"This means you have created a collection before and added document-data to it.\nWhen you now just change the schema, it is likely that the new schema does not match the saved documents inside of the collection.\nThis would cause strange bugs and would be hard to debug, so RxDB check's if your schema has changed and throws an error."}),(0,i.jsxs)(e.p,{children:["To change the schema in ",(0,i.jsx)(e.strong,{children:"production"}),"-mode, do the following steps:"]}),(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Increase the ",(0,i.jsx)(e.code,{children:"version"})," by 1"]}),"\n",(0,i.jsxs)(e.li,{children:["Add the appropriate ",(0,i.jsx)(e.a,{href:"https://pubkey.github.io/rxdb/migration-schema.html",children:"migrationStrategies"})," so the saved data will be modified to match the new schema"]}),"\n"]}),(0,i.jsxs)(e.p,{children:["In ",(0,i.jsx)(e.strong,{children:"development"}),"-mode, the schema-change can be simplified by ",(0,i.jsx)(e.strong,{children:"one of these"})," strategies:"]}),(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Use the memory-storage so your db resets on restart and your schema is not saved permanently"}),"\n",(0,i.jsxs)(e.li,{children:["Call ",(0,i.jsx)(e.code,{children:"removeRxDatabase('mydatabasename', RxStorage);"})," before creating a new RxDatabase-instance"]}),"\n",(0,i.jsxs)(e.li,{children:["Add a timestamp as suffix to the database-name to create a new one each run like ",(0,i.jsx)(e.code,{children:"name: 'heroesDB' + new Date().getTime()"})]}),"\n"]})]})]})]})}function h(s={}){const{wrapper:e}={...(0,o.R)(),...s.components};return e?(0,i.jsx)(e,{...s,children:(0,i.jsx)(d,{...s})}):d(s)}},8453:(s,e,n)=>{n.d(e,{R:()=>a,x:()=>l});var r=n(6540);const i={},o=r.createContext(i);function a(s){const e=r.useContext(o);return r.useMemo(function(){return"function"==typeof s?s(e):{...e,...s}},[e,s])}function l(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(i):s.components||i:a(s.components),r.createElement(o.Provider,{value:e},s.children)}}}]);