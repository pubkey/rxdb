"use strict";(globalThis.webpackChunkrxdb=globalThis.webpackChunkrxdb||[]).push([[3185],{924(e,s,n){n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"rx-local-document","title":"Master Local Documents in RxDB","description":"Effortlessly store custom metadata and app settings in RxDB. Learn how Local Documents keep data flexible, secure, and easy to manage.","source":"@site/docs/rx-local-document.md","sourceDirName":".","slug":"/rx-local-document.html","permalink":"/rx-local-document.html","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Master Local Documents in RxDB","slug":"rx-local-document.html","description":"Effortlessly store custom metadata and app settings in RxDB. Learn how Local Documents keep data flexible, secure, and easy to manage."},"sidebar":"tutorialSidebar","previous":{"title":"RxState","permalink":"/rx-state.html"},"next":{"title":"Cleanup","permalink":"/cleanup.html"}}');var r=n(4848),a=n(8453);const l={title:"Master Local Documents in RxDB",slug:"rx-local-document.html",description:"Effortlessly store custom metadata and app settings in RxDB. Learn how Local Documents keep data flexible, secure, and easy to manage."},i="Local Documents",t={},c=[{value:"Add the local documents plugin",id:"add-the-local-documents-plugin",level:2},{value:"Activate the plugin for a RxDatabase or RxCollection",id:"activate-the-plugin-for-a-rxdatabase-or-rxcollection",level:2},{value:"insertLocal()",id:"insertlocal",level:2},{value:"upsertLocal()",id:"upsertlocal",level:2},{value:"getLocal()",id:"getlocal",level:2},{value:"getLocal$()",id:"getlocal-1",level:2},{value:"RxLocalDocument",id:"rxlocaldocument",level:2}];function d(e){const s={a:"a",admonition:"admonition",code:"code",figure:"figure",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"local-documents",children:"Local Documents"})}),"\n",(0,r.jsx)(s.p,{children:"Local documents are a special class of documents which are used to store local metadata.\nThey come in handy when you want to store settings or additional data next to your documents."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Local Documents can exist on a ",(0,r.jsx)(s.a,{href:"/rx-database.html",children:"RxDatabase"})," or ",(0,r.jsx)(s.a,{href:"/rx-collection.html",children:"RxCollection"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Local Document do not have to match the collections schema."}),"\n",(0,r.jsx)(s.li,{children:"Local Documents do not get replicated."}),"\n",(0,r.jsx)(s.li,{children:"Local Documents will not be found on queries."}),"\n",(0,r.jsx)(s.li,{children:"Local Documents can not have attachments."}),"\n",(0,r.jsxs)(s.li,{children:["Local Documents will not get handled by the ",(0,r.jsx)(s.a,{href:"/migration-schema.html",children:"migration-schema"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["The id of a local document has the ",(0,r.jsx)(s.code,{children:"maxLength"})," of ",(0,r.jsx)(s.code,{children:"128"})," characters."]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["While local documents can be very useful, in many cases the ",(0,r.jsx)(s.a,{href:"/rx-state.html",children:"RxState"})," API is more convenient."]})}),"\n",(0,r.jsx)(s.h2,{id:"add-the-local-documents-plugin",children:"Add the local documents plugin"}),"\n",(0,r.jsxs)(s.p,{children:["To enable the local documents, you have to add the ",(0,r.jsx)(s.code,{children:"local-documents"})," plugin."]}),"\n",(0,r.jsx)(s.figure,{"data-rehype-pretty-code-figure":"",children:(0,r.jsx)(s.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"ts","data-theme":"css-variables",children:(0,r.jsxs)(s.code,{"data-language":"ts","data-theme":"css-variables",style:{display:"grid"},children:[(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { addRxPlugin } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'rxdb'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { RxDBLocalDocumentsPlugin } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'rxdb/plugins/local-documents'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"addRxPlugin"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(RxDBLocalDocumentsPlugin);"})]})]})})}),"\n",(0,r.jsx)(s.h2,{id:"activate-the-plugin-for-a-rxdatabase-or-rxcollection",children:"Activate the plugin for a RxDatabase or RxCollection"}),"\n",(0,r.jsxs)(s.p,{children:["For better performance, the local document plugin does not create a storage for every database or collection that is created.\nInstead you have to set ",(0,r.jsx)(s.code,{children:"localDocuments: true"})," when you want to store local documents in the instance."]}),"\n",(0,r.jsx)(s.figure,{"data-rehype-pretty-code-figure":"",children:(0,r.jsx)(s.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"js","data-theme":"css-variables",children:(0,r.jsxs)(s.code,{"data-language":"js","data-theme":"css-variables",style:{display:"grid"},children:[(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// activate local documents on a RxDatabase"})}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" myDatabase"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" createRxDatabase"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'mydatabase'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    storage"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" getRxStorageLocalstorage"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    localDocuments"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" true"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:" // <- activate this to store local documents in the database"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"});"})}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:" "}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"myDatabase"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".addCollections"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  messages"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    schema"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" messageSchema"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    localDocuments"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" true"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:" // <- activate this to store local documents in the collection"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"});"})})]})})}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["If you want to store local documents in a ",(0,r.jsx)(s.code,{children:"RxCollection"})," but ",(0,r.jsx)(s.strong,{children:"NOT"})," in the ",(0,r.jsx)(s.code,{children:"RxDatabase"}),", you ",(0,r.jsx)(s.strong,{children:"MUST NOT"})," set ",(0,r.jsx)(s.code,{children:"localDocuments: true"})," in the ",(0,r.jsx)(s.code,{children:"RxDatabase"})," because it will only slow down the initial database creation."]})}),"\n",(0,r.jsx)(s.h2,{id:"insertlocal",children:"insertLocal()"}),"\n",(0,r.jsxs)(s.p,{children:["Creates a local document for the database or collection. Throws if a local document with the same id already exists. Returns a Promise which resolves the new ",(0,r.jsx)(s.code,{children:"RxLocalDocument"}),"."]}),"\n",(0,r.jsx)(s.figure,{"data-rehype-pretty-code-figure":"",children:(0,r.jsx)(s.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"javascript","data-theme":"css-variables",children:(0,r.jsxs)(s.code,{"data-language":"javascript","data-theme":"css-variables",style:{display:"grid"},children:[(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" myCollection"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".insertLocal"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    'foobar'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"   // id"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    {           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// data"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        foo"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'bar'"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:");"})}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:" "}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// you can also use local-documents on a database"})}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" myDatabase"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".insertLocal"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    'foobar'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"   // id"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    {           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// data"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        foo"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'bar'"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:");"})})]})})}),"\n",(0,r.jsx)(s.h2,{id:"upsertlocal",children:"upsertLocal()"}),"\n",(0,r.jsxs)(s.p,{children:["Creates a local document for the database or collection if not exists. Overwrites the if exists. Returns a Promise which resolves the ",(0,r.jsx)(s.code,{children:"RxLocalDocument"}),"."]}),"\n",(0,r.jsx)(s.figure,{"data-rehype-pretty-code-figure":"",children:(0,r.jsx)(s.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"javascript","data-theme":"css-variables",children:(0,r.jsxs)(s.code,{"data-language":"javascript","data-theme":"css-variables",style:{display:"grid"},children:[(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" myCollection"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".upsertLocal"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    'foobar'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"   // id"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    {           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// data"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        foo"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'bar'"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:");"})})]})})}),"\n",(0,r.jsx)(s.h2,{id:"getlocal",children:"getLocal()"}),"\n",(0,r.jsxs)(s.p,{children:["Find a ",(0,r.jsx)(s.code,{children:"RxLocalDocument"})," by its id. Returns a Promise which resolves the ",(0,r.jsx)(s.code,{children:"RxLocalDocument"})," or ",(0,r.jsx)(s.code,{children:"null"})," if not exists."]}),"\n",(0,r.jsx)(s.figure,{"data-rehype-pretty-code-figure":"",children:(0,r.jsx)(s.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"javascript","data-theme":"css-variables",children:(0,r.jsx)(s.code,{"data-language":"javascript","data-theme":"css-variables",style:{display:"grid"},children:(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" myCollection"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".getLocal"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'foobar'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:");"})]})})})}),"\n",(0,r.jsx)(s.h2,{id:"getlocal-1",children:"getLocal$()"}),"\n",(0,r.jsxs)(s.p,{children:["Like ",(0,r.jsx)(s.code,{children:"getLocal()"})," but returns an ",(0,r.jsx)(s.code,{children:"Observable"})," that emits the document or ",(0,r.jsx)(s.code,{children:"null"})," if not exists."]}),"\n",(0,r.jsx)(s.figure,{"data-rehype-pretty-code-figure":"",children:(0,r.jsx)(s.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"javascript","data-theme":"css-variables",children:(0,r.jsxs)(s.code,{"data-language":"javascript","data-theme":"css-variables",style:{display:"grid"},children:[(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" subscription"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" myCollection"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".getLocal$"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'foobar'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".subscribe"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(documentOrNull "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"    console"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".dir"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(documentOrNull); "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// > RxLocalDocument or null"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"});"})})]})})}),"\n",(0,r.jsx)(s.h2,{id:"rxlocaldocument",children:"RxLocalDocument"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.code,{children:"RxLocalDocument"})," behaves like a normal ",(0,r.jsx)(s.code,{children:"RxDocument"}),"."]}),"\n",(0,r.jsx)(s.figure,{"data-rehype-pretty-code-figure":"",children:(0,r.jsx)(s.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"javascript","data-theme":"css-variables",children:(0,r.jsxs)(s.code,{"data-language":"javascript","data-theme":"css-variables",style:{display:"grid"},children:[(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" myCollection"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".getLocal"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'foobar'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:");"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:" "}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// access data"})}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" foo"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".get"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'foo'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:");"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:" "}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// change data"})}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".set"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'foo'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'bar2'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:");"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".save"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"();"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:" "}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// observe data"})}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".get$"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'foo'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".subscribe"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(value "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"/* .. */"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" });"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:" "}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// remove it"})}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".remove"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"();"})]})]})})}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Because the local document does not have a schema, accessing the documents data-fields via pseudo-proxy will not work."})}),"\n",(0,r.jsx)(s.figure,{"data-rehype-pretty-code-figure":"",children:(0,r.jsx)(s.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"javascript","data-theme":"css-variables",children:(0,r.jsxs)(s.code,{"data-language":"javascript","data-theme":"css-variables",style:{display:"grid"},children:[(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" foo"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".foo; "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// undefined"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" foo"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".get"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'foo'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"); "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// works!"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:" "}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".foo "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'bar'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"; "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// does not work!"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".set"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'foo'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'bar'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"); "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// works"})]})]})})}),"\n",(0,r.jsxs)(s.p,{children:["For the usage with typescript, you can have access to the typed data of the document over ",(0,r.jsx)(s.code,{children:"toJSON()"})]}),"\n",(0,r.jsx)(s.figure,{"data-rehype-pretty-code-figure":"",children:(0,r.jsx)(s.pre,{style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0","data-language":"ts","data-theme":"css-variables",children:(0,r.jsxs)(s.code,{"data-language":"ts","data-theme":"css-variables",style:{display:"grid"},children:[(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"declare"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" MyLocalDocumentType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  foo"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" string"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" myCollection"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".upsertLocal"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"MyLocalDocumentType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">("})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    'foobar'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"   // id"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    {           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// data"})]}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        foo"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'bar'"})]}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:");"})}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:" "}),"\n",(0,r.jsx)(s.span,{"data-line":"",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// typescript will know that foo is a string"})}),"\n",(0,r.jsxs)(s.span,{"data-line":"",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" foo"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" localDoc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".toJSON"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"().foo;"})]})]})})})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,s,n){n.d(s,{R:()=>l,x:()=>i});var o=n(6540);const r={},a=o.createContext(r);function l(e){const s=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),o.createElement(a.Provider,{value:s},e.children)}}}]);