<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-why-nosql" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Why NoSQL Powers Modern UI Apps | RxDB - JavaScript Database</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://rxdb.info/img/rxdb_social_card.png"><meta data-rh="true" name="twitter:image" content="https://rxdb.info/img/rxdb_social_card.png"><meta data-rh="true" property="og:url" content="https://rxdb.info/why-nosql.html"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Why NoSQL Powers Modern UI Apps | RxDB - JavaScript Database"><meta data-rh="true" name="description" content="Discover how NoSQL enables offline-first UI apps. Learn about easy replication, conflict resolution, and why relational data isn&#x27;t always necessary."><meta data-rh="true" property="og:description" content="Discover how NoSQL enables offline-first UI apps. Learn about easy replication, conflict resolution, and why relational data isn&#x27;t always necessary."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://rxdb.info/why-nosql.html"><link data-rh="true" rel="alternate" href="https://rxdb.info/why-nosql.html" hreflang="en"><link data-rh="true" rel="alternate" href="https://rxdb.info/why-nosql.html" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-62D63SY3S0"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-62D63SY3S0",{})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-PL63TR5",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>






<meta name="theme-color" content="#ed168f">
<link rel="icon" type="image/svg+xml" href="/files/logo/logo.svg">
<link rel="apple-touch-icon" href="/img/apple-touch-icon.png" sizes="180x180">
<link rel="preconnect" href="https://consentcdn.cookiebot.com/">
<link rel="preconnect" href="https://consent.cookiebot.com/">
<link rel="preconnect" href="https://region1.analytics.google.com/">
<link rel="preconnect" href="https://www.redditstatic.com/">
<link rel="preconnect" href="https://pixel-config.reddit.com/"><link rel="stylesheet" href="/assets/css/styles.b066e612.css">
<script src="/assets/js/runtime~main.f8cb08bf.js" defer="defer"></script>
<script src="/assets/js/main.c9c8ff04.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PL63TR5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme-choice","dark"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/files/logo/logo_text_white.svg"><link rel="preload" as="image" href="./files/no-sql.png"><link rel="preload" as="image" href="./files/why-no-transactions.jpg"><link rel="preload" as="image" href="./files/no-relational-data.png"><link rel="preload" as="image" href="./files/database-replication.png"><link rel="preload" as="image" href="./files/typescript.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/files/logo/logo_text_white.svg" alt="RxDB" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/files/logo/logo_text_white.svg" alt="RxDB" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/overview.html">Docs</a><div class="dropdown-wrapper"><a class="navbar__item navbar__link" dropdown="sync" href="/replication.html">Sync</a></div><div class="dropdown-wrapper"><a class="navbar__item navbar__link" dropdown="storages" href="/rx-storage.html">Storages</a></div><a class="navbar__item navbar__link" href="/premium/">Premium</a><a class="navbar__item navbar__link" href="/consulting/">Support</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="/chat/" class="navbar__item navbar__link navbar-icon navbar__item navbar-icon-discord" target="_blank"> </a><a href="/code/" class="navbar__item navbar__link navbar-icon navbar__item navbar-icon-github" target="_blank"> </a></div></div><div class="navbar-line" style="position:fixed;left:0;z-index:10;height:2px;width:100vw;background-color:var(--color-top);border-top-right-radius:2px;border-bottom-right-radius:2px;transform-origin:left center;will-change:transform;backface-visibility:hidden;contain:layout;transform:scaleX(0)"></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_mhZE"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><div style="padding:10px;padding-top:30px;margin-left:auto;margin-right:auto"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" aria-label="Search" class="navbar__search-input search-bar" style="margin-left:auto;margin-right:auto;display:block"></div></div><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/overview.html"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview.html"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/quickstart.html"><span title="ðŸš€ Quickstart" class="linkLabel_WmDU">ðŸš€ Quickstart</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/install.html"><span title="Installation" class="linkLabel_WmDU">Installation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-mode.html"><span title="Development Mode" class="linkLabel_WmDU">Development Mode</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/typescript.html"><span title="TypeScript Setup" class="linkLabel_WmDU">TypeScript Setup</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rx-database.html"><span title="Core Entities" class="categoryLinkLabel_W154">Core Entities</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rx-storage.html"><span title="ðŸ’¾ Storages" class="categoryLinkLabel_W154">ðŸ’¾ Storages</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/schema-validation.html"><span title="Storage Wrappers" class="categoryLinkLabel_W154">Storage Wrappers</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/replication.html"><span title="ðŸ”„ Replication" class="categoryLinkLabel_W154">ðŸ”„ Replication</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rx-server.html"><span title="Server" class="categoryLinkLabel_W154">Server</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/transactions-conflicts-revisions.html"><span title="How RxDB works" class="categoryLinkLabel_W154">How RxDB works</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/migration-schema.html"><span title="Advanced Features" class="categoryLinkLabel_W154">Advanced Features</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/react.html"><span title="Integrations" class="categoryLinkLabel_W154">Integrations</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rx-storage-performance.html"><span title="Performance" class="categoryLinkLabel_W154">Performance</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/releases/17.0.0.html"><span title="Releases" class="categoryLinkLabel_W154">Releases</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/articles/browser-database.html"><span title="Articles" class="categoryLinkLabel_W154">Articles</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/browser-database.html"><span title="Benefits of RxDB &amp; Browser Databases" class="linkLabel_WmDU">Benefits of RxDB &amp; Browser Databases</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/local-first-future.html"><span title="Why Local-First Software Is the Future and its Limitations" class="linkLabel_WmDU">Why Local-First Software Is the Future and its Limitations</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/why-nosql.html"><span title="Why NoSQL Powers Modern UI Apps" class="linkLabel_WmDU">Why NoSQL Powers Modern UI Apps</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/downsides-of-offline-first.html"><span title="Downsides of Local First / Offline First" class="linkLabel_WmDU">Downsides of Local First / Offline First</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-database.html"><span title="RxDB - The Real-Time Database for Node.js" class="linkLabel_WmDU">RxDB - The Real-Time Database for Node.js</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/offline-first.html"><span title="Local First / Offline First" class="linkLabel_WmDU">Local First / Offline First</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-database.html"><span title="React Native Database - Sync &amp; Store Like a Pro" class="linkLabel_WmDU">React Native Database - Sync &amp; Store Like a Pro</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/angular-database.html"><span title="RxDB as a Database in an Angular Application" class="linkLabel_WmDU">RxDB as a Database in an Angular Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/browser-storage.html"><span title="Browser Storage - RxDB as a Database for Browsers" class="linkLabel_WmDU">Browser Storage - RxDB as a Database for Browsers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/data-base.html"><span title="Empower Web Apps with Reactive RxDB Data-base" class="linkLabel_WmDU">Empower Web Apps with Reactive RxDB Data-base</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/embedded-database.html"><span title="Embedded Database, Real-time Speed - RxDB" class="linkLabel_WmDU">Embedded Database, Real-time Speed - RxDB</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/flutter-database.html"><span title="Supercharge Flutter Apps with the RxDB Database" class="linkLabel_WmDU">Supercharge Flutter Apps with the RxDB Database</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/frontend-database.html"><span title="RxDB - The Ultimate JS Frontend Database" class="linkLabel_WmDU">RxDB - The Ultimate JS Frontend Database</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/in-memory-nosql-database.html"><span title="RxDB In-Memory NoSQL - Supercharge Real-Time Apps" class="linkLabel_WmDU">RxDB In-Memory NoSQL - Supercharge Real-Time Apps</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/ionic-database.html"><span title="RxDB - The Perfect Ionic Database" class="linkLabel_WmDU">RxDB - The Perfect Ionic Database</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/ionic-storage.html"><span title="RxDB - Local Ionic Storage with Encryption, Compression &amp; Sync" class="linkLabel_WmDU">RxDB - Local Ionic Storage with Encryption, Compression &amp; Sync</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/json-database.html"><span title="RxDB - The JSON Database Built for JavaScript" class="linkLabel_WmDU">RxDB - The JSON Database Built for JavaScript</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/websockets-sse-polling-webrtc-webtransport.html"><span title="WebSockets vs Server-Sent-Events vs Long-Polling vs WebRTC vs WebTransport" class="linkLabel_WmDU">WebSockets vs Server-Sent-Events vs Long-Polling vs WebRTC vs WebTransport</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/localstorage.html"><span title="Using localStorage in Modern Applications - A Comprehensive Guide" class="linkLabel_WmDU">Using localStorage in Modern Applications - A Comprehensive Guide</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/mobile-database.html"><span title="Real-Time &amp; Offline - RxDB for Mobile Apps" class="linkLabel_WmDU">Real-Time &amp; Offline - RxDB for Mobile Apps</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/progressive-web-app-database.html"><span title="RxDB as a Database for Progressive Web Apps (PWA)" class="linkLabel_WmDU">RxDB as a Database for Progressive Web Apps (PWA)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/react-database.html"><span title="RxDB as a Database for React Applications" class="linkLabel_WmDU">RxDB as a Database for React Applications</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/realtime-database.html"><span title="What Really Is a Realtime Database?" class="linkLabel_WmDU">What Really Is a Realtime Database?</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/angular-indexeddb.html"><span title="Build Smarter Offline-First Angular Apps - How RxDB Beats IndexedDB Alone" class="linkLabel_WmDU">Build Smarter Offline-First Angular Apps - How RxDB Beats IndexedDB Alone</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/react-indexeddb.html"><span title="IndexedDB Database in React Apps - The Power of RxDB" class="linkLabel_WmDU">IndexedDB Database in React Apps - The Power of RxDB</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/capacitor-database.html"><span title="Capacitor Database Guide - SQLite, RxDB &amp; More" class="linkLabel_WmDU">Capacitor Database Guide - SQLite, RxDB &amp; More</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/alternatives.html"><span title="Alternatives for realtime local-first JavaScript applications and local databases" class="linkLabel_WmDU">Alternatives for realtime local-first JavaScript applications and local databases</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/electron-database.html"><span title="Electron Database - Storage adapters for SQLite, Filesystem and In-Memory" class="linkLabel_WmDU">Electron Database - Storage adapters for SQLite, Filesystem and In-Memory</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/optimistic-ui.html"><span title="Building an Optimistic UI with RxDB" class="linkLabel_WmDU">Building an Optimistic UI with RxDB</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/local-database.html"><span title="What is a Local Database and Why RxDB is the Best Local Database for JavaScript Applications" class="linkLabel_WmDU">What is a Local Database and Why RxDB is the Best Local Database for JavaScript Applications</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/react-native-encryption.html"><span title="React Native Encryption and Encrypted Database/Storage" class="linkLabel_WmDU">React Native Encryption and Encrypted Database/Storage</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/vue-database.html"><span title="RxDB as a Database in a Vue.js Application" class="linkLabel_WmDU">RxDB as a Database in a Vue.js Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/vue-indexeddb.html"><span title="IndexedDB Database in Vue Apps - The Power of RxDB" class="linkLabel_WmDU">IndexedDB Database in Vue Apps - The Power of RxDB</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/jquery-database.html"><span title="RxDB as a Database in a jQuery Application" class="linkLabel_WmDU">RxDB as a Database in a jQuery Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/firestore-alternative.html"><span title="RxDB - Firestore Alternative to Sync with Your Own Backend" class="linkLabel_WmDU">RxDB - Firestore Alternative to Sync with Your Own Backend</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/firebase-realtime-database-alternative.html"><span title="RxDB - Firebase Realtime Database Alternative to Sync With Your Own Backend" class="linkLabel_WmDU">RxDB - Firebase Realtime Database Alternative to Sync With Your Own Backend</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/offline-database.html"><span title="RxDB â€“ The Ultimate Offline Database with Sync and Encryption" class="linkLabel_WmDU">RxDB â€“ The Ultimate Offline Database with Sync and Encryption</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/zero-latency-local-first.html"><span title="Zero Latency Local First Apps with RxDB â€“ Sync, Encryption and Compression" class="linkLabel_WmDU">Zero Latency Local First Apps with RxDB â€“ Sync, Encryption and Compression</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/indexeddb-max-storage-limit.html"><span title="IndexedDB Max Storage Size Limit - Detailed Best Practices" class="linkLabel_WmDU">IndexedDB Max Storage Size Limit - Detailed Best Practices</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/json-based-database.html"><span title="JSON-Based Databases - Why NoSQL and RxDB Simplify App Development" class="linkLabel_WmDU">JSON-Based Databases - Why NoSQL and RxDB Simplify App Development</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/reactjs-storage.html"><span title="ReactJS Storage - From Basic LocalStorage to Advanced Offline Apps with RxDB" class="linkLabel_WmDU">ReactJS Storage - From Basic LocalStorage to Advanced Offline Apps with RxDB</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contribution.html"><span title="Contribute" class="linkLabel_WmDU">Contribute</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/consulting/"><span title="Contact" class="categoryLinkLabel_W154">Contact</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Why UI applications need NoSQL</h1></header>
<p><a href="https://rxdb.info" target="_blank" rel="noopener noreferrer" class="">RxDB</a>, a client side, offline first, JavaScript database, is now several years old.
Often new users appear in the chat and ask for that one simple feature:
They want to store and query <strong>relational data</strong>.</p>
<blockquote>
<p>So why not just implement SQL?</p>
</blockquote>
<p>All these client databases out there have on some kind of document based, NoSQL like, storage engine. PouchDB, Firebase, AWS Datastore, RethinkDB&#x27;s <a href="https://github.com/rethinkdb/horizon" target="_blank" rel="noopener noreferrer" class="">Horizon</a>, Meteor&#x27;s <a href="https://github.com/mWater/minimongo" target="_blank" rel="noopener noreferrer" class="">Minimongo</a>, <a href="https://parseplatform.org/" target="_blank" rel="noopener noreferrer" class="">Parse</a>, <a href="https://realm.io/" target="_blank" rel="noopener noreferrer" class="">Realm</a>. They all do not have real relational data.</p>
<p>They might have some kind of weak relational foreign keys like the <a class="" href="/population.html">RxDB Population</a>
or the <a href="https://docs.amplify.aws/lib/datastore/relational/q/platform/js/" target="_blank" rel="noopener noreferrer" class="">relational models</a> of AWS Datastore.
But these relations are weak. The foreign keys are not enforced to be valid like in PostgreSQL, and you cannot query
the rows with complex subqueries over different tables or collections and then make mutations based on the result.</p>
<p>There must be a reason for that. In fact, there are multiple of them and in the following I want to show you why you can neither have, nor want real relational data when you have a client-side database with replication.</p>
<p align="center"><img src="./files/no-sql.png" alt="NoSQL" width="100"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="transactions-do-not-work-with-humans-involved">Transactions do not work with humans involved<a href="#transactions-do-not-work-with-humans-involved" class="hash-link" aria-label="Direct link to Transactions do not work with humans involved" title="Direct link to Transactions do not work with humans involved" translate="no">â€‹</a></h2>
<p>On the server side, transactions are used to run steps of logic inside of a self contained <code>unit of work</code>. The database system ensures that multiple transactions do not run in parallel or interfere with each other.
This works well because on the server side you can predict how longer everything takes. It can be ensured that one transaction does not block everything else for too long which would make the system not responding anymore to other requests.</p>
<p>When you build a UI based application that is used by a real human, you can no longer predict how long anything takes.
The user clicks the edit button and expects to not have anyone else change the document while the user is in edit mode.
Using a transaction to ensure nothing is changed in between, is not an option because the transaction could be open for a long
time and other background tasks, like replication, would no longer work.</p>
<p>So whenever a human is involved, this kind of logic has to be implemented using other strategies. Most NoSQL databases like <a class="" href="/">RxDB</a> or <a class="" href="/replication-couchdb.html">CouchDB</a> use a system based on <a class="" href="/transactions-conflicts-revisions.html">revision and conflicts</a> to handle these.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="transactions-do-not-work-with-offline-first">Transactions do not work with offline-first<a href="#transactions-do-not-work-with-offline-first" class="hash-link" aria-label="Direct link to Transactions do not work with offline-first" title="Direct link to Transactions do not work with offline-first" translate="no">â€‹</a></h2>
<p>When you want to build an <a class="" href="/offline-first.html">offline-first</a> application, it is assumed that the user can also read and write data, even when the device has lost the connection to the backend.
You could use database transactions on writes to the client&#x27;s database state, but enforcing a transaction boundary across other instances like clients or servers, is not possible when there is no connection.</p>
<p align="center"><img src="./files/why-no-transactions.jpg" alt="offline first vs relational transactions" width="400"></p>
<p>On the client you could run an update query where all <code>color: red</code> rows are changed to <code>color: blue</code>, but this would not guarantee that there will still be other <code>red</code> documents when the client goes online again and restarts the replication with the server.</p>
<figure data-rehype-pretty-code-figure=""><div class="codeBlockContainer_Ckt0 theme-code-block" style="position:relative;--prism-background-color:var(--bg-color-code);--prism-color:var(--shiki-foreground)"><pre style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-language="sql" data-theme="css-variables"><code data-language="sql" data-theme="css-variables" style="display:grid"><span data-line=""><span style="color:var(--shiki-token-keyword)">UPDATE</span><span style="color:var(--shiki-foreground)"> docs</span></span>
<span data-line=""><span style="color:var(--shiki-token-keyword)">SET</span><span style="color:var(--shiki-foreground)"> docs.color </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-string-expression)"> &#x27;red&#x27;</span></span>
<span data-line=""><span style="color:var(--shiki-token-keyword)">WHERE</span><span style="color:var(--shiki-foreground)"> docs.color </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-string-expression)"> &#x27;blue&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span></code></pre><div class="buttonGroup_M5ko"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_IEyt" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrPX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cVMy"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></figure>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="relational-queries-in-nosql">Relational queries in NoSQL<a href="#relational-queries-in-nosql" class="hash-link" aria-label="Direct link to Relational queries in NoSQL" title="Direct link to Relational queries in NoSQL" translate="no">â€‹</a></h2>
<p>What most people want from a relational database, is to run queries over multiple tables.
Some people think that they cannot do that with NoSQL, so let me explain.</p>
<p>Let&#x27;s say you have two tables with <code>customers</code> and <code>cities</code> where each city has an <code>id</code> and each customer has a <code>city_id</code>. You want to get every customer that resides in <code>Tokyo</code>. With SQL, you would use a query like this:</p>
<figure data-rehype-pretty-code-figure=""><div class="codeBlockContainer_Ckt0 theme-code-block" style="position:relative;--prism-background-color:var(--bg-color-code);--prism-color:var(--shiki-foreground)"><pre style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-language="sql" data-theme="css-variables"><code data-language="sql" data-theme="css-variables" style="display:grid"><span data-line=""><span style="color:var(--shiki-token-keyword)">SELECT</span><span style="color:var(--shiki-token-keyword)"> *</span></span>
<span data-line=""><span style="color:var(--shiki-token-keyword)">FROM</span><span style="color:var(--shiki-foreground)"> city</span></span>
<span data-line=""><span style="color:var(--shiki-token-keyword)">WHERE</span><span style="color:var(--shiki-foreground)"> city.name </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-string-expression)"> &#x27;Tokyo&#x27;</span></span>
<span data-line=""><span style="color:var(--shiki-token-keyword)">LEFT JOIN</span><span style="color:var(--shiki-foreground)"> customer </span><span style="color:var(--shiki-token-keyword)">ON</span><span style="color:var(--shiki-foreground)"> customer.city_id </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-foreground)"> city.id;</span></span></code></pre><div class="buttonGroup_M5ko"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_IEyt" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrPX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cVMy"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></figure>
<p>With <strong>NoSQL</strong> you can just do the same, but you have to write it manually:</p>
<figure data-rehype-pretty-code-figure=""><div class="codeBlockContainer_Ckt0 theme-code-block" style="position:relative;--prism-background-color:var(--bg-color-code);--prism-color:var(--shiki-foreground)"><pre style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-language="typescript" data-theme="css-variables"><code data-language="typescript" data-theme="css-variables" style="display:grid"><span data-line=""><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-token-constant)"> cityDocument</span><span style="color:var(--shiki-token-keyword)"> =</span><span style="color:var(--shiki-token-keyword)"> await</span><span style="color:var(--shiki-token-constant)"> db</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">cities</span><span style="color:var(--shiki-token-function)">.findOne</span><span style="color:var(--shiki-foreground)">()</span><span style="color:var(--shiki-token-function)">.where</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;name&#x27;</span><span style="color:var(--shiki-foreground)">)</span><span style="color:var(--shiki-token-function)">.equals</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;Tokyo&#x27;</span><span style="color:var(--shiki-foreground)">)</span><span style="color:var(--shiki-token-function)">.exec</span><span style="color:var(--shiki-foreground)">();</span></span>
<span data-line=""><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-token-constant)"> customerDocuments</span><span style="color:var(--shiki-token-keyword)"> =</span><span style="color:var(--shiki-token-keyword)"> await</span><span style="color:var(--shiki-token-constant)"> db</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">customers</span><span style="color:var(--shiki-token-function)">.find</span><span style="color:var(--shiki-foreground)">()</span><span style="color:var(--shiki-token-function)">.where</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;city_id&#x27;</span><span style="color:var(--shiki-foreground)">)</span><span style="color:var(--shiki-token-function)">.equals</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-constant)">cityDocument</span><span style="color:var(--shiki-foreground)">.id)</span><span style="color:var(--shiki-token-function)">.exec</span><span style="color:var(--shiki-foreground)">();</span></span></code></pre><div class="buttonGroup_M5ko"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_IEyt" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrPX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cVMy"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></figure>
<p>So what are the differences? The SQL version would run faster on a remote database server because it would aggregate all data there and return only the customers as result set. But when you have a local database, it is not really a difference. Querying the two tables by hand would have about the same performance as a JavaScript implementation of SQL that is running locally.</p>
<p>The main benefit from using SQL is, that the SQL query runs inside of a <strong>single transaction</strong>. When a change to one of our two tables happens, while our query runs, the SQL database will ensure that the write does not affect the result of the query. This could happen with NoSQL, while you retrieve the city document, the customer table gets changed and your result is not correct for the dataset that was there when you started the querying. As a workaround, you could observe the database for changes and if a change happened in between, you have to re-run everything.</p>
<p align="center"><img src="./files/no-relational-data.png" alt="no relational data" width="250"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="reliable-replication">Reliable replication<a href="#reliable-replication" class="hash-link" aria-label="Direct link to Reliable replication" title="Direct link to Reliable replication" translate="no">â€‹</a></h2>
<p>In an offline first app, your data is replicated from your backend servers to your users and you want it to be reliable.
The replication is <strong>reliable</strong> when, no matter what happens, every online client is able to run a replication
and end up with the <strong>exact same</strong> database state as any other client.</p>
<p>Implementing a reliable replication protocol is hard because of the circumstances of your app:</p>
<ul>
<li class="">Your users have unknown devices.</li>
<li class="">They have an unknown internet speed.</li>
<li class="">They can go offline or online at any time.</li>
<li class="">Clients can be offline for a several days with un-synced changes.</li>
<li class="">You can have many users at the same time.</li>
<li class="">The users can do many database writes at the same time to the same entities.</li>
</ul>
<p>Now lets say you have a SQL database and one of your users, called Alice, runs a query that mutates some rows, based on a condition.</p>
<figure data-rehype-pretty-code-figure=""><div class="codeBlockContainer_Ckt0 theme-code-block" style="position:relative;--prism-background-color:var(--bg-color-code);--prism-color:var(--shiki-foreground)"><pre style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-language="sql" data-theme="css-variables"><code data-language="sql" data-theme="css-variables" style="display:grid"><span data-line=""><span style="color:var(--shiki-foreground)"># mark all items </span><span style="color:var(--shiki-token-keyword)">out</span><span style="color:var(--shiki-foreground)"> of stock </span><span style="color:var(--shiki-token-keyword)">as</span><span style="color:var(--shiki-foreground)"> inStock</span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-foreground)">FALSE</span></span>
<span data-line=""><span style="color:var(--shiki-token-keyword)">UPDATE</span></span>
<span data-line=""><span style="color:var(--shiki-foreground)">  Table_A</span></span>
<span data-line=""><span style="color:var(--shiki-token-keyword)">SET</span></span>
<span data-line=""><span style="color:var(--shiki-foreground)">  Table_A.inStock </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-foreground)"> FALSE</span></span>
<span data-line=""><span style="color:var(--shiki-token-keyword)">FROM</span></span>
<span data-line=""><span style="color:var(--shiki-foreground)">  Table_A</span></span>
<span data-line=""><span style="color:var(--shiki-token-keyword)">WHERE</span></span>
<span data-line=""><span style="color:var(--shiki-foreground)">  Table_A.amountInStock </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-constant)"> 0</span></span></code></pre><div class="buttonGroup_M5ko"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_IEyt" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrPX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_cVMy"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></figure>
<p>At first, the query runs on the local database of Alice and everything is fine.</p>
<p>But at the same time Bob, the other client, updates a row and sets <code>amountInStock</code> from <code>0</code> to <code>1</code>.
Now Bob&#x27;s client replicates the changes from Alice and runs them. Bob will end up with a different database state than Alice because on one of the rows, the <code>WHERE</code> condition was not met. This is not what we want, so our replication protocol should be able to fix it. For that it has to reduce all mutations into a deterministic state.</p>
<p>Let me loosely describe how &quot;many&quot; SQL replications work:</p>
<p>Instead of just running all replicated queries, we remember a list of all past queries. When a new query comes in that happened <code>before</code> our last query, we roll back the previous queries, run the new query, and then re-execute our own queries on top of that. For that to work, all queries need a timestamp so we can order them correctly. But you cannot rely on the clock that is running at the client. Client side clocks drift, they can run in a different speed or even a malicious client modifies the clock on purpose. So instead of a normal timestamp, we have to use a <a href="https://jaredforsyth.com/posts/hybrid-logical-clocks/" target="_blank" rel="noopener noreferrer" class="">Hybrid Logical Clock</a> that takes a client generated id and the number of the clients query into account. Our timestamp will then look like <code>2021-10-04T15:29.40.273Z-0000-eede1195b7d94dd5</code>. These timestamps can be brought into a deterministic order and each client can run the replicated queries in the same order.</p>
<p>While this sounds easy and realizable, we have some problems:
This kind of replication works great when you replicate between multiple SQL servers. It does not work great when you replicate between a single server and many clients.</p>
<ol>
<li class="">As mentioned above, clients can be offline for a long time which could require us to do many and heavy rollbacks on each client when someone comes back after a long time and replicates the change.</li>
<li class="">We have many clients where many changes can appear and our database would have to roll back many times.</li>
<li class="">During the rollback, the database cannot be used for read queries.</li>
<li class="">It is required that each client downloads and keeps the whole query history.</li>
</ol>
<p>With <strong>NoSQL</strong>, replication works different. A new client downloads all current documents and each time a document changes, that document is downloaded again. Instead of replicating the query that leads to a data change, we just replicate the changed data itself. Of course, we could do the same with SQL and just replicate the affected rows of a query, like WatermelonDB <a href="https://youtu.be/uFvHURTRLxQ?t=1133" target="_blank" rel="noopener noreferrer" class="">does it</a>. This was a clever way to go for WatermelonDB, because it was initially made for React Native and did want to use the fast SQLite instead of the slow <a href="https://medium.com/@Sendbird/extreme-optimization-of-asyncstorage-in-react-native-b2a1e0107b34" target="_blank" rel="noopener noreferrer" class="">AsyncStorage</a>. But in a more general view, it defeats the whole purpose of having a replicating relational database because you have transactions locally, but these transactions become <strong>meaningless</strong> as soon as the data goes through the replication layer.</p>
<p align="center"><img src="./files/database-replication.png" alt="database replication" width="200"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="server-side-validation">Server side validation<a href="#server-side-validation" class="hash-link" aria-label="Direct link to Server side validation" title="Direct link to Server side validation" translate="no">â€‹</a></h2>
<p>Whenever there is client-side input, it must be validated on the server.
On a NoSQL database, validating a changed document is trivial. The client sends the changed document to the server, and the server can then check if the user was allowed to modify that one document and if the applied changes are ok.</p>
<p>Safely validating a SQL query is up to impossible.</p>
<ul>
<li class="">You first need a way to parse the query with all this complex SQL syntax and keywords.</li>
<li class="">You have to ensure that the query does not DOS your system.</li>
<li class="">Then you check which rows would be affected when running the query and if the user was allowed to change them</li>
<li class="">Then you check if the mutation to that rows are valid.</li>
</ul>
<p>For simple queries like an insert/update/delete to a single row, this might be doable. But a query with 4 <code>LEFT JOIN</code> will be hard.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="event-optimization">Event optimization<a href="#event-optimization" class="hash-link" aria-label="Direct link to Event optimization" title="Direct link to Event optimization" translate="no">â€‹</a></h2>
<p>With NoSQL databases, each write event always affects exactly one document. This makes it easy to optimize the processing of events at the client. For example instead of handling multiple updates to the same document, when the user comes online again, you could skip everything but the last event.</p>
<p>Similar to that you can optimize observable query results. When you query the <code>customers</code> table you get a query result of 10 customers. Now a new customer is added to the table and you want to know how the new query results look like. You could analyze the event and now you know that you only have to add the new customer to the previous results set, instead of running the whole query again. These types of optimizations can be run with all NoSQL queries and even work with <code>limit</code> and <code>skip</code> operators. In RxDB this all happens in the background with the <a href="https://github.com/pubkey/event-reduce" target="_blank" rel="noopener noreferrer" class="">EventReduce algorithm</a> that calculates new query results on incoming changes.</p>
<p>These optimizations do not really work with relational data. A change to one table could affect a query to any other tables. and you could not just calculate the new results based on the event. You would always have to re-run the full query to get the updated results.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="migration-without-relations">Migration without relations<a href="#migration-without-relations" class="hash-link" aria-label="Direct link to Migration without relations" title="Direct link to Migration without relations" translate="no">â€‹</a></h2>
<p>Sooner or later you change the layout of your data. You update the schema and you also have to migrate the stored rows/documents. In NoSQL this is often not a big deal because all of your documents are modeled as self containing piece of data. There is an old version of the document and you have a function that transforms it into the new version.</p>
<p>With relational data, nothing is self-contained. The relevant data for the migration of a single row could be inside any other table. So when changing the schema, it will be important which table to migrate first and how to orchestrate the migration or relations.</p>
<p>On client side applications, this is even harder because the client can close the application at any time and the migration must be able to continue.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="everything-can-be-downgraded-to-nosql">Everything can be downgraded to NoSQL<a href="#everything-can-be-downgraded-to-nosql" class="hash-link" aria-label="Direct link to Everything can be downgraded to NoSQL" title="Direct link to Everything can be downgraded to NoSQL" translate="no">â€‹</a></h2>
<p>To use an offline first database in the frontend, you have to make it compatible with your backend APIs.
Making software things compatible often means you have to find the <strong>lowest common denominator</strong>.
When you have SQLite in the frontend and want to replicate it with the backend, the backend also has to use SQLite. You cannot even use PostgreSQL because it has a different SQL dialect and some queries might fail. But you do not want to let the frontend dictate which technologies to use in the backend just to make replication work.</p>
<p>With NoSQL, you just have documents and writes to these documents. You can build a document based layer on top of everything by <strong>removing</strong> functionality. It can be built on top of SQL, but also on top of a graph database or even on top of a key-value store like <a class="" href="/adapters.html#leveldown">levelDB</a> or <a class="" href="/rx-storage-foundationdb.html">FoundationDB</a>.</p>
<p>With that document layer you can build a <a class="" href="/replication.html">Sync Engine</a> that serves documents sorted by the last update time and there you have a realtime replication.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="caching-query-results">Caching query results<a href="#caching-query-results" class="hash-link" aria-label="Direct link to Caching query results" title="Direct link to Caching query results" translate="no">â€‹</a></h2>
<p>Memory is limited and this is especially true for client side applications where you never know how much free RAM the device really has. You want to have a fast realtime UI, so your database must be able to cache query results.</p>
<p>When you run a SQL query like <code>SELECT ..</code> the result of it can be anything. An <code>array</code>, a <code>number</code>, a <code>string</code>, a single row, it depends on how the query goes on. So the caching strategy can only be to keep the result in memory, once for each query.
This scales very bad because the more queries you run, the more results you have to store in memory.</p>
<p>When you make a query to a NoSQL collection, you always know how the result will look like. It is a list of documents, based on the collection&#x27;s schema (if you have one). The result set is stored in memory, but because you get similar documents for different queries to the same collection, we can de-duplicated the documents. So when multiple queries return the same document, we only have it in the cache <strong>once</strong> and each query caches point to the same memory object. So no matter how many queries you make, your cache maximum is the collection size.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="typescript-support">TypeScript support<a href="#typescript-support" class="hash-link" aria-label="Direct link to TypeScript support" title="Direct link to TypeScript support" translate="no">â€‹</a></h2>
<p>Modern web apps are build with TypeScript and you want the transpiler to know the types of your query result so it can give you build time errors when something does not match. This is quite easy on document based systems. The typings of for each document of a collection can be generated from the schema, and all queries to that collection will always return the given document type. With SQL you have to manually write the typings for each query by hand because it can contain all these aggregate functions that affect the type of the query&#x27;s result.</p>
<p align="center"><img src="./files/typescript.png" alt="typescript" width="80"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-you-lose-with-nosql">What you lose with NoSQL<a href="#what-you-lose-with-nosql" class="hash-link" aria-label="Direct link to What you lose with NoSQL" title="Direct link to What you lose with NoSQL" translate="no">â€‹</a></h2>
<ul>
<li class="">You can not run relational queries across tables inside a single transaction.</li>
<li class="">You can not mutate documents based on a <code>WHERE</code> clause, in a single transaction.</li>
<li class="">You need to resolve replication conflicts on a per-document basis.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="but-there-is-database-xy">But there is database XY<a href="#but-there-is-database-xy" class="hash-link" aria-label="Direct link to But there is database XY" title="Direct link to But there is database XY" translate="no">â€‹</a></h2>
<p>Yes, there are SQL databases out there that run on the client side or have replication, but not both.</p>
<ul>
<li class="">WebSQL / <a href="https://github.com/sql-js/sql.js/" target="_blank" rel="noopener noreferrer" class="">sql.js</a>: In the past there was <strong>WebSQL</strong> in the browser. It was a direct mapping to SQLite because all browsers used the SQLite implementation. You could store relational data in it, but there was no concept of replication at any point in time. <strong>sql.js</strong> is an SQLite complied to JavaScript. It has not replication and it has (for now) no persistent storage, everything is stored in memory.</li>
<li class="">WatermelonDB is a SQL databases that runs in the client. WatermelonDB uses a document-based replication that is not able to replicate relational queries.</li>
<li class="">Cockroach / Spanner/ PostgreSQL etc. are SQL databases with replication. But they run on servers, not on clients, so they can make different trade offs.</li>
</ul>
<h1>Further read</h1>
<ul>
<li class="">
<p>Cockroach Labs: <a href="https://www.cockroachlabs.com/blog/living-without-atomic-clocks/" target="_blank" rel="noopener noreferrer" class="">Living Without Atomic Clocks</a></p>
</li>
<li class="">
<p><a class="" href="/transactions-conflicts-revisions.html">Transactions, Conflicts and Revisions in RxDB</a></p>
</li>
<li class="">
<p><a href="https://dbmsmusings.blogspot.com/2015/10/why-mongodb-cassandra-hbase-dynamodb_28.html" target="_blank" rel="noopener noreferrer" class="">Why MongoDB, Cassandra, HBase, DynamoDB, and Riak will only let you perform transactions on a single data item</a></p>
</li>
<li class="">
<p><code>Make a PR to this file if you have more interesting links to that topic</code></p>
</li>
</ul></div></article><ul style="margin-top:25px;list-style-type:none"><li style="line-height:4;color:var(--expo-theme-text-secondary)">Was this page helpful?<div style="border-radius:3px;border-color:var(--fontColor-offwhite);border-style:solid;border-width:1px;vertical-align:middle;padding:5px;padding-left:8px;padding-right:8px;text-align:center;justify-content:center;display:inline-flex;margin-left:20px;cursor:pointer"><img src="/img/thumbs-up-white.svg" loading="lazy" height="14"></div><div style="border-radius:3px;border-color:var(--fontColor-offwhite);border-style:solid;border-width:1px;vertical-align:middle;padding:5px;padding-left:8px;padding-right:8px;text-align:center;justify-content:center;display:inline-flex;margin-left:20px;cursor:pointer;transform:scale(1, -1)"><img src="/img/thumbs-up-white.svg" loading="lazy" height="14"></div></li><li><a href="/chat/" target="_blank" style="color:var(--fontColor-offwhite)"><img src="/img/community-links/discord-logo.svg" style="padding-right:16px;height:18px;vertical-align:middle" loading="lazy">Ask a question on the forums about <!-- -->Why UI applications...</a></li></ul><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a href="/articles/local-first-future.html" class="padding-button" style="display:inline-flex;height:auto;flex-direction:row;justify-content:left;align-items:center;gap:10px;font-size:1rem;font-weight:500;cursor:pointer;text-align:left;transition:all 0.2s ease-in-out;line-height:initial;user-select:none;box-sizing:border-box;text-decoration:none;position:relative;overflow:hidden;background:transparent;color:#fff;border:2px solid #fff;padding-top:14px;padding-bottom:14px"><span style="font-size:80%;display:contents">Previous</span><br>Â« <!-- -->Why Local-First Software Is the Future and its Limitations</a><a href="/downsides-of-offline-first.html" class="padding-button" style="display:inline-flex;height:auto;flex-direction:row;justify-content:right;align-items:center;gap:10px;font-size:1rem;font-weight:500;cursor:pointer;text-align:right;transition:all 0.2s ease-in-out;line-height:initial;user-select:none;box-sizing:border-box;text-decoration:none;position:relative;overflow:hidden;background:transparent;color:#fff;border:2px solid #fff;padding-top:14px;padding-bottom:14px"><span style="font-size:80%;display:contents">Next</span><br>Downsides of Local First / Offline First<!-- --> Â»</a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#transactions-do-not-work-with-humans-involved" class="table-of-contents__link toc-highlight">Transactions do not work with humans involved</a></li><li><a href="#transactions-do-not-work-with-offline-first" class="table-of-contents__link toc-highlight">Transactions do not work with offline-first</a></li><li><a href="#relational-queries-in-nosql" class="table-of-contents__link toc-highlight">Relational queries in NoSQL</a></li><li><a href="#reliable-replication" class="table-of-contents__link toc-highlight">Reliable replication</a></li><li><a href="#server-side-validation" class="table-of-contents__link toc-highlight">Server side validation</a></li><li><a href="#event-optimization" class="table-of-contents__link toc-highlight">Event optimization</a></li><li><a href="#migration-without-relations" class="table-of-contents__link toc-highlight">Migration without relations</a></li><li><a href="#everything-can-be-downgraded-to-nosql" class="table-of-contents__link toc-highlight">Everything can be downgraded to NoSQL</a></li><li><a href="#caching-query-results" class="table-of-contents__link toc-highlight">Caching query results</a></li><li><a href="#typescript-support" class="table-of-contents__link toc-highlight">TypeScript support</a></li><li><a href="#what-you-lose-with-nosql" class="table-of-contents__link toc-highlight">What you lose with NoSQL</a></li><li><a href="#but-there-is-database-xy" class="table-of-contents__link toc-highlight">But there is database XY</a></li></ul></div></div></div></div></main></div></div></div><div class="block footer dark"><div style="display:flex;flex-wrap:wrap;gap:44px" class="content"><div class="half left"><span><a variant="text" href="/" class="footer-logo-button"><img src="/files/logo/logo_text_white.svg" alt="RxDB" loading="lazy" class="width-140-120"></a><div class="footer-community-links"><a variant="text" href="/newsletter/" target="_blank" aria-label="Newsletter"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none"><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22.5 13.5v-7a2 2 0 0 0-2-2h-16a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8"></path><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m22.5 7.5-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2.5 7.5M19.5 16.5v6M16.5 19.5h6"></path></svg></a><a variant="text" href="https://twitter.com/intent/user?screen_name=rxdbjs" target="_blank" aria-label="Twitter"><img src="/files/icons/twitter-blue.svg" alt="Twitter" loading="lazy"></a><a variant="text" href="https://www.linkedin.com/company/rxdb" target="_blank" aria-label="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 21"><g clip-path="url(#a)"><path fill="#fff" d="M17.3 17.6h-3V13c0-1 0-2.5-1.6-2.5-1.5 0-1.8 1.2-1.8 2.5v4.7H8V8h2.9v1.3a3 3 0 0 1 2.9-1.6c3 0 3.6 2 3.6 4.6zM4.5 6.6a1.7 1.7 0 1 1 0-3.5 1.7 1.7 0 0 1 0 3.5m1.5 11H3V8h3zM18.8.4H1.5A1.5 1.5 0 0 0 0 1.8v17.4a1.5 1.5 0 0 0 1.5 1.4h17.3a1.5 1.5 0 0 0 1.5-1.4V1.8A1.5 1.5 0 0 0 18.8.4"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 .4h24v20.5H0z"></path></clipPath></defs></svg></a><a variant="text" href="/code/" target="_blank" aria-label="Github"><span class="navbar-icon-github" style="width:22px;height:22px;display:inline-block"></span></a><a variant="text" href="/chat/" target="_blank" aria-label="Discord"><span class="navbar-icon-discord" style="width:22px;height:22px;display:inline-block"></span></a></div></span></div><div class="half right" style="display:flex;flex:1"><div style="display:flex"><div class="footer-links min-width-180-135"><a variant="text" href="/overview.html" target="">Docs</a><a variant="text" href="/replication.html" target="">Sync</a><a variant="text" href="/rx-storage.html" target="">Storages</a><a variant="text" href="/premium/" target="_blank">Premium</a><a variant="text" href="/consulting/" target="_blank">Support</a></div><div class="footer-links min-width-180-135"><a variant="text" href="/#reviews" target="">Our Customers</a><a variant="text" href="/consulting#become-partner" target="">Become a Partner</a><a variant="text" href="/legal-notice/" target="_blank">Legal Notice</a></div></div></div></div></div><div class="navbar-line" style="display:block;z-index:10;height:1.5px;background-color:var(--color-top);border-top-right-radius:2px;border-bottom-right-radius:2px;width:100%"></div><div class="call-to-action-popup"><div class="close-popup"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" class="" style="transform:scale(1);transition:transform 0.2s ease-in-out;display:inline-block;cursor:pointer"><path d="M4 16H8L8 12H4L4 16Z" fill="white"></path><path d="M0 20H4L4 16H0L0 20Z" fill="white"></path><path d="M8 11.9999H12V7.99992H8L8 11.9999Z" fill="white"></path><path d="M4 8.00008H8L8 4.00008H4L4 8.00008Z" fill="white"></path><path d="M0 4.00004L4 4.00004L4 3.8147e-05L0 3.8147e-05L0 4.00004Z" fill="white"></path><path d="M16 11.9999H12V15.9999H16V11.9999Z" fill="white"></path><path d="M20 16H16V20H20V16Z" fill="white"></path><path d="M16 4.00004H12V8.00004H16V4.00004Z" fill="white"></path><path d="M20 0H16V4H20V0Z" fill="white"></path></svg></div></div></div>
</body>
</html>